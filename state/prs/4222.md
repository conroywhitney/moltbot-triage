---
number: 4222
title: "fix: canvas root should respect agents.defaults.workspace"
author: sanool
created: 2026-01-29T22:16:31Z
updated: 2026-01-29T22:19:36Z
labels: ["gateway"]
additions: 5
deletions: 2
changed_files: 3
size: tiny
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: pending
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/4222
fixes_issues: [2282]
related_prs: [2282]
duplicate_of: null
---

## Description

## Summary

When `canvasHost.root` is not explicitly configured, the canvas directory defaults to `~/clawd/canvas` regardless of the user's `agents.defaults.workspace` setting. This PR derives the default from the workspace directory instead, so users with a custom workspace (e.g. `~/Bot`) get `~/Bot/canvas` automatically.

Closes #2282

- Pass `defaultWorkspaceDir` into `createGatewayRuntimeState`
- Use `path.join(defaultWorkspaceDir, "canvas")` as fallback when `canvasHost.root` is unset
- Update doc comment in `CanvasHostConfig` to reflect the new default

Backward compatible: if workspace is not customized, the default remains `~/clawd/canvas`.

## Test plan

- Set `agents.defaults.workspace` to a custom dir (e.g. `~/Bot`), leave `canvasHost.root` unset → canvas mounts at `~/Bot/canvas`
- Explicitly set `canvasHost.root` → that value is used (unchanged behavior)
- No workspace or canvas config → defaults to `~/clawd/canvas` (unchanged behavior)

## Reviews


## Comments


## Stats

- **Size:** tiny (5+, 2-, 3 files)
- **Age:** 0 days
- **Last activity:** 2026-01-29

## Links

- Fixes: #2282
