---
number: 5514
title: "Slack: fix threadId ignored on read + thread_broadcast dropped"
author: SanderHelgesen
created: 2026-01-31T15:46:23Z
updated: 2026-02-02T18:12:29Z
labels: ["channel: slack"]
additions: 1
deletions: 1
changed_files: 2
size: tiny
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 3
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/5514
fixes_issues: [2454,4351]
related_prs: [2454,4351]
duplicate_of: null
---

## Description

## Summary

- **Bug 1 (#2454):** The Slack extension's `action=read` handler was not passing `threadId` through to `handleSlackAction`. Added the missing `threadId` param in `extensions/slack/src/channel.ts`.
- **Bug 2 (#4351):** Messages with `subtype === "thread_broadcast"` (thread replies sent with "Also send to channel") were dropped because the handler returned early after logging a system event. Removed the early `return` in `src/slack/monitor/events/messages.ts` so these messages fall through to `handleSlackMessage`.

Closes #2454, Closes #4351

## Test plan

- [x] `pnpm build` passes
- [x] `pnpm vitest run src/slack/ extensions/slack/` ‚Äî all 126 tests pass
- [ ] Manual: send a thread broadcast in Slack and verify it's processed
- [ ] Manual: read messages with a `threadId` param via the extension and verify thread messages are returned

ü§ñ Generated with [Claude Code](https://claude.com/claude-code)

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR fixes two Slack message handling regressions:

- In the Slack extension channel plugin, the `action=read` handler now forwards `threadId` into the `readMessages` tool payload so threaded reads can be scoped correctly.
- In the core Slack monitor message event handler, `thread_broadcast` messages no longer return early after logging a system event; they now continue through the shared `handleSlackMessage(...)` path, preventing these user-visible messages from being dropped.

Both changes are small and localized, and they align the extension adapter behavior with the existing core Slack actions adapter implementation.

<h3>Confidence Score: 5/5</h3>

- This PR is safe to merge with minimal risk.
- Changes are narrowly scoped (one added param passthrough and one removed early return) and they restore intended Slack behavior without altering interfaces or control flow beyond the specific bug conditions; the extension change matches existing core adapter behavior and there are no new edge cases apparent in the touched code paths.
- No files require special attention

<!-- greptile_other_comments_section -->

**Context used:**

- Context from `dashboard` - CLAUDE.md ([source](https://app.greptile.com/review/custom-context?memory=fd949e91-5c3a-4ab5-90a1-cbe184fd6ce8))
- Context from `dashboard` - AGENTS.md ([source](https://app.greptile.com/review/custom-context?memory=0d0c8278-ef8e-4d6c-ab21-f5527e322f13))

<!-- /greptile_comment -->

## Reviews

### @greptile-apps ‚Äî COMMENTED (2026-01-31)

<sub>No files reviewed, no comments</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments

### @adam91holt (2026-02-02)

üîç **Overlapping PRs Detected**

This PR appears to overlap with **8 other open PRs** addressing Slack thread context and threadId handling:

| Similarity | PR | Author | Title |
|---|---|---|---|
| 92.0% | [#5098](https://github.com/openclaw/openclaw/pull/5098) | @galligan | fix(slack): forward threadId for message.read |
| 91.9% | [#4089](https://github.com/openclaw/openclaw/pull/4089) | @mihar | fix(slack): pass threadId param in message read action |
| 88.3% | [#3743](https://github.com/openclaw/openclaw/pull/3743) | @tumf | fix(slack): pass toolContext to read action for thread reply support |
| 86.2% | [#5245](https://github.com/openclaw/openclaw/pull/5245) | @cutsome | [Slack] fix: preserve thread context for string threadId in queue drai |
| 86.1% | [#2917](https://github.com/openclaw/openclaw/pull/2917) | @SocialNerd42069 | Slack: fix thread context + prevent reply spillover |
| 85.9% | [#4031](https://github.com/openclaw/openclaw/pull/4031) | @williamwa | Fix reply post in thread in slack |
| 85.5% | [#4749](https://github.com/openclaw/openclaw/pull/4749) | @nvonpentz | fix: handle string thread IDs in queue drain for Slack |
| 84.7% | [#4389](https://github.com/openclaw/openclaw/pull/4389) | @Chloe-VP | fix: handle string thread_ts from Slack properly |

Similarity scores computed using Voyage AI embeddings (cosine similarity) on standardized PR summaries.

### @mihar (2026-02-02)

Great, let's merge any of them then

### @SanderHelgesen (2026-02-02)

+1


## Stats

- **Size:** tiny (1+, 1-, 2 files)
- **Age:** 2 days
- **Last activity:** 2026-02-02

## Links

- Fixes: #2454
- Fixes: #4351
