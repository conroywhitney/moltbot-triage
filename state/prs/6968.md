---
number: 6968
title: "Add LM Studio onboarding option"
author: i3T4AN
created: 2026-02-02T07:35:56Z
updated: 2026-02-02T15:29:32Z
labels: ["commands"]
additions: 193
deletions: 1
changed_files: 5
size: medium
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 0
reactions_total: 1
ci_status: pending
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/6968
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

Adds LM Studio as an onboarding choice that prompts for host:port (or full URL) and model id, writes/merges the lmstudio provider config, and only sets the default model when requested while still setting agent overrides when applicable. Fixes the minimax preferred‑provider mapping, removes duplicate LM Studio entries in auth choice lists, preserves existing LM Studio provider settings and model lists, and normalizes base URLs (http for loopback/private LAN; avoids /v1 duplication). Allows single‑segment LM Studio model IDs and hardens input validation. Format and tsgo pass; lint fails due to pre‑existing extension type errors unrelated to this change.

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR adds LM Studio as an onboarding/auth choice and wires it into the existing `applyAuthChoice` handler chain. It introduces a new LM Studio auth applicator that prompts for base URL + model id, normalizes the URL to include `/v1`, merges provider config under `models.providers.lmstudio`, and optionally sets the default model while still returning an agent model override. It also fixes the preferred-provider mapping for `minimax` and adds the new `lmstudio` auth choice to the shared onboarding/auth choice types and option groups.

<h3>Confidence Score: 3/5</h3>

- Mostly safe to merge, but URL normalization has edge cases that can produce broken base URLs.
- Changes are localized to onboarding/auth choice plumbing and a new LM Studio applicator. The main risk is incorrect base URL normalization when users supply a URL with a non-root path that already ends in `/v1`, which can lead to a duplicated `/v1` segment and failed requests. Other notes are UX defaults rather than correctness issues.
- src/commands/auth-choice.apply.lmstudio.ts

<!-- greptile_other_comments_section -->

**Context used:**

- Context from `dashboard` - CLAUDE.md ([source](https://app.greptile.com/review/custom-context?memory=fd949e91-5c3a-4ab5-90a1-cbe184fd6ce8))
- Context from `dashboard` - AGENTS.md ([source](https://app.greptile.com/review/custom-context?memory=0d0c8278-ef8e-4d6c-ab21-f5527e322f13))

<!-- /greptile_comment -->

## Reviews

### @greptile-apps — COMMENTED (2026-02-02)

<sub>1 file reviewed, 3 comments</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments


## Stats

- **Size:** medium (193+, 1-, 5 files)
- **Age:** 0 days
- **Last activity:** 2026-02-02

## Links

- Fixes: (none detected)
