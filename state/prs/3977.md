---
number: 3977
title: "feat(discord): add reaction trigger feature"
author: jjangg96
created: 2026-01-29T13:13:54Z
updated: 2026-01-29T13:14:06Z
labels: ["docs", "channel: discord", "gateway"]
additions: 312
deletions: 7
changed_files: 9
size: large
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/3977
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary
Add a new reaction trigger feature that allows the bot to immediately respond when users react to its messages with positive/negative emojis. This enables yes/no confirmation flows without requiring users to type a new message.

## Motivation
Previously, reactions on bot messages were only logged as system events and processed on the next incoming message. This feature allows immediate session dispatch when a user reacts, useful for:
- "Should I create a thread?" â†’ ğŸ‘ â†’ bot proceeds
- Confirmation/cancel flows
- Quick acknowledgments

## Changes
- **Config**: Add `guilds.<id>.reactionTrigger` config with `enabled`, `windowSeconds`, `positiveEmojis`, `negativeEmojis`
- **Cache**: Cache bot messages (5min TTL) for reaction detection
- **Classification**: Classify emojis as positive/negative/neutral
- **Trigger**: Fire-and-forget dispatch to session when conditions are met
- **Docs**: Add documentation for the new feature

## Config Example
```yaml
guilds:
  "YOUR_GUILD_ID":
    reactionTrigger:
      enabled: true
      windowSeconds: 60
      positiveEmojis: ["ğŸ‘", "âœ…", "ğŸ‘Œ"]
      negativeEmojis: ["ğŸ‘", "âŒ"]
``` 

## Testing
- [x] Tested in production Discord server
- [x] Verified immediate trigger on ğŸ‘ reaction
- [x] Verified no timeout issues (fire-and-forget pattern)
- [x] Verified existing `reactionNotifications` still works

## AI Disclosure ğŸ¤–
- [x] AI-assisted (Claude)
- [x] Fully tested in production
- [x] Human reviewed and understood

## Reviews


## Comments


## Stats

- **Size:** large (312+, 7-, 9 files)
- **Age:** 0 days
- **Last activity:** 2026-01-29

## Links

- Fixes: (none detected)
