---
number: 2228
title: "fix(cron): warn when isolated job won't deliver output"
author: matthiasroder
created: 2026-01-26T13:56:16Z
updated: 2026-02-03T03:58:03Z
labels: ["cli"]
additions: 13
deletions: 0
changed_files: 1
size: small
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 0
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/2228
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary

When creating an isolated cron job with `--message` but without `--deliver` or `--to`, the job runs but the agent output goes nowhere. This is a common mistake that's hard to debug - the job appears to succeed but nothing is actually delivered.

This was discovered when an LLM agent (running on clawdbot) created hourly check-in jobs that never sent messages. The agent assumed `--message` meant the message would be sent, but without `--deliver --channel --to`, the output just disappears.

## Changes

- Add a warning when creating isolated jobs without delivery configuration
- Suggests adding `--deliver --channel <channel> --to <dest>` for proactive delivery

## Example

Before (silent failure):
```bash
clawdbot cron add --name "reminder" --at +10m --session isolated --message "Check email"
# Job runs, output goes nowhere, no indication of the problem
```

After (helpful warning):
```bash
clawdbot cron add --name "reminder" --at +10m --session isolated --message "Check email"
# warning: isolated job has --message but no --deliver or --to; agent output will not be sent.
# Add --deliver --channel <channel> --to <dest> if you want proactive message delivery.
```

## Test plan

- [x] Existing tests pass (`vitest run src/cli/cron-cli.test.ts`)
- [x] Lint passes
- [ ] Manual test: create isolated job without delivery, verify warning appears

ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR adds a CLI-side warning when creating an **isolated** cron job using `--message` but without any delivery configuration (`--deliver` or `--to`), to help users avoid jobs that run successfully but never proactively send their output anywhere. The check is implemented in `src/cli/cron-cli/register.cron-add.ts` after validating the session/payload pairing, and emits a guidance message suggesting `--deliver --channel <channel> --to <dest>`.

<h3>Confidence Score: 4/5</h3>

- This PR is safe to merge with low functional risk.
- Change is small, localized to CLI argument handling, and only adds a warning without altering the request payload sent to the gateway. Main consideration is how emitting warnings on stderr may impact scripting/automation expectations.
- src/cli/cron-cli/register.cron-add.ts

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

<!-- /greptile_comment -->

## Reviews

### @greptile-apps â€” COMMENTED (2026-02-03)

<sub>1 file reviewed, 1 comment</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments


## Stats

- **Size:** small (13+, 0-, 1 files)
- **Age:** 7 days
- **Last activity:** 2026-02-03

## Links

- Fixes: (none detected)
