---
number: 2180
title: "fix(infra): use 'where' instead of 'which' on Windows for binary detection"
author: YuriNachos
created: 2026-01-26T10:50:33Z
updated: 2026-01-28T23:25:12Z
labels: []
additions: 77
deletions: 23
changed_files: 2
size: medium
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/moltbot/moltbot/pull/2180
fixes_issues: [2172]
related_prs: [2172]
duplicate_of: null
---

## Description

## Summary
Fixes #2172

On Windows, skill detection fails for skills that require CLI binaries (e.g., blogwatcher, yt-dlp, ffmpeg) because `src/infra/binaries.ts` uses the `which` command, which is not native to Windows. Windows uses `where.exe` instead.

## Changes
- Modified `src/infra/binaries.ts` to use `process.platform === "win32" ? "where" : "which"` pattern
- This follows the existing pattern used elsewhere in the codebase:
  - `src/daemon/program-args.ts:140`
  - `src/commands/onboard-helpers.ts:304`

## Test Coverage
Added tests for both Unix and Windows platforms in `src/infra/binaries.test.ts`:
- Unix: verifies `which` is used
- Windows: verifies `where` is used

## Testing
- All 4 tests pass (2 Unix + 2 Windows)
- Linting passes for modified files

## Impact
Skills requiring binaries will now be correctly detected on Windows.

---

AI-assisted PR. Changes were tested with `pnpm test src/infra/binaries.test.ts` and linted with `pnpm exec oxlint`.

## Reviews


## Comments


## Stats

- **Size:** medium (77+, 23-, 2 files)
- **Age:** 3 days
- **Last activity:** 2026-01-28

## Links

- Fixes: #2172
