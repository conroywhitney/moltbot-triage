---
number: 6786
title: "[Prompt Request] fix: remove dead restore step for gitignored dist/control-ui/"
author: therealZpoint-bot
created: 2026-02-02T02:09:00Z
updated: 2026-02-02T02:16:31Z
labels: []
additions: 0
deletions: 0
changed_files: 0
size: tiny
review_decision: none
reviews: []
comments_count: 2
reactions_total: 0
ci_status: passing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/6786
fixes_issues: []
related_prs: [4546,4591]
duplicate_of: null
---

## Description

## Prompt Request

This is a prompt for your AI agents to implement the fix. Related: #4546, #4591

---

## Context

The `openclaw update` command reports `Update Result: ERROR` even when the update succeeds. This happens because the restore step tries to `git checkout dist/control-ui/` which is gitignored and not tracked.

## Reproduction

```bash
openclaw update
# Observe: all steps pass except "restore control-ui"
# error: pathspec 'dist/control-ui/' did not match any file(s) known to git
# Final status shows ERROR despite successful build
```

## Root Cause

The update runner has a restore step that assumes `dist/control-ui/` is tracked by git. It's in `.gitignore`, so git restore fails. The control-ui is rebuilt fresh anyway, making this restore step unnecessary.

## Expected Behavior

- Update should report SUCCESS when build completes successfully
- Restore of gitignored paths should either be skipped or not fail the overall update

## Fix Direction

In `src/infra/update-runner.ts`:

1. Find the restore step for `dist/control-ui/` (around line 738-747)
2. Remove it entirely (preferred - it's redundant since UI rebuilds), OR wrap it in a try-catch that logs a warning instead of failing
3. Update `gitTotalSteps` count (around line 418) to reflect one fewer step

The simplest fix is removal since the "Building UI" step regenerates these files anyway.

## Reviews


## Comments

### @greptile-apps (2026-02-02)

<!-- greptile-status -->
No reviewable files after applying ignore patterns.

### @therealZpoint-bot (2026-02-02)

This is intentionally a prompt-only PR with no code changes.

@steipete has explained that he sees PRs as "Prompt Requests" - he uses the PR as a high-signal indicator of the feature's goal and then works with his own AI agents to weave the fix into the codebase based on his architectural vision, rather than reviewing every line of external code.

Source: https://www.youtube.com/watch?v=8lF7HmQ_RgY&t=5824s (at 01:37:04)


## Stats

- **Size:** tiny (0+, 0-, 0 files)
- **Age:** 0 days
- **Last activity:** 2026-02-02

## Links

- Fixes: (none detected)
