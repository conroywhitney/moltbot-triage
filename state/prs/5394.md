---
number: 5394
title: "fix(cron): pass job name as session label"
author: Glucksberg
created: 2026-01-31T12:45:52Z
updated: 2026-02-01T15:23:11Z
labels: ["docs", "channel: telegram"]
additions: 16
deletions: 6
changed_files: 9
size: small
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 0
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/5394
fixes_issues: [5337]
related_prs: [5337]
duplicate_of: null
---

## Description

## Summary

Fixes #5337

When cron jobs spawn isolated sessions, the session now inherits the job's name as its label, making it visible in the dashboard.

## Before / After

| Before | After |
|--------|-------|
| üî¥ Cron - Active | üî¥ Email check - Active |

## Changes

1. **`session.ts`**: Added optional `label` parameter to `resolveCronSession()`
2. **`run.ts`**: Pass `job.name` as the label when creating sessions
3. **`timer.ts`**: Use job name as the default prefix when posting results back to main session

## Behavior

- Session label = job name (if set)
- Falls back to existing label if session already exists
- Status messages also use job name: `Email check: completed` instead of `Cron: completed`
- Still respects `isolation.postToMainPrefix` if explicitly configured

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR propagates cron job names into isolated-session labeling and status reporting: `runCronIsolatedAgentTurn` now passes `job.name` into `resolveCronSession`, `resolveCronSession` stores that as the session‚Äôs `label` (falling back to an existing label), and `executeJob` uses a name-derived prefix for posting isolated job results back to the main session.

The overall shape fits the existing cron isolated-agent flow (session store + transcript per run, plus main-lane system events), but there are a couple ordering/semantics mismatches with the stated behavior (prefix precedence, and whether a session is actually ‚Äúnew‚Äù).

<h3>Confidence Score: 3/5</h3>

- This PR is likely safe to merge, but has a couple behavioral mismatches that could prevent the intended UX from showing up reliably.
- Changes are small and localized, but (1) the post-to-main prefix precedence doesn‚Äôt match the described behavior, and (2) `resolveCronSession`‚Äôs `isNewSession` semantics look incorrect if anything relies on it. Both are fixable but could lead to confusing dashboard/status output or session tracking quirks.
- src/cron/service/timer.ts, src/cron/isolated-agent/session.ts

<!-- greptile_other_comments_section -->

**Context used:**

- Context from `dashboard` - CLAUDE.md ([source](https://app.greptile.com/review/custom-context?memory=fd949e91-5c3a-4ab5-90a1-cbe184fd6ce8))
- Context from `dashboard` - AGENTS.md ([source](https://app.greptile.com/review/custom-context?memory=0d0c8278-ef8e-4d6c-ab21-f5527e322f13))

<!-- /greptile_comment -->

## Reviews

### @greptile-apps ‚Äî COMMENTED (2026-01-31)

<sub>2 files reviewed, 2 comments</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments


## Stats

- **Size:** small (16+, 6-, 9 files)
- **Age:** 2 days
- **Last activity:** 2026-02-01

## Links

- Fixes: #5337
