---
number: 4576
title: "Gateway warn on public IP binding to prevent accidental exposure"
author: anthony-maio
created: 2026-01-30T10:26:19Z
updated: 2026-01-30T10:31:54Z
labels: ["gateway", "commands"]
additions: 159
deletions: 1
changed_files: 3
size: medium
review_decision: none
reviews: [{"author":"chatgpt-codex-connector","state":"COMMENTED"},{"author":"copilot-pull-request-reviewer","state":"COMMENTED"}]
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/4576
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

  ## Summary
  - Add warning when gateway binds to public IP addresses
  - Add doctor check for public IP exposure
  - Add `isPrivateIP()` / `getPublicIPs()` utilities to `src/gateway/net.ts`

  ## Motivation
  Users deploying on VPS/cloud instances sometimes bind to `0.0.0.0` or a public interface without realizing      
  they're exposing their gateway to the internet. This is how installations end up on Shodan.

  The recent security release added auth hardening (great!), but a user with weak/default auth + public binding is
   still at risk. This adds a prominent warning at startup and enhances the doctor check to catch this
  misconfiguration.

  ## Changes
  - `src/gateway/net.ts`: Add `isPrivateIPv4()`, `isPrivateIPv6()`, `isPrivateIP()`, `getPublicIPs()`
  - `src/gateway/server-startup-log.ts`: Add `warnIfPublicBind()` check at startup
  - `src/commands/doctor-security.ts`: Enhance network exposure diagnostic with public IP detection

  ## Testing
  - [x] Tested locally with `--bind lan` on a machine with public IP
  - [x] Verified warning appears in logs
  - [x] Verified doctor reports the issue

  ## AI-Assisted
  This PR was developed with Claude assistance.

## Reviews

### @chatgpt-codex-connector ‚Äî COMMENTED (2026-01-30)


### üí° Codex Review

Here are some automated review suggestions for this pull request.

**Reviewed commit:** `2740ec5393`
    

<details> <summary>‚ÑπÔ∏è About Codex in GitHub</summary>
<br/>

[Your team has set up Codex to review pull requests in this repo](http://chatgpt.com/codex/settings/general). Reviews are triggered when you
- Open a pull request for review
- Mark a draft as ready
- Comment "@codex review".

If Codex has suggestions, it will comment; otherwise it will react with üëç.




Codex can also answer questions or update the PR. Try commenting "@codex address that feedback".
            
</details>

### @copilot-pull-request-reviewer ‚Äî COMMENTED (2026-01-30)

## Pull request overview

This PR adds security warnings to prevent accidental exposure of gateway instances to the public internet. The changes detect when a gateway binds to public IP addresses and warn users at startup and in doctor checks.

**Changes:**
- Added IP address classification utilities (isPrivateIPv4, isPrivateIPv6, isPrivateIP, getPublicIPs) in src/gateway/net.ts
- Added startup warnings in src/gateway/server-startup-log.ts when binding to 0.0.0.0 or public IPs
- Enhanced doctor security checks in src/commands/doctor-security.ts to detect public IP exposure

### Reviewed changes

Copilot reviewed 3 out of 3 changed files in this pull request and generated 10 comments.

| File | Description |
| ---- | ----------- |
| src/gateway/net.ts | Adds utility functions to detect private/public IP addresses and enumerate public network interfaces |
| src/gateway/server-startup-log.ts | Adds warnIfPublicBind() to display prominent warnings when gateway binds to public addresses |
| src/commands/doctor-security.ts | Enhances security diagnostics with public IP exposure detection |





---

üí° <a href="/openclaw/openclaw/new/main/.github/instructions?filename=*.instructions.md" class="Link--inTextBlock" target="_blank" rel="noopener noreferrer">Add Copilot custom instructions</a> for smarter, more guided reviews. <a href="https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot" class="Link--inTextBlock" target="_blank" rel="noopener noreferrer">Learn how to get started</a>.


## Comments


## Stats

- **Size:** medium (159+, 1-, 3 files)
- **Age:** 0 days
- **Last activity:** 2026-01-30

## Links

- Fixes: (none detected)
