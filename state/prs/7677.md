---
number: 7677
title: "feat: add i18n framework and Chinese localization for onboarding wizard"
author: pallasting
created: 2026-02-03T03:27:07Z
updated: 2026-02-03T03:55:07Z
labels: []
additions: 477
deletions: 231
changed_files: 8
size: large
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 1
reactions_total: 1
ci_status: failing
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/7677
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

Overview
This PR introduces a basic internationalization (i18n) framework to OpenClaw and provides full Chinese (Simplified) translation for the onboarding wizard (openclaw onboard).

Changes
i18n Framework:
Added src/i18n/ directory with a central manager (index.ts).
Implemented t() function for type-safe translations.
Added base translation files: en.ts (English) and zh-CN.ts (Simplified Chinese).
Configuration Update:
Updated OpenClawConfig schema and types to include a language field for persisting user preference.
Onboarding Wizard Enhancements:
Added an interactive language selection step at the very beginning of the wizard.
Localized all prompts, warnings, and notes in onboarding.ts, onboarding.gateway-config.ts, and onboarding.finalize.ts.
The wizard now supports switching between languages seamlessly during the initial setup.
Motivation
To make OpenClaw more accessible to Chinese-speaking users and provide a foundation for future localization of the TUI and other CLI components.

Testing Performed
Verified the language selection prompt appears correctly on start.
Successfully completed the full onboarding flow in both English and Chinese.
Verified that the language field is correctly saved in openclaw.json.
Ran pnpm build to ensure no regression in types or build process.

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR adds a minimal i18n layer (`src/i18n/*`) with English and Simplified Chinese dictionaries, wires a new `language` field into the OpenClaw config schema/types, and localizes the onboarding wizard prompts by switching most strings to `t().wizard.*`. The onboarding flow now begins with a locale selection prompt and persists that choice to `openclaw.json`.

Main issues found are around onboarding status messaging (restart/reinstall reporting as “installed”) and a small translation typo in `zh-CN`.

<h3>Confidence Score: 4/5</h3>

- This PR is generally safe to merge, with a couple of user-facing messaging/translation issues to fix.
- Changes are mostly additive (new i18n module and translations) and straightforward string wiring, but there are a few misleading onboarding progress messages (restart/reinstall) that will confuse users, plus a minor translation typo.
- src/wizard/onboarding.finalize.ts, src/i18n/zh-CN.ts

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

**Context used:**

- Context from `dashboard` - CLAUDE.md ([source](https://app.greptile.com/review/custom-context?memory=fd949e91-5c3a-4ab5-90a1-cbe184fd6ce8))
- Context from `dashboard` - AGENTS.md ([source](https://app.greptile.com/review/custom-context?memory=0d0c8278-ef8e-4d6c-ab21-f5527e322f13))

<!-- /greptile_comment -->

## Reviews

### @greptile-apps — COMMENTED (2026-02-03)

<sub>3 files reviewed, 3 comments</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments

### @greptile-apps (2026-02-03)

<details>
<summary>Additional Comments (3)</summary>

**`src/wizard/onboarding.finalize.ts`**
[P1] Restart action shows wrong completion message

In the `action === "restart"` path, the progress `doneMessage` is set to `t().wizard.gatewayServiceInstalled`, which reads like an install success rather than a restart success. This will mislead users when they chose “Restart”.

This same message is also reused for the `reinstall` path even though that step only uninstalls.

Also appears in `src/wizard/onboarding.finalize.ts:148-154`.

<details><summary>Prompt To Fix With AI</summary>

`````markdown
This is a comment left during a code review.
Path: src/wizard/onboarding.finalize.ts
Line: 136:142

Comment:
[P1] Restart action shows wrong completion message

In the `action === "restart"` path, the progress `doneMessage` is set to `t().wizard.gatewayServiceInstalled`, which reads like an install success rather than a restart success. This will mislead users when they chose “Restart”.

This same message is also reused for the `reinstall` path even though that step only uninstalls.

Also appears in `src/wizard/onboarding.finalize.ts:148-154`.

How can I resolve this? If you propose a fix, please make it concise.
`````
</details>

---

**`/wizard/onboarding.finalize.ts`**
[P1] Reinstall path reports install completed

The `action === "reinstall"` branch only runs `service.uninstall(...)`, but the progress `doneMessage` is `t().wizard.gatewayServiceInstalled` (install success). That’s confusing for users and makes it harder to tell what actually happened during onboarding.

<details><summary>Prompt To Fix With AI</summary>

`````markdown
This is a comment left during a code review.
Path: /wizard/onboarding.finalize.ts
Line: 148:154

Comment:
[P1] Reinstall path reports install completed

The `action === "reinstall"` branch only runs `service.uninstall(...)`, but the progress `doneMessage` is `t().wizard.gatewayServiceInstalled` (install success). That’s confusing for users and makes it harder to tell what actually happened during onboarding.

How can I resolve this? If you propose a fix, please make it concise.
`````
</details>

---

**`src/i18n/zh-CN.ts`**
[P2] Mixed-language string in Chinese translation

`securityWarning` includes `"...安全知识 and 访问控制..."` which leaves an English “and” in the Simplified Chinese text. This looks like an accidental leftover and will show up in the onboarding security warning.

<details><summary>Prompt To Fix With AI</summary>

`````markdown
This is a comment left during a code review.
Path: src/i18n/zh-CN.ts
Line: 12:15

Comment:
[P2] Mixed-language string in Chinese translation

`securityWarning` includes `"...安全知识 and 访问控制..."` which leaves an English “and” in the Simplified Chinese text. This looks like an accidental leftover and will show up in the onboarding security warning.

How can I resolve this? If you propose a fix, please make it concise.
`````
</details>
</details>


## Stats

- **Size:** large (477+, 231-, 8 files)
- **Age:** 0 days
- **Last activity:** 2026-02-03

## Links

- Fixes: (none detected)
