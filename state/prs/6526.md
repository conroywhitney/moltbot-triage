---
number: 6526
title: "fix(discord): support message content in forum thread creation"
author: ehr3n
created: 2026-02-01T19:09:05Z
updated: 2026-02-01T19:38:05Z
labels: ["docs", "channel: discord", "channel: telegram", "docker", "agents"]
additions: 54
deletions: 24
changed_files: 13
size: medium
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 0
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/6526
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

Discord forum channels (type 15) require a message object with the initial post content when creating a thread via the API. This fix:

- Adds 'message' field to DiscordThreadCreate type
- Adds 'appliedTags' field for forum tag support
- Transforms string message to {content} object in action handler
- Passes through message and appliedTags in API request

Without this fix, creating forum threads via the message tool's thread-create action would fail with Discord API errors.

Testing:
- Local testing: Created forum threads with tags successfully
- Test suite: pnpm test passes (5139 tests)

AI-Assisted: This PR was created with AI assistance (Claude/OpenClaw).
Testing level: fully tested

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR updates Discord thread creation to support forum channels by adding an initial `message` object and optional `appliedTags` to the thread-create payload, and passing both through to the Discord REST request (`body.message` and `body.applied_tags`). It also extends the message tool schema to accept `appliedTags`.

Main concern: there are now two call paths creating threads (agents tool vs channels action handler), and they don’t normalize the `message` field consistently — one builds `{ content }`, the other passes a string. If that string reaches the REST layer unchanged, forum thread creation will still fail with a payload-shape error.

<h3>Confidence Score: 3/5</h3>

- Moderately safe to merge, but forum-thread creation may still fail depending on runtime payload normalization.
- Changes are small and localized, but there is an apparent type/shape mismatch for the new `message` field between one action handler (string) and the REST layer/type definition (object). If `handleDiscordAction` doesn’t perform the described transformation, this is a functional regression for forum thread creation via that path.
- src/channels/plugins/actions/discord/handle-action.ts; any code in the handleDiscordAction pipeline that maps `message` into the Discord API payload

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

**Context used:**

- Context from `dashboard` - CLAUDE.md ([source](https://app.greptile.com/review/custom-context?memory=fd949e91-5c3a-4ab5-90a1-cbe184fd6ce8))
- Context from `dashboard` - AGENTS.md ([source](https://app.greptile.com/review/custom-context?memory=0d0c8278-ef8e-4d6c-ab21-f5527e322f13))

<!-- /greptile_comment -->

## Reviews

### @greptile-apps — COMMENTED (2026-02-01)

<sub>1 file reviewed, 1 comment</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments


## Stats

- **Size:** medium (54+, 24-, 13 files)
- **Age:** 1 days
- **Last activity:** 2026-02-01

## Links

- Fixes: (none detected)
