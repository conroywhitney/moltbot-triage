---
number: 2166
title: "fix(node): reconnect stale gateway ws"
author: ngutman
created: 2026-01-26T10:06:38Z
updated: 2026-01-28T23:25:12Z
labels: ["app: macos"]
additions: 32
deletions: 5
changed_files: 3
size: small
review_decision: none
reviews: []
comments_count: 1
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/2166
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary
- detect stale gateway sockets using tick age and force a reconnect
- stop reporting node connected before a hello-ok snapshot arrives
- split gateway logs into gateway.control vs gateway.node for clarity

## Testing
- Repro: MacBook Pro sleep/wake left node disconnected (paired but not connected)
- Verified fix by manually sleeping/waking and checking macOS logs for reconnection

## Reviews


## Comments

### @ngutman (2026-01-28)

@thewilloftheshadow wanted to bring this up, I'm aware of the huge amounts of PRs this one effects all macOS node connections when the machine comes back from sleep (or when the node is restarted)


## Stats

- **Size:** small (32+, 5-, 3 files)
- **Age:** 4 days
- **Last activity:** 2026-01-28

## Links

- Fixes: (none detected)
