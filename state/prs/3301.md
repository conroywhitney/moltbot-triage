---
number: 3301
title: "feat(agents): add per-agent thinkingDefault override"
author: Glucksberg
created: 2026-01-28T11:30:35Z
updated: 2026-01-28T23:25:09Z
labels: ["agents"]
additions: 28
deletions: 0
changed_files: 6
size: small
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/moltbot/moltbot/pull/3301
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary

[Human comment: I found this one very useful for my workflow. I've been mistakenly using "low" for some time across all agents and it proved to be better than I thought. This will help getting the appropriate thinking effort according to the agent porpouse.]

Allows setting `thinkingDefault` on individual agent entries to override the global `agents.defaults.thinkingDefault`.

## Use Case

Different agents have different reasoning needs:
- A **code-reviewer** agent benefits from higher thinking levels for thorough analysis
- A **quick-responder** agent should use minimal/no thinking for fast responses
- A **research** agent might need high thinking for complex queries

Currently, all agents share the same global `thinkingDefault`. This PR enables per-agent customization.

## Priority Order

Thinking level resolution (highest to lowest priority):
1. Inline `/think` directive
2. Session-level thinking (persisted via `/think`)
3. **Agent-specific `thinkingDefault`** ‚Üê NEW
4. Global `agents.defaults.thinkingDefault`
5. Model default

## Example Config

```yaml
agents:
  defaults:
    thinkingDefault: low
  list:
    - id: code-reviewer
      thinkingDefault: high  # uses more reasoning for reviews
    - id: quick-responder
      thinkingDefault: off   # fast responses
    - id: default
      # inherits global 'low'
```

## Changes

- `types.agents.ts`: Add `thinkingDefault` to `AgentConfig` type
- `zod-schema.agent-runtime.ts`: Add `ThinkingDefaultSchema` and use in `AgentEntrySchema`
- `agent-scope.ts`: Propagate `thinkingDefault` in resolved config
- `get-reply.ts`: Resolve per-agent config and extract thinking default
- `get-reply-directives.ts`: Include `agentThinkingDefault` in resolution chain
- `get-reply-directives-apply.ts`: Apply per-agent thinking in override logic

## Testing

Tested manually with multi-agent setup. Existing thinking-related tests pass.

## Reviews


## Comments


## Stats

- **Size:** small (28+, 0-, 6 files)
- **Age:** 1 days
- **Last activity:** 2026-01-28

## Links

- Fixes: (none detected)
