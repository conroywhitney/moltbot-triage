---
number: 2429
title: "added cerebras as a model provider."
author: kkkamur07
created: 2026-01-26T23:00:57Z
updated: 2026-02-03T03:58:22Z
labels: ["docs", "gateway", "cli", "commands", "agents"]
additions: 346
deletions: 4
changed_files: 13
size: large
review_decision: none
reviews: [{"author":"shivaylamba","state":"COMMENTED"},{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 2
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/2429
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

# Add Cerebras Provider

## Summary
Adds Cerebras as a new model provider with support for 6 ultra-fast inference models using their OpenAI-compatible API at `https://api.cerebras.ai/v1`. Also they have a free tier of about 1M tokens a day, potentially allowing us to run clawdbot for free ( for some while ). 

## Changes
- ✅ Added Cerebras provider configuration with 6 models:
  - `llama3.1-8b` (default)
  - `llama-3.3-70b`
  - `gpt-oss-120b`
  - `qwen-3-32b`
  - `qwen-3-235b-a22b-instruct-2507`
  - `zai-glm-4.7`
- ✅ Interactive onboarding support (`clawdbot onboard --auth-choice cerebras-api-key`)
- ✅ Non-interactive CLI flag (`--cerebras-api-key`)
- ✅ Documentation for setup and usage

## Files Modified
- `src/agents/models-config.providers.ts` - Provider configuration and model catalog
- `src/commands/onboard-auth.credentials.ts` - Credential management
- `src/commands/onboard-auth.config-core.ts` - Configuration helpers
- `src/commands/onboard-auth.ts` - Exported auth functions
- `src/commands/onboard-types.ts` - Type definitions
- `src/cli/program/register.onboard.ts` - CLI flag support
- `src/commands/auth-choice.apply.api-providers.ts` - Interactive auth handler
- `src/commands/onboard-non-interactive/local/auth-choice.ts` - Non-interactive auth handler
- `src/commands/auth-choice-options.ts` - Menu options and display
- `docs/providers/cerebras.md` - Provider documentation
- `docs/providers/index.md` - Provider index
- `docs/concepts/model-providers.md` - Model provider overview

## Testing
- [x] Build passes (`pnpm build`)
- [x] Lint passes (`pnpm lint`)
- [x] Tests pass (`pnpm test`)
- [x] Cerebras appears in interactive onboarding menu
- [x] CLI flag `--cerebras-api-key` works
- [x] Live API test with `CEREBRAS_API_KEY`

From the interactive onboarding form we can select cerebras as a model provider and use this awesome tool.

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

Adds a new Cerebras model provider using an OpenAI-compatible API, including a model catalog, default model selection, and onboarding support (interactive and non-interactive) for storing a Cerebras API key and applying provider defaults.

This integrates with the existing provider-resolution flow (`resolveImplicitProviders`), onboarding config helpers (`apply*Config`), and the auth-choice selection system used by both interactive prompts and CLI flags.

<h3>Confidence Score: 2/5</h3>

- This PR is not safe to merge as-is due to onboarding regressions that can break auth selection and non-interactive configuration.
- Cerebras provider additions are straightforward, but `buildAuthChoiceOptions` appears to no longer populate choices (breaking interactive onboarding), and the new `--cerebras-api-key` flag is not wired through to `onboard()` so non-interactive onboarding won’t pick it up. There is also a breaking change removing `gateway-auth off` that may invalidate existing configs/scripts if not fully handled elsewhere.
- src/commands/auth-choice-options.ts, src/cli/program/register.onboard.ts, src/commands/onboard-types.ts

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

**Context used:**

- Context from `dashboard` - CLAUDE.md ([source](https://app.greptile.com/review/custom-context?memory=fd949e91-5c3a-4ab5-90a1-cbe184fd6ce8))
- Context from `dashboard` - AGENTS.md ([source](https://app.greptile.com/review/custom-context?memory=0d0c8278-ef8e-4d6c-ab21-f5527e322f13))

<!-- /greptile_comment -->

## Reviews

### @shivaylamba — COMMENTED (2026-01-27)

Looks good

### @greptile-apps — COMMENTED (2026-02-03)

<sub>3 files reviewed, 3 comments</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments

### @kkkamur07 (2026-01-27)

> Looks good

Hi shivam ! Thanks what are the next steps ? 

### @greptile-apps (2026-02-03)

<details>
<summary>Additional Comments (3)</summary>

**`src/cli/program/register.onboard.ts`**
[P0] `--cerebras-api-key` is declared but never passed into `onboard()`.

In `registerOnboardCommand`, you add `.option("--cerebras-api-key <key>")`, and `OnboardOptions` includes `cerebrasApiKey`, but the call to `onboard({ ... })` does not include `cerebrasApiKey`. As a result, non-interactive onboarding (`--auth-choice cerebras-api-key --cerebras-api-key ...`) won’t work as intended.

Also appears to be the same issue for `--opencode-zen-api-key` (option declared, but not passed into `onboard()`). Was the omission of `cerebrasApiKey`/`opencodeZenApiKey` in the `onboard({...})` call intentional, or should they be wired through like the other `*ApiKey` flags?

<details><summary>Prompt To Fix With AI</summary>

`````markdown
This is a comment left during a code review.
Path: src/cli/program/register.onboard.ts
Line: 70:74

Comment:
[P0] `--cerebras-api-key` is declared but never passed into `onboard()`.

In `registerOnboardCommand`, you add `.option("--cerebras-api-key <key>")`, and `OnboardOptions` includes `cerebrasApiKey`, but the call to `onboard({ ... })` does not include `cerebrasApiKey`. As a result, non-interactive onboarding (`--auth-choice cerebras-api-key --cerebras-api-key ...`) won’t work as intended.

Also appears to be the same issue for `--opencode-zen-api-key` (option declared, but not passed into `onboard()`). Was the omission of `cerebrasApiKey`/`opencodeZenApiKey` in the `onboard({...})` call intentional, or should they be wired through like the other `*ApiKey` flags?

How can I resolve this? If you propose a fix, please make it concise.
`````
</details>

---

**`src/commands/auth-choice-options.ts`**
[P0] `buildAuthChoiceOptions` no longer populates any options.

`buildAuthChoiceOptions` now starts with `void params.store;` and returns an empty `options` array (aside from whatever may be appended later, but the previous logic that pushed all choices was removed). This likely breaks interactive onboarding menus that depend on this function to list auth choices.

If the intent was only to remove the deprecated `claude-cli` / `codex-cli` options, the rest of the option-building should remain.

<details><summary>Prompt To Fix With AI</summary>

`````markdown
This is a comment left during a code review.
Path: src/commands/auth-choice-options.ts
Line: 121:124

Comment:
[P0] `buildAuthChoiceOptions` no longer populates any options.

`buildAuthChoiceOptions` now starts with `void params.store;` and returns an empty `options` array (aside from whatever may be appended later, but the previous logic that pushed all choices was removed). This likely breaks interactive onboarding menus that depend on this function to list auth choices.

If the intent was only to remove the deprecated `claude-cli` / `codex-cli` options, the rest of the option-building should remain.

How can I resolve this? If you propose a fix, please make it concise.
`````
</details>

---

**`src/commands/onboard-types.ts`**
[P1] Removing `GatewayAuthChoice = "off" | ...` is a breaking behavior change.

This PR changes `GatewayAuthChoice` from `"off" | "token" | "password"` to `"token" | "password"`, and the CLI help text also removes `off`. Unless gateway auth-off is being fully deprecated everywhere (schema defaults, config migrations, docs, runtime behavior), this will break existing configs and scripts that pass `--gateway-auth off` or have `gateway.auth: off`.

If deprecation is intended, consider keeping `off` for now and warning, or ensure config parsing/migrations handle old values.

<details><summary>Prompt To Fix With AI</summary>

`````markdown
This is a comment left during a code review.
Path: src/commands/onboard-types.ts
Line: 30:33

Comment:
[P1] Removing `GatewayAuthChoice = "off" | ...` is a breaking behavior change.

This PR changes `GatewayAuthChoice` from `"off" | "token" | "password"` to `"token" | "password"`, and the CLI help text also removes `off`. Unless gateway auth-off is being fully deprecated everywhere (schema defaults, config migrations, docs, runtime behavior), this will break existing configs and scripts that pass `--gateway-auth off` or have `gateway.auth: off`.

If deprecation is intended, consider keeping `off` for now and warning, or ensure config parsing/migrations handle old values.

How can I resolve this? If you propose a fix, please make it concise.
`````
</details>
</details>


## Stats

- **Size:** large (346+, 4-, 13 files)
- **Age:** 7 days
- **Last activity:** 2026-02-03

## Links

- Fixes: (none detected)
