---
number: 3583
title: "feat(telegram): forum topics + pinned message context"
author: tylerdiaz
created: 2026-01-28T21:36:56Z
updated: 2026-01-28T22:48:53Z
labels: ["channel: telegram", "agents"]
additions: 400
deletions: 0
changed_files: 8
size: large
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: true
draft: false
url: https://github.com/moltbot/moltbot/pull/3583
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary

Adds forum topic management and pinned message context injection for Telegram.

## Features

### 1. Create Forum Topics (`thread-create`)
```js
message({ action: 'thread-create', channel: 'telegram', target: '<chatId>', threadName: 'Topic Name' })
```

### 2. Edit Forum Topics (`thread-edit`)
```js
message({ action: 'thread-edit', channel: 'telegram', target: '<chatId>', threadId: 123, threadName: 'New Name' })
```

### 3. Pinned Message Context Injection
Automatically fetches pinned messages from Telegram groups/topics and injects them into agent context. Pinned content persists even after conversation history compacts.

**Format in context:**
```
[ðŸ“Œ Pinned by Tyler (pinned 1/28/2026)]
Project goals: Ship v2 by Feb 15...
[/Pinned]
```

## Config

```yaml
channels:
  telegram:
    actions:
      createForumTopic: true
      editForumTopic: true
```

(Pinned context is enabled by default for groups)

## Files Changed

- `src/telegram/send.ts` â€” createForumTopicTelegram(), editForumTopicTelegram()
- `src/telegram/pinned-context.ts` â€” NEW: fetch/cache/format pinned messages
- `src/telegram/bot-message-context.ts` â€” inject pinned context
- `src/agents/tools/telegram-actions.ts` â€” action handlers
- `src/channels/plugins/actions/telegram.ts` â€” register actions
- `src/config/types.telegram.ts` â€” config types
- `src/channels/plugins/message-action-names.ts` â€” add thread-edit
- `src/infra/outbound/message-action-spec.ts` â€” add thread-edit target mode

## Testing

Tested locally:
- âœ… Created forum topics via API
- âœ… Renamed topics via API  
- âœ… Pinned message appears in agent context
- âœ… 5-minute cache prevents API spam

## Reviews


## Comments


## Stats

- **Size:** large (400+, 0-, 8 files)
- **Age:** 0 days
- **Last activity:** 2026-01-28

## Links

- Fixes: (none detected)
