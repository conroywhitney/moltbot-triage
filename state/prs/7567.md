---
number: 7567
title: "fix: remove false positive context overflow detection"
author: kaigritun
created: 2026-02-03T00:25:18Z
updated: 2026-02-03T00:26:04Z
labels: ["agents"]
additions: 3
deletions: 6
changed_files: 1
size: tiny
review_decision: none
reviews: []
comments_count: 0
reactions_total: 1
ci_status: passing
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/7567
fixes_issues: [7483]
related_prs: [7483]
duplicate_of: null
---

## Description

Remove isContextOverflowError check from sanitizeUserFacingText to prevent false positives when the assistant mentions phrases like "context overflow" in normal conversation.

Real context overflow errors are already handled by formatAssistantErrorText, which properly checks msg.stopReason === "error" before applying error transformations.

Fixes #7483

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR removes the `isContextOverflowError()` rewrite from `sanitizeUserFacingText()` to avoid false positives when normal assistant text mentions phrases like “context overflow”. Actual LLM error strings are still rewritten by `formatAssistantErrorText()`, which gates error-specific formatting on `msg.stopReason === "error"` (or an explicit `errorMessage`).

The change is localized to `src/agents/pi-embedded-helpers/errors.ts` and narrows the scope of “context overflow” handling to the error-formatting path rather than the general user-facing text sanitization path.

<h3>Confidence Score: 5/5</h3>

- This PR is safe to merge with minimal risk.
- The change is a small, targeted removal of an over-broad heuristic that could misclassify ordinary assistant text. Context overflow handling remains in the dedicated error formatting path, so the user-facing error UX should remain intact while reducing false positives.
- No files require special attention

<!-- greptile_other_comments_section -->

<!-- /greptile_comment -->

## Reviews


## Comments


## Stats

- **Size:** tiny (3+, 6-, 1 files)
- **Age:** 0 days
- **Last activity:** 2026-02-03

## Links

- Fixes: #7483
