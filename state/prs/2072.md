---
number: 2072
title: "feat(slack): add channel-info and mark-read actions for unread tracking"
author: claude-chapter
created: 2026-01-26T04:34:53Z
updated: 2026-01-28T23:25:12Z
labels: ["channel: slack"]
additions: 100
deletions: 0
changed_files: 5
size: medium
review_decision: none
reviews: []
comments_count: 0
reactions_total: 1
ci_status: passing
mergeable: unknown
draft: false
url: https://github.com/moltbot/moltbot/pull/2072
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary

Adds two new Slack actions to support unread message tracking:

- **`channel-info`**: Returns channel metadata including `lastRead` timestamp, `unreadCount`, and `unreadCountDisplay`. Enables bots to know what messages they haven't processed yet.

- **`mark-read`**: Updates the bot's read cursor for a channel to a specific timestamp. Allows bots to mark messages as processed.

## Use Case

AI assistants that need to catch up on missed messages after context compaction or session restart. By tracking the read position, they can fetch only new messages and avoid reprocessing.

### Example Workflow

1. Call `channel-info` to get `lastRead` timestamp
2. Call `read` with `after=lastRead` to get unread messages
3. Process messages
4. Call `mark-read` with the latest message timestamp

## Changes

- `src/slack/actions.ts`: Added `getSlackChannelInfo` and `markSlackChannelRead` functions
- `src/agents/tools/slack-actions.ts`: Added handlers for `channelInfo` and `markRead` actions
- `src/channels/plugins/slack.actions.ts`: Wired up `channel-info` and `mark-read` to the Slack plugin
- `src/channels/plugins/message-action-names.ts`: Added `mark-read` to action names
- `src/infra/outbound/message-action-spec.ts`: Added target mode for `mark-read`

## Configuration

Both actions are gated by the `channelInfo` action flag (default: enabled).

```yaml
channels:
  slack:
    actions:
      channelInfo: true  # enables both channel-info and mark-read
```

## Testing

- [x] Type-checked (builds without errors related to these changes)
- [ ] Runtime tested

---

ðŸ¤– **AI-assisted**: Built with Claude (Opus 4.5) via Clawdbot

## Reviews


## Comments


## Stats

- **Size:** medium (100+, 0-, 5 files)
- **Age:** 3 days
- **Last activity:** 2026-01-28

## Links

- Fixes: (none detected)
