---
number: 7566
title: "fix: eliminate punycode deprecation warning"
author: kaigritun
created: 2026-02-03T00:24:16Z
updated: 2026-02-03T00:25:25Z
labels: []
additions: 2
deletions: 1
changed_files: 1
size: tiny
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 1
reactions_total: 1
ci_status: passing
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/7566
fixes_issues: [7551]
related_prs: [7551]
duplicate_of: null
---

## Description

Add pnpm override for whatwg-url@^14.0.0 to force use of userland punycode.js instead of the deprecated Node.js built-in punycode module.

This eliminates the DEP0040 deprecation warning that appears on every OpenClaw command execution.

The override is safe because:
- OpenClaw requires Node.js ≥22.12.0, and whatwg-url@14.0.0 requires Node.js ≥20
- API compatibility is maintained (only internal record structure changed)
- The userland punycode.js is functionally identical to the deprecated module

Fixes #7551

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR adds a `pnpm.overrides` entry to force `whatwg-url` to resolve to `^14.0.0`, with the intent of avoiding Node’s built-in `punycode` deprecation warning (DEP0040) by pulling in a version that uses the userland `punycode.js` implementation. The change is localized to the root `package.json` and fits with the existing pattern of pinning/overriding transitive dependencies under the `pnpm` configuration block.

<h3>Confidence Score: 4/5</h3>

- This PR is low-risk and likely safe to merge; the main concern is dependency resolution determinism due to a ranged override.
- The change is a single pnpm override with no runtime code changes. The only meaningful risk is that using a caret range in an override can unintentionally pull in future 14.x versions with different behavior, which defeats the purpose of a controlled deprecation-warning fix.
- package.json (pnpm.overrides entry for whatwg-url)

<!-- greptile_other_comments_section -->

<sub>(5/5) You can turn off certain types of comments like style [here](https://app.greptile.com/review/github)!</sub>

<!-- /greptile_comment -->

## Reviews

### @greptile-apps — COMMENTED (2026-02-03)

<sub>1 file reviewed, 1 comment</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments

### @greptile-apps (2026-02-03)

<details>
<summary>Additional Comments (1)</summary>

**`package.json`**
[P1] Avoid using a range in `pnpm.overrides` for determinism

Using `"whatwg-url": "^14.0.0"` in `pnpm.overrides` makes installs non-reproducible across time/machines (it can float to newer 14.x). Since overrides are typically used to *pin* transitive deps to a known-good version, it’d be safer to lock to an exact version (e.g. `14.0.0` or whatever specific version you validated eliminates DEP0040).

<details><summary>Prompt To Fix With AI</summary>

`````markdown
This is a comment left during a code review.
Path: package.json
Line: 239:251

Comment:
[P1] Avoid using a range in `pnpm.overrides` for determinism

Using `"whatwg-url": "^14.0.0"` in `pnpm.overrides` makes installs non-reproducible across time/machines (it can float to newer 14.x). Since overrides are typically used to *pin* transitive deps to a known-good version, it’d be safer to lock to an exact version (e.g. `14.0.0` or whatever specific version you validated eliminates DEP0040).

How can I resolve this? If you propose a fix, please make it concise.
`````
</details>
</details>


## Stats

- **Size:** tiny (2+, 1-, 1 files)
- **Age:** 0 days
- **Last activity:** 2026-02-03

## Links

- Fixes: #7551
