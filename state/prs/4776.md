---
number: 4776
title: "Fix #4617: Telegram channel auto-reconnect on getUpdates timeout"
author: spiceoogway
created: 2026-01-30T17:15:51Z
updated: 2026-01-30T17:16:03Z
labels: ["docs", "channel: telegram", "channel: whatsapp-web", "commands", "agents"]
additions: 5407
deletions: 94
changed_files: 39
size: huge
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/4776
fixes_issues: [4617]
related_prs: [4617]
duplicate_of: null
---

## Description

## Summary
Fixes #4617 - Telegram channel now automatically reconnects on getUpdates timeout errors instead of exiting permanently.

## Problem
The Telegram channel was exiting permanently when getUpdates timed out ("Request to 'getUpdates' timed out after 30 seconds"), requiring manual gateway restart. This occurred roughly once per hour in production.

## Solution
Added explicit timeout error detection with `isTelegramTimeout()` function that checks for "timed out" pattern in error messages. This ensures these transient errors are caught and retried with exponential backoff, matching the behavior expected for network failures.

## Changes
- **monitor.ts**: Added `isTelegramTimeout()` function to explicitly detect timeout errors
- **monitor.ts**: Updated retry logic to check timeout errors separately
- **monitor.ts**: Improved error logging to distinguish timeout from generic network errors
- **monitor.test.ts**: Added test case for getUpdates timeout scenario

## Testing
- [x] Added unit test: "retries on getUpdates timeout errors"
- [x] Verified test passes locally
- [x] Existing retry tests still pass

## Expected Behavior After Fix
When getUpdates times out:
1. Error is caught by retry logic
2. Log message: "Telegram timeout: Request to 'getUpdates' timed out after 30 seconds; retrying in Xms."
3. Channel waits with exponential backoff (2s → 3.6s → 6.5s → ... up to 30s)
4. Channel retries automatically, no manual restart needed

## Related
- Similar to WhatsApp channel retry behavior
- Uses existing backoff policy: `TELEGRAM_POLL_RESTART_POLICY`

## Reviews


## Comments


## Stats

- **Size:** huge (5407+, 94-, 39 files)
- **Age:** 0 days
- **Last activity:** 2026-01-30

## Links

- Fixes: #4617
