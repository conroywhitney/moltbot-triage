---
number: 3182
title: "fix(gateway): use canonical session key in chat.send"
author: chrisherold
created: 2026-01-28T06:51:41Z
updated: 2026-01-28T23:25:10Z
labels: ["app: web-ui", "gateway"]
additions: 2
deletions: 2
changed_files: 1
size: tiny
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/3182
fixes_issues: [2493]
related_prs: [2493]
duplicate_of: null
---

## Description

Fixes session key mismatch where `chat.send` used raw key (e.g. `"main"`) but `chat.history` used canonical key (e.g. `"agent:main:main"`), causing messages to be written to one session but read from another.

This affected:
- iOS app chat (messages not appearing in history)
- TUI chat output (no assistant responses shown)

The fix uses `canonicalKey` from `loadSessionEntry()` instead of the raw `p.sessionKey` when building the `MsgContext`.

Fixes #2493

## Reviews


## Comments


## Stats

- **Size:** tiny (2+, 2-, 1 files)
- **Age:** 2 days
- **Last activity:** 2026-01-28

## Links

- Fixes: #2493
