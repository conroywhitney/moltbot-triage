---
number: 5068
title: "fix(mattermost): pass requireMentionOverride to core resolver"
author: manchmod
created: 2026-01-31T01:15:23Z
updated: 2026-02-03T02:23:07Z
labels: ["channel: mattermost"]
additions: 1
deletions: 0
changed_files: 1
size: tiny
review_decision: none
reviews: []
comments_count: 0
reactions_total: 1
ci_status: failing
mergeable: false
draft: false
url: https://github.com/openclaw/openclaw/pull/5068
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Problem

Setting `chatmode: "onmessage"` or `requireMention: false` in the Mattermost channel config had no effect — the bot still required @mentions to respond in channels.

## Root Cause

In `monitor.ts`, the call to `core.channel.groups.resolveRequireMention()` doesn't pass `requireMentionOverride`. The `account.requireMention` value (which correctly resolves `chatmode: "onmessage"` → `false`) was never passed to the core function.

Other plugins (Telegram, iMessage) already pass this parameter correctly.

## Fix

Add `requireMentionOverride: account.requireMention` to the `resolveRequireMention()` call.

## Testing

- Applied patch locally
- Tested with `chatmode: "onmessage"` config
- Bot now responds in channels without @mention ✅

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR fixes Mattermost mention-gating by passing the per-account `requireMention` override into the shared core `resolveRequireMention()` resolver. Without this, Mattermost channel configs like `chatmode: "onmessage"` / `requireMention: false` were ignored and the bot still required @mentions in channels. The change aligns Mattermost with other channel implementations that already pass the override, and keeps the rest of the inbound filtering/dispatch logic unchanged.

<h3>Confidence Score: 5/5</h3>

- This PR is safe to merge with minimal risk.
- Single-line change passing an existing config-derived boolean into an existing resolver; it matches established patterns in other channels and only affects mention-gating behavior for Mattermost group/channel messages.
- extensions/mattermost/src/mattermost/monitor.ts

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

**Context used:**

- Context from `dashboard` - CLAUDE.md ([source](https://app.greptile.com/review/custom-context?memory=fd949e91-5c3a-4ab5-90a1-cbe184fd6ce8))
- Context from `dashboard` - AGENTS.md ([source](https://app.greptile.com/review/custom-context?memory=0d0c8278-ef8e-4d6c-ab21-f5527e322f13))

<!-- /greptile_comment -->

## Reviews


## Comments


## Stats

- **Size:** tiny (1+, 0-, 1 files)
- **Age:** 2 days
- **Last activity:** 2026-02-03

## Links

- Fixes: (none detected)
