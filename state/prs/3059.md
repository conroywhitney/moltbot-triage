---
number: 3059
title: "feat(telegram): add forum topic management actions"
author: hotfingerdip
created: 2026-01-28T01:19:21Z
updated: 2026-01-28T23:25:10Z
labels: ["channel: telegram", "agents"]
additions: 725
deletions: 0
changed_files: 8
size: large
review_decision: none
reviews: []
comments_count: 0
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/3059
fixes_issues: [3056]
related_prs: [3056]
duplicate_of: null
---

## Description

## Summary

Add support for creating, editing, closing, reopening, and deleting Telegram forum topics via the message tool.

Closes #3056

## New Actions

| Action | Description | Required Params |
|--------|-------------|-----------------|
| `topic-create` | Create a forum topic | `target` (chat ID), `name` (1-128 chars) |
| `topic-edit` | Edit topic name/icon | `target` (chat ID), `messageThreadId` |
| `topic-close` | Close an open topic | `target` (chat ID), `messageThreadId` |
| `topic-reopen` | Reopen a closed topic | `target` (chat ID), `messageThreadId` |
| `topic-delete` | Delete topic + messages | `target` (chat ID), `messageThreadId` |

### Optional Parameters
- `iconColor`: RGB color for topic icon (topic-create only). Must be one of the Telegram-allowed values.
- `iconCustomEmojiId`: Custom emoji ID for topic icon (topic-create, topic-edit)

## Configuration

Actions are gated behind `channels.telegram.actions.forumTopics` (defaults to `false`):

```yaml
channels:
  telegram:
    actions:
      forumTopics: true
```

The bot needs `can_manage_topics` admin rights in the supergroup.

## Usage Example

```
# Create a topic
message action=topic-create target=-1001234567890 name="My Topic"
# Returns: { ok: true, messageThreadId: 123, name: "My Topic", iconColor: 7322096 }

# Edit a topic
message action=topic-edit target=-1001234567890 messageThreadId=123 name="Renamed"

# Close / reopen / delete
message action=topic-close target=-1001234567890 messageThreadId=123
message action=topic-reopen target=-1001234567890 messageThreadId=123
message action=topic-delete target=-1001234567890 messageThreadId=123
```

## Implementation

- **message-action-names.ts**: Added 5 new action names
- **message-action-spec.ts**: Added target modes (`to`) for all 5 actions
- **telegram/send.ts**: Added 5 new API wrapper functions following the existing pattern (account resolution, retry, error logging, etc.)
- **telegram-actions.ts**: Added action handlers with forumTopics gate check
- **channels/plugins/actions/telegram.ts**: Wired actions through the channel plugin adapter with param mapping
- **config/types.telegram.ts**: Added `forumTopics` to `TelegramActionConfig`
- **message-tool.ts**: Added schema properties for `iconColor`, `iconCustomEmojiId`, `messageThreadId`

## Tests

Added 9 new tests covering:
- Forum topic actions excluded when not enabled
- Forum topic actions included when `forumTopics: true`
- All 5 action mappings (topic-create through topic-delete)
- Validation: `messageThreadId` required for topic-edit
- Validation: `name` required for topic-create

All existing tests continue to pass.

## Reviews


## Comments


## Stats

- **Size:** large (725+, 0-, 8 files)
- **Age:** 2 days
- **Last activity:** 2026-01-28

## Links

- Fixes: #3056
