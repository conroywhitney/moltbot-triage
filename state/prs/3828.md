---
number: 3828
title: "fix(providers): add \\"field required\\" to failover error patterns"
author: ai-fanatic
created: 2026-01-29T07:04:43Z
updated: 2026-01-29T07:04:54Z
labels: ["agents"]
additions: 2
deletions: 0
changed_files: 2
size: tiny
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: pending
mergeable: true
draft: false
url: https://github.com/moltbot/moltbot/pull/3828
fixes_issues: [3777]
related_prs: [3777]
duplicate_of: null
---

## Description

## Summary
- Adds `"field required"` to the `ERROR_PATTERNS.format` array in `src/agents/pi-embedded-helpers/errors.ts`
- Adds test case for the new error pattern

## Problem
When using the Google Antigravity provider, the API occasionally returns a `Field required` validation error. Currently, this error type does not trigger auth profile rotation or model failover, causing the request to fail without attempting other available profiles.

## Solution
By adding `"field required"` to the format error patterns, Clawdbot will now:
1. Mark the current auth profile in cooldown
2. Rotate to the next available auth profile
3. If all profiles are exhausted, fall back to the next model in `agents.defaults.model.fallbacks`

## Test plan
- [x] Added test case for `"Field required"` in `isCloudCodeAssistFormatError` test suite
- [ ] Manual testing with Google Antigravity provider

Fixes #3777

---

ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

## Reviews


## Comments


## Stats

- **Size:** tiny (2+, 0-, 2 files)
- **Age:** 0 days
- **Last activity:** 2026-01-29

## Links

- Fixes: #3777
