---
number: 6382
title: "fix(cli): silence Powerlevel10k Zsh warning from completion script"
author: dungngo4520
created: 2026-02-01T16:02:28Z
updated: 2026-02-01T17:05:31Z
labels: []
additions: 13
deletions: 0
changed_files: 1
size: small
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"},{"author":"copilot-pull-request-reviewer","state":"COMMENTED"}]
comments_count: 1
reactions_total: 2
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/6382
fixes_issues: []
related_prs: [6357]
duplicate_of: null
---

## Description

Fix issue #6357

Suppress stderr when using openclaw completion.

The stderr output:
```
(node:291720) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
```

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR updates the zsh installation snippet written into `~/.zshrc` to redirect stderr for the `openclaw completion --shell zsh` process substitution, suppressing Node‚Äôs `DEP0040` deprecation warning during shell startup/completion loading. The change is localized to `src/cli/completion-cli.ts` where the install command assembles the `source <(...)` line for zsh profiles.

<h3>Confidence Score: 4/5</h3>

- This PR is low-risk and likely safe to merge, with the main concern being reduced debuggability due to blanket stderr suppression.
- The change is a one-line modification to the zsh completion install command; it doesn‚Äôt affect runtime CLI behavior outside of the installed shell snippet. The primary trade-off is that redirecting all stderr may hide legitimate errors when generating completion.
- src/cli/completion-cli.ts

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

<!-- /greptile_comment -->

## Reviews

### @greptile-apps ‚Äî COMMENTED (2026-02-01)

<sub>1 file reviewed, 1 comment</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>

### @copilot-pull-request-reviewer ‚Äî COMMENTED (2026-02-01)

## Pull request overview

Suppresses Node deprecation warnings on shell startup when Zsh completion is installed, avoiding Powerlevel10k ‚Äúconsole output during zsh initialization‚Äù warnings.

**Changes:**
- Updates the Zsh completion install line to redirect completion-command stderr to `/dev/null`.





---

üí° <a href="/openclaw/openclaw/new/main/.github/instructions?filename=*.instructions.md" class="Link--inTextBlock" target="_blank" rel="noopener noreferrer">Add Copilot custom instructions</a> for smarter, more guided reviews. <a href="https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot" class="Link--inTextBlock" target="_blank" rel="noopener noreferrer">Learn how to get started</a>.


## Comments

### @dungngo4520 (2026-02-01)

So the problem is that those warnings are printed by Node's default warning handler before any imported module can install a filter. Thats why the global filter at https://github.com/openclaw/openclaw/blob/main/src/infra/warnings.ts#L25 does not work.


## Stats

- **Size:** small (13+, 0-, 1 files)
- **Age:** 1 days
- **Last activity:** 2026-02-01

## Links

- Fixes: (none detected)
