---
number: 3187
title: "feat(exec): optional systemd background runner (Linux)"
author: daxiong888
created: 2026-01-28T07:07:17Z
updated: 2026-01-28T23:25:10Z
labels: ["docs", "gateway", "agents"]
additions: 386
deletions: 0
changed_files: 10
size: large
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/moltbot/moltbot/pull/3187
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

This adds an **optional** Linux-only background runner for the `exec` tool to keep long-running tasks (tmux/codex) out of the gateway cgroup when desired.

Changes:
- New config: `tools.exec.backgroundRunner` = "process" (default) | "systemd".
- When set to "systemd" (Linux) and `exec` is started with `background=true` (or immediate background), background jobs run via `systemd-run --user --scope`.
- `process` tool can poll/log/stop systemd-backed sessions (via `systemctl --user` / `journalctl --user`).
- Docs updated.

Notes:
- Default behavior is unchanged (still uses the in-process background runner).
- If systemd is unavailable, the tool falls back to the process runner with a warning.

Tests:
- Existing unit tests run; PTY-related tests may fail in restricted environments unrelated to this change.

## Reviews


## Comments


## Stats

- **Size:** large (386+, 0-, 10 files)
- **Age:** 1 days
- **Last activity:** 2026-01-28

## Links

- Fixes: (none detected)
