---
number: 4252
title: "FIX:Issue #2590 [Security] :default gateway bind to loopback, require explicit opt-in for public exposure"
author: syedDS
created: 2026-01-29T23:42:27Z
updated: 2026-01-29T23:42:37Z
labels: ["cli", "commands", "docker"]
additions: 19
deletions: 3
changed_files: 5
size: small
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: pending
mergeable: false
draft: false
url: https://github.com/openclaw/openclaw/pull/4252
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary
- Change default gateway bind from `lan` to `loopback` in deployment templates
- Add startup warning when binding to non-loopback (even with auth)
- Enhance security doctor warnings about public exposure

Resolves: Gateway binds to public network interfaces by default

## Changes
- `docker-compose.yml`: Default `CLAWDBOT_GATEWAY_BIND` to `loopback`
- `fly.toml`: Remove explicit `--bind lan`, use default loopback
- `fly.private.toml`: Same as above
- `src/cli/gateway-cli/run.ts`: Add warning for non-loopback binding
- `src/commands/doctor-security.ts`: Enhance exposure warning

## Security Impact
- New deployments default to localhost-only binding
- Existing deployments using explicit `--bind lan` continue working
- Users get clear warning when exposing gateway publicly

## Test Plan
- [ ] `moltbot gateway` starts on 127.0.0.1 by default
- [ ] `moltbot gateway --bind lan --token secret` shows warning but starts
- [ ] `moltbot gateway --bind lan` (no auth) still fails
- [ ] `moltbot doctor security` shows enhanced warning for public exposure
- [ ] Docker Compose starts with loopback by default

Verification Steps
1.Build and test locally:
pnpm build
node dist/index.js gateway  # Should bind to 127.0.0.1
node dist/index.js gateway --bind lan  # Should fail (no auth)
node dist/index.js gateway --bind lan --token test  # Should warn then start

2.Test docker-compose:
docker-compose up moltbot-gateway  # Should bind to loopback
CLAWDBOT_GATEWAY_BIND=lan docker-compose up moltbot-gateway  # Should bind to lan

3.Run security audit:

node dist/index.js doctor security

## Reviews


## Comments


## Stats

- **Size:** small (19+, 3-, 5 files)
- **Age:** 0 days
- **Last activity:** 2026-01-29

## Links

- Fixes: (none detected)
