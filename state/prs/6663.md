---
number: 6663
title: "Web UI: handle drag-drop image attachments"
author: mar0der
created: 2026-02-01T22:54:26Z
updated: 2026-02-01T23:08:38Z
labels: ["app: web-ui"]
additions: 76
deletions: 25
changed_files: 2
size: medium
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 0
reactions_total: 2
ci_status: failing
mergeable: false
draft: false
url: https://github.com/openclaw/openclaw/pull/6663
fixes_issues: []
related_prs: [6525]
duplicate_of: null
---

## Description

What’s in this PR

Treat drag‑and‑drop images in WebChat as attachments instead of navigating away.
Reuse the same attachment pipeline as paste.
Add changelog entry for #6525.
Why
Dragging images into the chat currently triggers browser navigation (opens the image). This blocks the intended attachment workflow.

Testing

Manual: WebChat drag‑drop image shows attachment preview and can be sent.
Issue

#6525

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR updates the Web UI chat view to treat dragged-and-dropped images as chat attachments rather than allowing the browser’s default navigation behavior. It refactors the existing paste-image handling into shared helpers (`readFileAsDataUrl`, file extraction helpers, and `appendImageAttachments`), adds drop/dragover listeners on the chat container to intercept file drops, and documents the change in the changelog (#6525).

<h3>Confidence Score: 4/5</h3>

- This PR is generally safe to merge; main risk is cross-browser drag/drop behavior.
- The change is localized to the chat UI event handlers and reuses the existing attachment pipeline, so blast radius is small. The one notable concern is browser inconsistencies around `DataTransfer.types`, which could prevent `dragover.preventDefault()` and reintroduce navigation in some environments.
- ui/src/ui/views/chat.ts

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

<!-- /greptile_comment -->

## Reviews

### @greptile-apps — COMMENTED (2026-02-01)

<sub>1 file reviewed, 1 comment</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments


## Stats

- **Size:** medium (76+, 25-, 2 files)
- **Age:** 1 days
- **Last activity:** 2026-02-01

## Links

- Fixes: (none detected)
