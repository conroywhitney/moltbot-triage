---
number: 2494
title: "Fix chat.send event routing for TUI"
author: 1EchA
created: 2026-01-27T01:33:12Z
updated: 2026-01-28T23:25:12Z
labels: ["app: web-ui", "gateway"]
additions: 6
deletions: 0
changed_files: 1
size: tiny
review_decision: none
reviews: []
comments_count: 1
reactions_total: 0
ci_status: failing
mergeable: true
draft: false
url: https://github.com/moltbot/moltbot/pull/2494
fixes_issues: [2493]
related_prs: [2493]
duplicate_of: null
---

## Description

## Summary
Fixes missing chat event routing for TUI `chat.send` runs by registering the run context and adding the chat run mapping.

## Changes
- Register run context with sessionKey for `chat.send` runs.
- Add chat run mapping so `createAgentEventHandler` can emit chat events.

Fixes #2493.

## Reviews


## Comments

### @1EchA (2026-01-27)

Tested locally: with the fix in `src/gateway/server-methods/chat.ts`, TUI receives assistant output for `clawdbot tui --url ws://127.0.0.1:18789 --session main --message "hi"` (previously blank). Version 2026.1.24-3 (885167d) on macOS (Apple Silicon).


## Stats

- **Size:** tiny (6+, 0-, 1 files)
- **Age:** 2 days
- **Last activity:** 2026-01-28

## Links

- Fixes: #2493
