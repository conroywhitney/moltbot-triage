---
number: 3564
title: "fix(plugins): follow symlinks in plugin and hook discovery"
author: mollywires
created: 2026-01-28T20:46:24Z
updated: 2026-01-28T23:25:08Z
labels: []
additions: 3
deletions: 3
changed_files: 3
size: tiny
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: passing
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/3564
fixes_issues: []
related_prs: [2961]
duplicate_of: null
---

## Description

Symlinked extension and hook directories weren't being discovered. `readdir` with `withFileTypes` returns `Dirent` objects where `isDirectory()` is false for symlinks, even when the target is a directory — so they get silently skipped.

Added `isSymbolicLink()` checks in three places:
- `src/plugins/discovery.ts` — plugin/extension discovery
- `src/hooks/workspace.ts` — hook discovery
- `src/security/audit-extra.ts` — extension security audit

Other `isDirectory()` calls in `src/` either use `fs.statSync` (follows symlinks already) or operate on internal state dirs that wouldn't be symlinked. Dangling or non-directory symlinks are handled gracefully by existing null checks downstream (`readPackageManifest` returns null on any failure).

Related: #2961

- [x] AI-assisted
- [x] Tested locally with symlinked extensions

## Reviews


## Comments


## Stats

- **Size:** tiny (3+, 3-, 3 files)
- **Age:** 1 days
- **Last activity:** 2026-01-28

## Links

- Fixes: (none detected)
