---
number: 1941
title: "feat(cli): add plugins uninstall command"
author: JoshuaLelon
created: 2026-01-25T20:17:23Z
updated: 2026-01-28T23:25:13Z
labels: ["cli"]
additions: 88
deletions: 0
changed_files: 1
size: medium
review_decision: none
reviews: []
comments_count: 1
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/1941
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary

Adds `clawdbot plugins uninstall <id>` command to properly remove installed plugins.

Currently, users must manually `rm -rf ~/.clawdbot/extensions/<plugin-name>` and edit config files to uninstall plugins. This PR adds a proper uninstall command.

## Changes

- New command: `clawdbot plugins uninstall <id>`
- Automatically removes plugin install directory (npm/archive installs)
- Preserves linked paths (doesn't delete source for `--link` installs)
- Removes plugin from `plugins.installs` config record
- Removes plugin from `plugins.load.paths` (for linked plugins)
- Removes plugin from `plugins.entries` (disables the plugin)
- Optional `--keep-config` flag to preserve plugin settings while removing install

## Usage

```bash
# Uninstall a plugin completely
clawdbot plugins uninstall my-plugin

# Uninstall but keep config (for reinstall with same settings)
clawdbot plugins uninstall my-plugin --keep-config
```

## Test Plan

- ✅ Build passes (TypeScript compilation)
- ✅ Lint passes (oxlint with 0 errors)

## Related

This complements the existing `plugins install` command and addresses the gap where there was no programmatic way to uninstall plugins.

## Reviews


## Comments

### @JoshuaLelon (2026-01-26)

## Test Failure Investigation

The failing `checks-macos (test, pnpm test)` CI job is due to **pre-existing test failures** on `main`, not related to this PR.

**Failing tests:** 5 tests in `src/infra/heartbeat-runner.returns-default-unset.test.ts`
- "uses the last non-empty payload for delivery"
- "runs heartbeats in the explicit session key when configured"
- "can include reasoning payloads when enabled"
- "delivers reasoning even when the main heartbeat reply is HEARTBEAT_OK"
- "loads the default agent session from templated stores"

**Root cause:** All fail because `sendWhatsApp` mock is never called (0 times instead of 1-2 expected).

**Verification:** I tested the same file on `main` branch and confirmed the identical 5 tests fail there as well.

**Conclusion:** This PR only adds `plugins uninstall` command functionality and doesn't touch heartbeat code. The test failures exist independently on main.

**PR updated:** Rebased onto latest `main` (commit 20f6a5546).


## Stats

- **Size:** medium (88+, 0-, 1 files)
- **Age:** 4 days
- **Last activity:** 2026-01-28

## Links

- Fixes: (none detected)
