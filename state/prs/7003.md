---
number: 7003
title: "feat: add AIMLAPI provider support"
author: slavatel2025
created: 2026-02-02T08:46:24Z
updated: 2026-02-02T23:36:09Z
labels: ["docs", "cli", "commands", "agents"]
additions: 794
deletions: 6
changed_files: 28
size: large
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 0
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/7003
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description


<img width="1280" height="1230" alt="image" src="https://github.com/user-attachments/assets/5a0a73e2-98dd-485f-9bfe-39671c732678" />
<img width="1146" height="1276" alt="image" src="https://github.com/user-attachments/assets/1e9b4c2f-2135-4927-829a-de04e90a2856" />
<img width="1280" height="715" alt="image" src="https://github.com/user-attachments/assets/964acada-2e85-4b3b-8426-e4624ece0cc4" />

- Updated `live-model-filter.ts` to include "aimlapi" as a valid provider.
- Enhanced `model-auth.ts` to recognize and handle AIMLAPI API keys.
- Implemented model discovery for AIMLAPI in `model-catalog.ts`, allowing injection of AIMLAPI models from `models.json`.
- Created tests for AIMLAPI provider functionality in `models-config.providers.aimlapi.test.ts`.
- Updated various files to integrate AIMLAPI into the onboarding and authentication processes, including command options and configuration settings.
- Ensured AIMLAPI models are included in the model status command and provider preferences.

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR adds AIMLAPI as a first-class provider across auth, onboarding, and model selection: it wires `AIMLAPI_API_KEY` into env auth resolution, adds AIMLAPI to provider preference/onboarding choices, includes it in model status listing, and adds AIMLAPI model discovery plus a test suite.

Main correctness gap is in the non-interactive onboarding path for `aimlapi-api-key`, which currently resolves credentials using OpenRouter’s provider/flag. Additionally, the new AIMLAPI provider tests assume the env var name is stored rather than the env var’s value, so they will fail once executed.

<h3>Confidence Score: 3/5</h3>

- This PR is close to mergeable, but has a clear non-interactive onboarding bug and failing/ineffective tests that should be fixed first.
- Most changes are straightforward provider wiring, but the AIMLAPI non-interactive auth branch uses OpenRouter provider/flag values (breaking `--auth-choice aimlapi-api-key`), and the new tests assert incorrect `apiKey` semantics (and don’t exercise model discovery mapping in tests).
- src/commands/onboard-non-interactive/local/auth-choice.ts, src/agents/models-config.providers.aimlapi.test.ts

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

<!-- /greptile_comment -->

## Reviews

### @greptile-apps — COMMENTED (2026-02-02)

<sub>2 files reviewed, 3 comments</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments


## Stats

- **Size:** large (794+, 6-, 28 files)
- **Age:** 0 days
- **Last activity:** 2026-02-02

## Links

- Fixes: (none detected)
