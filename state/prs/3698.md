---
number: 3698
title: "feat(agents): include full date with day of week in system prompt"
author: Episkey-G
created: 2026-01-29T02:33:38Z
updated: 2026-01-29T02:33:48Z
labels: ["agents"]
additions: 13
deletions: 2
changed_files: 3
size: small
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/3698
fixes_issues: [2108]
related_prs: [2108,2154]
duplicate_of: null
---

## Description

## Summary
Fixes #2108

The system prompt now displays the full current date and time when `userTime` is available, including day of week.

## Problem
Previously, the system prompt only showed the timezone:
```
## Current Date & Time
Time zone: Europe/London
```

The agent had to infer the current date from message timestamps (which only show `YYYY-MM-DD` without day of week), leading to confident but incorrect day-of-week statements (e.g., saying "Sunday" when it's actually Monday).

## Solution
When `userTime` is provided, the system prompt now displays:
```
## Current Date & Time
Current: Monday, 26 January 2026, 06:53 GMT
Time zone: Europe/London
```

This eliminates day-of-week guessing errors entirely.

## Changes
- Modified `buildTimeSection` in [system-prompt.ts:52-60](https://github.com/moltbot/moltbot/blob/main/src/agents/system-prompt.ts#L52-L60) to accept and display `userTime` parameter
- Updated function call to pass `userTime` to `buildTimeSection`
- Updated tests to verify `userTime` appears correctly in system prompt
- Format: `Current: <full date>` followed by `Time zone: <timezone>`

## Testing
- Updated existing tests to verify the new format
- Tests confirm both 12-hour and 24-hour time formats display correctly
- Backward compatible: when `userTime` is not provided, falls back to timezone-only display

## Rebase Note
âœ… Rebased onto latest main after Moltbot rename (2026.1.27-beta.1)
âœ… Resolved CHANGELOG conflicts
âœ… Lint passed

Supersedes #2154 (closed due to merge conflicts)

ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

## Reviews


## Comments


## Stats

- **Size:** small (13+, 2-, 3 files)
- **Age:** 1 days
- **Last activity:** 2026-01-29

## Links

- Fixes: #2108
