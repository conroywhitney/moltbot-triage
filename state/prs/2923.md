---
number: 2923
title: "feat: engagement mode for natural group participation"
author: ogulcancelik
created: 2026-01-27T19:23:02Z
updated: 2026-01-28T23:25:10Z
labels: ["channel: whatsapp-web"]
additions: 909
deletions: 10
changed_files: 13
size: large
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/moltbot/moltbot/pull/2923
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

Adds an **engagement mode** for groups that lets the bot participate in conversations naturally without requiring @mentions.

## Backward compatible

This introduces `"mode": "engagement"` as a new option alongside existing `"mention"` and `"always"` modes. Existing configurations continue to work unchanged.

## How it works

The bot operates as a state machine:

```
LURKING ──(chance hit)──► ENGAGED
   ▲                          │
   └──(cooldown: time OR msgs)┘
```

- **Lurking**: Probabilistic response based on `baseChance` (+ optional `triggerBoost` for keywords)
- **Engaged**: Always responds until cooldown kicks in
- **Cooldown**: Resets to lurking after configurable silence period OR message count without response
- **Max ratio**: Suppresses response if bot is dominating (e.g., >40% of recent 10 messages)

Messages are debounced (2.5s quiet period, 10s max wait) so the agent sees full conversation bursts rather than fragmented triggers.

## Configuration

```json
{
  "whatsapp": {
    "groups": {
      "<groupId>": {
        "mode": "engagement",
        "engagement": {
          "baseChance": 0.1,
          "engagedChance": 1.0,
          "triggerWords": ["topic", "keyword"],
          "triggerBoost": 0.3,
          "cooldown": { "time": 300, "messages": 5 },
          "maxRatio": 0.4,
          "ratioWindow": 10
        }
      }
    }
  }
}
```

## Current scope

WhatsApp groups only. The core logic is channel-agnostic (`src/channels/`, `src/config/`) but integration is currently wired for WhatsApp only.

## Reviews


## Comments


## Stats

- **Size:** large (909+, 10-, 13 files)
- **Age:** 1 days
- **Last activity:** 2026-01-28

## Links

- Fixes: (none detected)
