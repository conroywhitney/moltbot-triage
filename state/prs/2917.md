---
number: 2917
title: "Slack: fix thread context + prevent reply spillover"
author: SocialNerd42069
created: 2026-01-27T19:02:10Z
updated: 2026-01-29T01:09:39Z
labels: ["channel: slack", "agents"]
additions: 149
deletions: 24
changed_files: 15
size: medium
review_decision: none
reviews: [{"author":"chatgpt-codex-connector","state":"COMMENTED"}]
comments_count: 1
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/2917
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Problem\nSlack thread replies sometimes lose context, and tool replies can post in the wrong place. Auto-threaded tool sends could also trigger a duplicate follow-up reply.\n\n## Changes\n- Recover missing Slack thread IDs when Slack omits thread_ts\n- Keep tool replies in the correct thread\n- Prevent tool replies from consuming the first-reply thread slot\n- Treat auto-threaded Slack tool sends as the same thread for suppression\n- Make tool-reply suppression thread-aware in follow-ups\n- Stop injecting Slack message IDs into prompt text\n\n## Why it helps\n- Replies stay in the right thread\n- Fewer context leaks and confusing replies\n- Cleaner prompt input for the model

## Reviews

### @chatgpt-codex-connector ‚Äî COMMENTED (2026-01-27)


### üí° Codex Review

Here are some automated review suggestions for this pull request.

**Reviewed commit:** `246216b1f8`
    

<details> <summary>‚ÑπÔ∏è About Codex in GitHub</summary>
<br/>

[Your team has set up Codex to review pull requests in this repo](http://chatgpt.com/codex/settings/general). Reviews are triggered when you
- Open a pull request for review
- Mark a draft as ready
- Comment "@codex review".

If Codex has suggestions, it will comment; otherwise it will react with üëç.




Codex can also answer questions or update the PR. Try commenting "@codex address that feedback".
            
</details>


## Comments

### @SocialNerd42069 (2026-01-29)

Addressed the review: added Slack auto-thread suppression so tool sends without explicit threadId still match the current thread when replyToMode is all/first. Also kept the existing fixes for missing thread_ts + tool reply threading. Ready for re-review.


## Stats

- **Size:** medium (149+, 24-, 15 files)
- **Age:** 2 days
- **Last activity:** 2026-01-29

## Links

- Fixes: (none detected)
