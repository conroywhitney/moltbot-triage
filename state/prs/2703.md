---
number: 2703
title: "docs(groups): clarify groupAllowFrom vs groups config"
author: RichardFellows
created: 2026-01-27T09:45:44Z
updated: 2026-02-03T03:56:57Z
labels: ["docs"]
additions: 15
deletions: 6
changed_files: 1
size: small
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 1
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/2703
fixes_issues: []
related_prs: [1952]
duplicate_of: null
---

## Description

## What

Clarifies the distinction between `groupAllowFrom` (sender allowlist) and `groups` (group allowlist) in the groups documentation.

## Why

We spent a debugging session chasing a "bug" where WhatsApp group messages silently stopped working after a restart. Turned out we'd put a group JID in `groupAllowFrom` ‚Äî which expects phone numbers/user IDs. The field name is ambiguous enough that `groupAllowFrom` reads naturally as "allow from these groups".

Filed as [#1952](https://github.com/clawdbot/clawdbot/issues/1952) before we identified the real cause.

## Changes

- **TL;DR section**: Split vague "group access" bullet into three clear ones (which groups, which senders, policy mode). Added ‚ö†Ô∏è callout.
- **Quick-reference table**: Added "(phone numbers, not group IDs)" clarification and new "anyone can trigger" row. Added "Common mistake" callout box.
- **Evaluation order**: Expanded from 3 vague steps to 4 explicit steps with descriptions.
- **Group policy notes**: Clarified `groupAllowFrom` is a sender filter with ‚ö†Ô∏è warning.

## AI-assisted ü§ñ

Written with Claude (via Clawdbot). The misconfiguration was experienced first-hand and the docs changes were verified against the actual access-control code in `src/web/inbound/access-control.ts`.

Lightly tested (docs-only change, no code changes).

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR updates `docs/concepts/groups.md` to clarify the distinction between `groups` (which group/room IDs are allowed) and `groupAllowFrom` (which senders are allowed to trigger inside groups), and expands the docs‚Äô ‚Äúquick reference‚Äù and ‚Äúevaluation order‚Äù sections accordingly.

The main thing to double-check is internal consistency with the actual enforcement path: the ‚ÄúQuick flow‚Äù diagram text doesn‚Äôt include the sender allowlist step, and some examples imply `groupAllowFrom` applies on its own, even though the WhatsApp access-control implementation only consults it when `groupPolicy: "allowlist"`. The mental model also introduces a `groups` check that may be enforced outside the shown access-control layer; adding a pointer to where that happens would prevent confusion.

<h3>Confidence Score: 4/5</h3>

- This is safe to merge; it‚Äôs a docs-only change with a few likely-to-confuse inconsistencies to tighten.
- No code paths are modified. The flagged issues are documentation accuracy/consistency problems (missing sender-allowlist step in the quick flow, examples that may imply behavior not matching current enforcement, and an evaluation-order step that may be enforced elsewhere).
- docs/concepts/groups.md

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

**Context used:**

- Context from `dashboard` - CLAUDE.md ([source](https://app.greptile.com/review/custom-context?memory=fd949e91-5c3a-4ab5-90a1-cbe184fd6ce8))
- Context from `dashboard` - AGENTS.md ([source](https://app.greptile.com/review/custom-context?memory=0d0c8278-ef8e-4d6c-ab21-f5527e322f13))

<!-- /greptile_comment -->

## Reviews

### @greptile-apps ‚Äî COMMENTED (2026-02-03)

<sub>1 file reviewed, 3 comments</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments

### @greptile-apps (2026-02-03)

<details>
<summary>Additional Comments (1)</summary>

**`docs/concepts/groups.md`**
[P1] Quick flow omits new `groupAllowFrom` sender check

The new TL;DR/quick-reference/evaluation-order sections emphasize that `groupAllowFrom` is a sender allowlist, but the ‚ÄúQuick flow‚Äù block still only checks `groupPolicy` ‚Üí group allowed ‚Üí mention gating; it never mentions the sender allowlist step. This can mislead readers into thinking `groupAllowFrom` isn‚Äôt enforced for group traffic.

Suggestion: add a `groupAllowFrom? sender allowed? no -> drop` line (or adjust wording) to match the evaluation order described below.

<details><summary>Prompt To Fix With AI</summary>

`````markdown
This is a comment left during a code review.
Path: docs/concepts/groups.md
Line: 29:35

Comment:
[P1] Quick flow omits new `groupAllowFrom` sender check

The new TL;DR/quick-reference/evaluation-order sections emphasize that `groupAllowFrom` is a sender allowlist, but the ‚ÄúQuick flow‚Äù block still only checks `groupPolicy` ‚Üí group allowed ‚Üí mention gating; it never mentions the sender allowlist step. This can mislead readers into thinking `groupAllowFrom` isn‚Äôt enforced for group traffic.

Suggestion: add a `groupAllowFrom? sender allowed? no -> drop` line (or adjust wording) to match the evaluation order described below.

How can I resolve this? If you propose a fix, please make it concise.
`````
</details>
</details>


## Stats

- **Size:** small (15+, 6-, 1 files)
- **Age:** 6 days
- **Last activity:** 2026-02-03

## Links

- Fixes: (none detected)
