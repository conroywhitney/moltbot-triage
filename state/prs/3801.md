---
number: 3801
title: "fix: exclude Python virtual environments from skill scanner"
author: openperf
created: 2026-01-29T06:04:52Z
updated: 2026-01-29T06:05:03Z
labels: ["agents"]
additions: 37
deletions: 0
changed_files: 2
size: small
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: pending
mergeable: true
draft: false
url: https://github.com/moltbot/moltbot/pull/3801
fixes_issues: [3708]
related_prs: [3708]
duplicate_of: null
---

## Description

## Problem
Fixes #3708

The gateway skill scanner opens every file in Python virtual environments 
(.venv, venv, env) without closing file handles, causing immediate FD 
exhaustion (~11,000 open FDs) and `spawn EBADF` errors on any exec calls.

## Solution
Add common Python dependency directories to `DEFAULT_SKILLS_WATCH_IGNORED`:
- `.venv`, `venv`, `env` - Python virtual environments
- `__pycache__` - Python bytecode cache
- `.pytest_cache` - pytest cache
- `.tox` - tox environments
- `.egg-info` - Python package metadata

## Testing
- Added comprehensive test cases for all Python-related directories
- All existing tests pass
- Verified regex patterns match expected paths

## Impact
- Fixes gateway crashes for users with Python skills
- Reduces file descriptor leaks
- Improves gateway stability and performance

## Reviews


## Comments


## Stats

- **Size:** small (37+, 0-, 2 files)
- **Age:** 0 days
- **Last activity:** 2026-01-29

## Links

- Fixes: #3708
