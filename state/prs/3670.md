---
number: 3670
title: "feat(tts): add speed and baseUrl config for OpenAI TTS"
author: jacorbello
created: 2026-01-29T01:15:14Z
updated: 2026-01-29T02:12:03Z
labels: []
additions: 27
deletions: 8
changed_files: 3
size: small
review_decision: none
reviews: [{"author":"orzelig","state":"APPROVED"}]
comments_count: 0
reactions_total: 0
ci_status: pending
mergeable: true
draft: false
url: https://github.com/moltbot/moltbot/pull/3670
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Motivation

When using OpenAI TTS (or OpenAI-compatible servers like Kokoro), there is no way to configure the playback speed through the config file. ElevenLabs already supports speed configuration via `voiceSettings.speed`, but OpenAI TTS was missing this feature.

Additionally, while the `OPENAI_TTS_BASE_URL` environment variable exists for custom endpoints, having a config-based option provides more flexibility for multi-environment setups.

## Summary

- Add `speed` parameter (0.25-4.0) to OpenAI TTS configuration
- Add `baseUrl` parameter for custom OpenAI-compatible TTS endpoints
- Update validation to allow any model/voice when using custom endpoints (matching existing env var behavior)

## Changes

- `src/config/types.tts.ts`: Add `speed` and `baseUrl` to OpenAI config type with documentation
- `src/config/zod-schema.core.ts`: Add validation for `speed` (0.25-4.0) and `baseUrl` (URL format)
- `src/tts/tts.ts`: Pass `speed` and `baseUrl` through to API calls, update validation functions

## Usage

```yaml
messages:
  tts:
    provider: openai
    openai:
      baseUrl: http://localhost:8880/v1  # Optional: custom endpoint
      voice: alloy
      speed: 1.15  # Optional: 0.25-4.0, default 1.0
```

## Test plan

- Ran existing TTS tests: all 33 tests pass
- Verified backward compatibility: default `speed: 1.0` preserves existing behavior
- Tested with Kokoro server using custom `baseUrl` configuration

## Reviews

### @orzelig â€” APPROVED (2026-01-29)

Clean addition of speed and baseUrl config for OpenAI TTS! Implementation follows existing patterns and maintains backward compatibility. Validation properly allows custom voices/models when using custom endpoints. LGTM!


## Comments


## Stats

- **Size:** small (27+, 8-, 3 files)
- **Age:** 0 days
- **Last activity:** 2026-01-29

## Links

- Fixes: (none detected)
