---
number: 4822
title: "fix(signal): preserve group ID case (base64 is case-sensitive)"
author: pal-assistant
created: 2026-01-30T18:22:28Z
updated: 2026-02-03T02:23:57Z
labels: []
additions: 19
deletions: 1
changed_files: 2
size: small
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 0
reactions_total: 1
ci_status: passing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/4822
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

Signal group IDs are base64 encoded and base64 is case-sensitive. Previously, normalizeSignalMessagingTarget() lowercased group IDs, causing signal-cli to fail with 'Group not found' errors.

This fix preserves the original case of group IDs while still normalizing the 'group:' prefix.

Fixes issue where sending messages/reactions to Signal groups would fail due to case-mismatch in the group identifier.

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR updates Signal target normalization to preserve case for `group:` IDs (which are base64 and therefore case-sensitive), while still normalizing prefixes like `signal:` and detecting group targets in `looksLikeSignalTargetId()`. Tests were extended to cover case preservation for group IDs and prefix-based detection.

Overall change fits the existing normalization utilities: it keeps the lowercasing behavior for non-group targets (usernames/UUIDs/phone-like values) while special-casing `group:` targets to avoid breaking Signal group resolution.

<h3>Confidence Score: 4/5</h3>

- This PR is largely safe to merge and fixes a real correctness bug for Signal group IDs.
- The core change is small and well-motivated (stop lowercasing base64 group IDs) and is covered by new unit tests. The main remaining concern is that group IDs are now returned verbatim, which can preserve stray whitespace and still cause lookup failures for inputs like `group: <id>`; worth tightening to avoid regressions.
- src/channels/plugins/normalize/signal.ts (group ID trimming/normalization behavior)

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

<!-- /greptile_comment -->

## Reviews

### @greptile-apps â€” COMMENTED (2026-02-03)

<sub>1 file reviewed, 1 comment</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments


## Stats

- **Size:** small (19+, 1-, 2 files)
- **Age:** 3 days
- **Last activity:** 2026-02-03

## Links

- Fixes: (none detected)
