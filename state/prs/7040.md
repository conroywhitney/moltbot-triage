---
number: 7040
title: "feat(cli): add hint to start gateway on browser connection error"
author: jessy2027
created: 2026-02-02T10:02:53Z
updated: 2026-02-02T10:16:18Z
labels: ["cli", "agents"]
additions: 16
deletions: 9
changed_files: 4
size: small
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 0
reactions_total: 1
ci_status: passing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/7040
fixes_issues: []
related_prs: [6903]
duplicate_of: null
---

## Description

Also fixed build errors in pi-tool-definition-adapter and embedded runner prompt handling. #6903

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR adds a CLI UX improvement by appending a “start the gateway” hint when browser management commands fail with gateway connection/timeout errors. It also includes small fixes to align function signatures and prompt/system prompt handling in the embedded runner and tool-definition adapter, addressing build/lint mismatches.

Changes are localized to the browser CLI error handler, the embedded runner’s system prompt override application, and the adapter that bridges agent tools into `ToolDefinition` shapes used by the embedded agent runtime.

<h3>Confidence Score: 4/5</h3>

- This PR is safe to merge with low risk; changes are small and localized.
- Reviewed the four modified files; changes are mostly parameter reordering and improving CLI error output. Main remaining concern is the new hint condition depending on fragile string matching, which could reduce the feature’s effectiveness but shouldn’t break functionality.
- src/cli/browser-cli-manage.ts

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

<!-- /greptile_comment -->

## Reviews

### @greptile-apps — COMMENTED (2026-02-02)

<sub>1 file reviewed, 1 comment</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments


## Stats

- **Size:** small (16+, 9-, 4 files)
- **Age:** 0 days
- **Last activity:** 2026-02-02

## Links

- Fixes: (none detected)
