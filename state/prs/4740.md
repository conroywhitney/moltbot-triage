---
number: 4740
title: "fix: Telegram channel auto-reconnect on getUpdates timeout (#4617)"
author: spiceoogway
created: 2026-01-30T15:56:58Z
updated: 2026-01-30T16:07:00Z
labels: ["channel: telegram", "app: web-ui", "gateway"]
additions: 244
deletions: 7
changed_files: 6
size: large
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/4740
fixes_issues: [4617]
related_prs: [4617]
duplicate_of: null
---

## Description

## Problem

The Telegram channel exits on getUpdates timeout without auto-reconnecting, leaving the bot unresponsive until manual restart.

## Root Cause

Two bugs in `src/telegram/monitor.ts`:
1. When `runner.task()` completes normally (after exhausting retries), it immediately returns instead of restarting with backoff
2. The error detection doesn't explicitly check for getUpdates timeout errors

## Solution

1. **Added `isGetUpdatesTimeout()`** helper function to explicitly detect timeout errors from grammY
2. **Fixed normal completion case** to restart with exponential backoff instead of exiting
3. **Enhanced error logging** to distinguish timeout vs other network errors
4. **Added test cases** for timeout recovery and normal stop scenarios

## Changes

- `src/telegram/monitor.ts`: Add timeout detection and restart logic
- `src/telegram/monitor.test.ts`: Add test coverage

## Testing

- Unit tests added for timeout recovery
- Restart logic verified to use exponential backoff
- Existing error handling tests pass

Fixes #4617

## Reviews


## Comments


## Stats

- **Size:** large (244+, 7-, 6 files)
- **Age:** 0 days
- **Last activity:** 2026-01-30

## Links

- Fixes: #4617
