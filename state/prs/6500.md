---
number: 6500
title: "feat(chrome-extension): auto-reattach debugger after page navigation"
author: globalcaos
created: 2026-02-01T18:37:41Z
updated: 2026-02-01T18:39:16Z
labels: []
additions: 127
deletions: 6
changed_files: 1
size: medium
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 0
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/6500
fixes_issues: []
related_prs: [1160,1674,1935]
duplicate_of: null
---

## Description

Chrome debugger disconnects on navigation, requiring manual reattach. This adds auto-reconnection with retry logic.

## Changes
- Add reattaching badge state with visual feedback
- Track tabs for auto-reconnect
- Debounce reattachment (500ms)
- Retry logic (3 attempts)
- Handle SPA navigation via tabs.onUpdated
- Clean up on tab removal

## Test plan
- Attach to tab, navigate → should auto-reattach
- Click to detach → should NOT auto-reattach
- Close attached tab → no errors

Relates to #1160, #1674, #1935

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR updates the Chrome extension background script to automatically reattach `chrome.debugger` after navigations. It introduces a new badge state (`reattaching`), tracks tabs eligible for auto-reattach via `autoReattachTabs`, debounces reattach attempts, and adds retry logic. It also hooks `chrome.tabs.onUpdated` to catch SPA-style navigations and `chrome.tabs.onRemoved` for cleanup, so the extension can recover from debugger detaches without requiring the user to manually click attach again.

<h3>Confidence Score: 3/5</h3>

- This PR is likely safe to merge, but there are a couple of behavioral edge cases that could cause unexpected auto-reattach loops or duplicate attaches.
- Core changes are localized to the extension background script and implement straightforward debounce/retry logic, but the current detach reason gating includes `canceled_by_user` (risking reattaching after an intentional user detach), and there are potential races between multiple reattach triggers and retries.
- assets/chrome-extension/background.js

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

<!-- /greptile_comment -->

## Reviews

### @greptile-apps — COMMENTED (2026-02-01)

<sub>1 file reviewed, 3 comments</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments


## Stats

- **Size:** medium (127+, 6-, 1 files)
- **Age:** 1 days
- **Last activity:** 2026-02-01

## Links

- Fixes: (none detected)
