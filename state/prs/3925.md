---
number: 3925
title: "feat: implement session TTL auto-cleanup (#3250)"
author: lalitraj881
created: 2026-01-29T11:04:37Z
updated: 2026-01-29T13:02:23Z
labels: ["gateway"]
additions: 390
deletions: 0
changed_files: 5
size: large
review_decision: none
reviews: []
comments_count: 1
reactions_total: 0
ci_status: pending
mergeable: true
draft: false
url: https://github.com/moltbot/moltbot/pull/3925
fixes_issues: [3250]
related_prs: [3250]
duplicate_of: null
---

## Description

## Summary
Implements automatic session TTL cleanup to prevent memory leaks from accumulating idle webhook sessions.
## Changes
- âœ… Added `SessionTTLManager` with configurable idle timeout (default 1h) and max age (default 24h)
- âœ… Integrated cleanup into gateway server lifecycle
- âœ… Added helper functions for session store management
- âœ… Comprehensive test coverage in `session-ttl-cleanup.test.ts`
## Testing
All tests pass. See test file for verification of:
- Idle session cleanup
- Max age enforcement
- Proper integration with file-based session store
Resolves #3250

<img width="1610" height="409" alt="Passed Test" src="https://github.com/user-attachments/assets/81bc406d-cbd0-44a0-a570-066ed36b2b2b" />


## Reviews


## Comments

### @lalitraj881 (2026-01-29)

Hi maintainers! ðŸ‘‹

The Windows CI check (ci / checks-windows (node, test, pnpm canvasbundle && pnpm test)) failed with a self-hosted runner connectivity error:

The self-hosted runner lost communication with the server. Verify the machine is running and has a healthy network connection. Anything in your workflow that terminates the runner process, starves it for CPU/Memory, or blocks its network access can cause this error.

This appears to be an infrastructure issue rather than a code problem, as the other checks are passing/queued successfully. Could someone please re-run this check or advise if it can be skipped?

Thanks!


## Stats

- **Size:** large (390+, 0-, 5 files)
- **Age:** 0 days
- **Last activity:** 2026-01-29

## Links

- Fixes: #3250
