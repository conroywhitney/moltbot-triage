---
number: 2964
title: "feat(tts): add Smallest AI provider (Lightning v3.1 TTS + Pulse STT)"
author: abhishekmishragithub
created: 2026-01-27T21:27:41Z
updated: 2026-01-28T23:25:10Z
labels: ["docs", "agents"]
additions: 434
deletions: 12
changed_files: 12
size: large
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/moltbot/moltbot/pull/2964
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary

Adds [Smallest AI](https://smallest.ai) as a new TTS and STT provider for Clawdbot, enabling voice-first AI experiences across all channels.

## Features

### TTS (Text-to-Speech)
- **Lightning v3.1** model for fast, low-latency speech synthesis
- Support for **Waves** model (higher quality)
- **Native mulaw @ 8kHz** output for telephony (no resampling needed!)
- 30+ voice options (`lauren`, `emily`, `jasmine`, `arman`, etc.)
- Configurable: speed, consistency, similarity, enhancement, language

### STT (Speech-to-Text)
- **Pulse** model for accurate audio transcription
- Automatic language detection with optional language hint
- Raw audio bytes API for efficient processing

## Configuration

```json5
{
  messages: {
    tts: {
      auto: "always",
      provider: "smallestai",
      smallestai: {
        voiceId: "lauren",
        model: "lightning-v3.1",
        sampleRate: 24000,
        outputFormat: "mp3"
      }
    }
  }
}
```

Environment variable: `SMALLEST_API_KEY`

## Files Changed

- `src/tts/tts.ts` - TTS provider implementation
- `src/media-understanding/providers/smallestai/` - Pulse STT provider
- `src/config/types.tts.ts` - Type definitions
- `src/config/zod-schema.core.ts` - Config validation
- `src/agents/model-auth.ts` - API key resolution
- `docs/tts.md` - Documentation

## Testing

- [x] Linter passes (`pnpm lint`)
- [x] Build passes (`pnpm build`)
- [x] TTS unit tests pass (`pnpm vitest run src/tts/tts.test.ts`)
- [x] Tested voice-to-voice flow on Telegram (voice note â†’ Pulse STT â†’ Claude â†’ Smallest TTS â†’ voice reply)

## Demo

Tested full voice loop on Telegram with real voice notes. Sub-second TTS latency, accurate STT transcription.

---

ðŸ¤– AI-assisted (Claude). Fully tested locally.

## Reviews


## Comments


## Stats

- **Size:** large (434+, 12-, 12 files)
- **Age:** 1 days
- **Last activity:** 2026-01-28

## Links

- Fixes: (none detected)
