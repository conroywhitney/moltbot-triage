---
number: 3864
title: "fix(agents): suppress exec/bash exit code errors from user display"
author: HirokiKobayashi-R
created: 2026-01-29T08:10:51Z
updated: 2026-01-29T19:30:32Z
labels: ["agents"]
additions: 41
deletions: 4
changed_files: 2
size: small
review_decision: none
reviews: []
comments_count: 1
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/3864
fixes_issues: [3765]
related_prs: [3765]
duplicate_of: null
---

## Description

## Summary

- Exec/bash exit code errors are now suppressed from user display
- These errors are treated as internal/recoverable errors that the model should handle

## Problem

When using Telegram, exec tool errors like this were being sent to users:

```
‚ö†Ô∏è üõ†Ô∏è Exec: clawdbot status | grep -A5 "Runtime\|verbose\|elevated\|Think" failed: Command exited with code 1
```

Non-zero exit codes from commands like `grep` (no matches = exit 1) are normal workflow results, not failures that users need to see.

## Solution

Added `exec`/`bash` exit code errors to the `isRecoverableError` check in `buildEmbeddedRunPayloads()`. Now these errors:
- Stay in the model's context for internal handling
- Are not surfaced to users
- Allow the model to retry or continue appropriately

## Test plan

- [x] Updated existing test expectations
- [x] Added new tests for exec and bash exit code suppression
- [x] All 14 payloads tests pass
- [x] Lint/type check pass

Fixes #3765

## Reviews


## Comments

### @HirokiKobayashi-R (2026-01-29)

‚ÑπÔ∏è **Merge order note**

This PR should be merged **before** #3868 (slack multi-file attachments), as both modify `src/agents/pi-embedded-runner/run/payloads.test.ts`.


## Stats

- **Size:** small (41+, 4-, 2 files)
- **Age:** 1 days
- **Last activity:** 2026-01-29

## Links

- Fixes: #3765
