---
number: 4325
title: "fix(voice-call): verify call status with provider before loading stale calls"
author: garnetliu
created: 2026-01-30T02:44:21Z
updated: 2026-01-30T02:44:34Z
labels: ["channel: voice-call"]
additions: 202
deletions: 16
changed_files: 8
size: large
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: pending
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/4325
fixes_issues: []
related_prs: [2810]
duplicate_of: null
---

## Description

## Problem

When the gateway restarts, `loadActiveCalls()` reloads non-terminal calls from `calls.jsonl`. However, these calls may have already ended (e.g., Twilio timed them out, or webhook couldn't reach local URL) and are now stale. This causes the concurrent call limit to be reached with phantom calls.

## Solution

- Add `getCallStatus()` method to `VoiceCallProvider` interface
- Implement `getCallStatus()` for all providers (Twilio, Plivo, Telnyx, Mock)
- On load, verify each non-terminal call with the provider before adding to `activeCalls`
- Skip calls that the provider reports as terminal (completed, failed, etc.)
- Also skip calls older than `maxDurationSeconds` as a fallback

This is an improvement over PR #2810 which only uses time-based cleanup. By querying the provider, we can accurately determine if a call is still active.

## Testing

1. Initiate a call
2. Kill the gateway before the call ends (or let Twilio timeout without webhook)
3. Restart the gateway
4. Verify that stale calls are logged as skipped (provider status check)
5. Verify that new calls can be initiated

## Reviews


## Comments


## Stats

- **Size:** large (202+, 16-, 8 files)
- **Age:** 0 days
- **Last activity:** 2026-01-30

## Links

- Fixes: (none detected)
