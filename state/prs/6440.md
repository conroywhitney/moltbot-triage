---
number: 6440
title: "feat(ui): add model picker dialog with provider filtering"
author: igorls
created: 2026-02-01T17:17:23Z
updated: 2026-02-01T22:01:08Z
labels: ["docs", "app: web-ui", "gateway"]
additions: 851
deletions: 30
changed_files: 23
size: large
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"},{"author":"copilot-pull-request-reviewer","state":"COMMENTED"},{"author":"copilot-pull-request-reviewer","state":"COMMENTED"},{"author":"copilot-pull-request-reviewer","state":"COMMENTED"}]
comments_count: 0
reactions_total: 1
ci_status: passing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/6440
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

DISCLAIMER: This was built autonomously by https://x.com/LumiBytes using Opus 4.5, I've reviewed the code for any security issues.

## ‚ú® Model Picker Dialog

This PR introduces a beautiful new model picker dialog to replace the basic dropdown in the chat compose area.

### Screenshot

![Model Picker Dialog](https://raw.githubusercontent.com/igorls/openclaw/feat/model-picker-dialog/docs/images/model-picker-dialog.png)

### Features

- **üéØ Modal Dialog**: Clean, focused UI for model selection
- **üìä Provider Grouping**: Models organized by provider with emoji icons (üåÄ Google AG, üêô GitHub Copilot, etc.)
- **üíæ Context Window Display**: Shows context size for each model (e.g., "200K ctx", "1.0M ctx")
- **üß† Reasoning Badges**: Visual indicator for thinking/reasoning models
- **‚úÖ Current Model Highlight**: Checkmark shows currently selected model
- **üîí Configured Providers Only**: Backend filters to only show models from providers with auth configured

### Changes

**Backend:**
- `server-model-catalog.ts`: Filter `models.list` to only return models from providers in `auth-profiles.json`

**UI Components:**
- New `model-picker-dialog.ts` component with full styling
- New `model-picker.css` with animations and dark/light theme support
- Updated `chat.ts` to use button + dialog instead of dropdown
- Added `chevronDown` icon

**Tool Improvements:**
- Tool results now group with preceding assistant messages (better UX)
- Improved tool card inline output display

---

*My first PR as a GitHub App! üéâ*

Co-authored-by: Igor Lins e Silva <4753812+igorls@users.noreply.github.com>

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR adds a new model picker dialog UI and wires it into the chat compose area, along with backend-side filtering of `models.list` to only providers with configured auth profiles. It also changes chat rendering to better group tool results with assistant messages and improves tool card output display (inline output + duration).

Main things to double-check are the new chat event behavior (it now appends messages locally on `final`/`error`, which may conflict with the existing history-refresh flow) and the gateway model filtering behavior (an empty auth profile set currently implies an empty model catalog).

<h3>Confidence Score: 3/5</h3>

- This PR is mostly safe to merge, but has a couple of behavioral changes that may cause user-visible regressions.
- UI additions are straightforward, but (1) the chat controller now appends final/error messages directly which can duplicate or mismatch server history, and (2) backend model filtering can return an empty model list when no auth profiles exist, potentially breaking model selection flows.
- ui/src/ui/controllers/chat.ts, src/gateway/server-model-catalog.ts

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

**Context used:**

- Context from `dashboard` - CLAUDE.md ([source](https://app.greptile.com/review/custom-context?memory=fd949e91-5c3a-4ab5-90a1-cbe184fd6ce8))
- Context from `dashboard` - AGENTS.md ([source](https://app.greptile.com/review/custom-context?memory=0d0c8278-ef8e-4d6c-ab21-f5527e322f13))

<!-- /greptile_comment -->

## Reviews

### @greptile-apps ‚Äî COMMENTED (2026-02-01)

<sub>4 files reviewed, 4 comments</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>

### @copilot-pull-request-reviewer ‚Äî COMMENTED (2026-02-01)

## Pull request overview

This PR introduces a modal dialog interface for model selection, replacing a basic dropdown, and includes backend filtering to only show models from configured providers. The PR also bundles several tool card UI improvements and message handling changes.

**Changes:**
- New model picker dialog with provider grouping, context window display, and reasoning badges
- Backend filtering to only return models from providers with configured auth profiles
- Tool message grouping improvements to merge tool results into assistant message groups
- Increased thresholds for inline tool output display and preview limits

### Reviewed changes

Copilot reviewed 19 out of 20 changed files in this pull request and generated 15 comments.

<details>
<summary>Show a summary per file</summary>

| File | Description |
| ---- | ----------- |
| ui/src/ui/components/model-picker-dialog.ts | New dialog component with provider-grouped model selection UI |
| ui/src/ui/controllers/models.ts | New controller to load available models from backend |
| ui/src/ui/views/chat.ts | Added model selector button and tool message grouping logic |
| ui/src/ui/controllers/chat.ts | Added patchChatModel function and immediate message history updates |
| ui/src/ui/icons.ts | Added chevronDown icon for dropdown indicator |
| ui/src/ui/app.ts | Added modelPickerOpen state management |
| ui/src/ui/app-render.ts | Integrated model picker into chat view with handlers |
| ui/src/ui/app-gateway.ts | Added loadAvailableModels on gateway connection |
| ui/src/styles/components/model-picker.css | Complete styling for modal dialog with animations |
| ui/src/styles/chat/layout.css | Styling for model selector button |
| ui/src/styles/chat/tool-cards.css | Updated max-height and added inline output styling |
| ui/src/ui/chat/tool-cards.ts | Added duration display and switched to extractRawText for tool results |
| ui/src/ui/chat/message-normalizer.ts | Enhanced isToolResultMessage detection logic |
| ui/src/ui/chat/message-extract.ts | Added explicit filtering of tool-related content |
| ui/src/ui/chat/grouped-render.ts | Simplified tool result detection using isToolResultMessage |
| ui/src/ui/chat/constants.ts | Dramatically increased thresholds for tool output display |
| ui/src/ui/types/chat-types.ts | Added durationMs fields to message and tool card types |
| src/gateway/server-model-catalog.ts | Added provider filtering based on auth-profiles.json |
</details>



<details>
<summary>Comments suppressed due to low confidence (1)</summary>

**ui/src/ui/app-render.ts:68**
* The loadNodes function is imported twice on lines 36 and 68. This duplicate import should be removed to clean up the code.
```
import { loadNodes } from "./controllers/nodes";
import { loadChatHistory, patchChatModel } from "./controllers/chat";
import {
  applyConfig,
  loadConfig,
  runUpdate,
  saveConfig,
  updateConfigFormValue,
  removeConfigFormValue,
} from "./controllers/config";
import {
  loadCronRuns,
  toggleCronJob,
  runCronJob,
  removeCronJob,
  addCronJob,
} from "./controllers/cron";
import { loadDebug, callDebugMethod } from "./controllers/debug";
import {
  approveDevicePairing,
  loadDevices,
  rejectDevicePairing,
  revokeDeviceToken,
  rotateDeviceToken,
} from "./controllers/devices";
import {
  loadExecApprovals,
  removeExecApprovalsFormValue,
  saveExecApprovals,
  updateExecApprovalsFormValue,
} from "./controllers/exec-approvals";
import { loadLogs } from "./controllers/logs";
import { loadNodes } from "./controllers/nodes";
```
</details>



---

üí° <a href="/openclaw/openclaw/new/main/.github/instructions?filename=*.instructions.md" class="Link--inTextBlock" target="_blank" rel="noopener noreferrer">Add Copilot custom instructions</a> for smarter, more guided reviews. <a href="https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot" class="Link--inTextBlock" target="_blank" rel="noopener noreferrer">Learn how to get started</a>.

### @copilot-pull-request-reviewer ‚Äî COMMENTED (2026-02-01)

## Pull request overview

Copilot reviewed 25 out of 26 changed files in this pull request and generated 12 comments.





---

üí° <a href="/openclaw/openclaw/new/main/.github/instructions?filename=*.instructions.md" class="Link--inTextBlock" target="_blank" rel="noopener noreferrer">Add Copilot custom instructions</a> for smarter, more guided reviews. <a href="https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot" class="Link--inTextBlock" target="_blank" rel="noopener noreferrer">Learn how to get started</a>.

### @copilot-pull-request-reviewer ‚Äî COMMENTED (2026-02-01)

## Pull request overview

Copilot reviewed 26 out of 27 changed files in this pull request and generated 3 comments.





---

üí° <a href="/openclaw/openclaw/new/main/.github/instructions?filename=*.instructions.md" class="Link--inTextBlock" target="_blank" rel="noopener noreferrer">Add Copilot custom instructions</a> for smarter, more guided reviews. <a href="https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot" class="Link--inTextBlock" target="_blank" rel="noopener noreferrer">Learn how to get started</a>.


## Comments


## Stats

- **Size:** large (851+, 30-, 23 files)
- **Age:** 1 days
- **Last activity:** 2026-02-01

## Links

- Fixes: (none detected)
