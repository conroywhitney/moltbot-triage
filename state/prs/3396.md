---
number: 3396
title: "Config: gateway.unhandledRejections (warn|exit)"
author: diegoaledesma
created: 2026-01-28T15:05:11Z
updated: 2026-01-28T23:25:09Z
labels: ["cli"]
additions: 70
deletions: 5
changed_files: 7
size: medium
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: true
draft: false
url: https://github.com/moltbot/moltbot/pull/3396
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary
Add a JSON config knob to control unhandled promise rejection behavior in the Gateway/CLI.

## Motivation
Transient network errors (e.g., undici `fetch failed`) can currently terminate the gateway when they surface as unhandled promise rejections. Some operators prefer warn-only behavior to avoid missed replies and restarts.

## Changes
- Add `gateway.unhandledRejections: "warn"|"exit"` to config types + zod schema.
- Wire config into `installUnhandledRejectionHandler({ mode })` in `src/index.ts` and `src/cli/run-main.ts`.
- Extend handler to accept `mode` and skip `process.exit(1)` when `mode="warn"`.

## Default behavior
Unchanged (defaults to `"exit"`).

## Acceptance criteria
- With `gateway.unhandledRejections="warn"`, unhandled rejections are logged but do not terminate the gateway.
- With default config, behavior remains unchanged.

## Reviews


## Comments


## Stats

- **Size:** medium (70+, 5-, 7 files)
- **Age:** 0 days
- **Last activity:** 2026-01-28

## Links

- Fixes: (none detected)
