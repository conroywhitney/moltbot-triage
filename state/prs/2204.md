---
number: 2204
title: "fix: exclude Linux native builds when downloading signal-cli on macOS/Windows"
author: Duartemartins
created: 2026-01-26T12:06:04Z
updated: 2026-01-28T23:25:12Z
labels: ["channel: signal"]
additions: 16
deletions: 2
changed_files: 1
size: small
review_decision: none
reviews: [{"author":"copilot-pull-request-reviewer","state":"COMMENTED"},{"author":"Duartemartins","state":"COMMENTED"},{"author":"Duartemartins","state":"COMMENTED"}]
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/moltbot/moltbot/pull/2204
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary

- Fix signal-cli auto-install on macOS (and Windows) by excluding Linux native builds from fallback selection
- Previously, `pickAsset()` would select the first archive found when no platform-specific build existed, which could be the Linux native build
- This caused `spawn Unknown system error -8` (ENOEXEC) on macOS ARM since the Linux ELF binary cannot execute there

## Problem

On macOS ARM, running `clawdbot doctor` or setting up Signal would download `signal-cli-X.X.X-Linux-native.tar.gz` instead of the JVM version `signal-cli-X.X.X.tar.gz`. The Linux ELF binary fails to execute with error code -8 (ENOEXEC).

## Solution

Update the fallback logic in `pickAsset()` to explicitly exclude platform-specific native builds (`linux-native`, `windows`) when selecting an archive on non-matching platforms. This ensures the cross-platform JVM version is selected.

## Test plan

- [ ] Test on macOS: `clawdbot` should download `signal-cli-X.X.X.tar.gz` (JVM version)
- [ ] Test on Linux: `clawdbot` should still prefer `signal-cli-X.X.X-Linux-native.tar.gz`
- [ ] Verify signal-cli starts successfully after install on macOS

ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

## Reviews

### @copilot-pull-request-reviewer â€” COMMENTED (2026-01-26)

## Pull request overview

Fixes signal-cli auto-install asset selection on non-Linux platforms by preventing Linux native archives from being chosen as a fallback.

**Changes:**
- Update macOS fallback selection to avoid choosing `linux-native` (and Windows) native archives when a platform-specific build isnâ€™t found.
- Update Windows fallback selection to avoid choosing `linux-native` archives when a platform-specific build isnâ€™t found.





---

ðŸ’¡ <a href="/clawdbot/clawdbot/new/main/.github/instructions?filename=*.instructions.md" class="Link--inTextBlock" target="_blank" rel="noopener noreferrer">Add Copilot custom instructions</a> for smarter, more guided reviews. <a href="https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot" class="Link--inTextBlock" target="_blank" rel="noopener noreferrer">Learn how to get started</a>.

### @Duartemartins â€” COMMENTED (2026-01-26)



### @Duartemartins â€” COMMENTED (2026-01-26)




## Comments


## Stats

- **Size:** small (16+, 2-, 1 files)
- **Age:** 2 days
- **Last activity:** 2026-01-28

## Links

- Fixes: (none detected)
