---
number: 4568
title: "fix(signal,windows): preserve group ID case and fix npm spawn ENOENT"
author: ThanhNguyxn
created: 2026-01-30T10:12:34Z
updated: 2026-01-30T15:57:04Z
labels: []
additions: 29
deletions: 3
changed_files: 3
size: small
review_decision: none
reviews: [{"author":"spiceoogway","state":"COMMENTED"}]
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/4568
fixes_issues: [4537,4557]
related_prs: [4537,4557]
duplicate_of: null
---

## Description

## Summary

- **Signal group ID fix (#4537)**: Preserve case for base64 group IDs - base64 is case-sensitive, so lowercasing broke group message routing
- **Windows npm spawn fix (#4557)**: Add `shell: true` for spawn on Windows to resolve ENOENT when running npm commands

## Changes

### `src/channels/plugins/normalize/signal.ts`
- Removed `.toLowerCase()` for group IDs while keeping it for usernames/UUIDs (which are case-insensitive)

### `src/process/exec.ts`
- Added `shell: process.platform === "win32"` to spawn options to fix npm.cmd resolution on Windows

## Issues Fixed
- Fixes #4537
- Fixes #4557

## Reviews

### @spiceoogway — COMMENTED (2026-01-30)

Thanks for this fix! The `shell: true` approach is a solid solution for the Windows npm spawn issue.

One suggestion: Instead of enabling shell for ALL commands on Windows, consider only enabling it for commands that are known to be batch files:

```typescript
// Only use shell on Windows for CLI tools that are batch files
const needsShell = process.platform === "win32" && 
  ["npm", "pnpm", "yarn", "npx"].includes(argv[0]);

const child = spawn(argv[0], argv.slice(1), {
  stdio,
  cwd,
  env: resolvedEnv,
  windowsVerbatimArguments,
  shell: needsShell,
});
```

This is more conservative and has slightly better performance, but the current approach is also fine if you prefer simplicity.

Either way, this fixes the issue! ✅


## Comments


## Stats

- **Size:** small (29+, 3-, 3 files)
- **Age:** 0 days
- **Last activity:** 2026-01-30

## Links

- Fixes: #4537
- Fixes: #4557
