---
number: 3655
title: "auto-reply: adicionar notificações automáticas de conclusão de tarefas"
author: Heldinhow
created: 2026-01-29T00:29:46Z
updated: 2026-01-29T00:29:46Z
labels: []
additions: 46
deletions: 2
changed_files: 2
size: small
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: true
draft: false
url: https://github.com/moltbot/moltbot/pull/3655
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Descrição

Melhora o fluxo de execução de tarefas para que o Moltbot sempre notifique o usuário quando uma tarefa é concluída, mesmo quando o modelo não gera uma resposta final.

## Problema

Atualmente, quando o Moltbot executa uma tarefa (via ferramenta/tool) mas o modelo não gera uma resposta final (payloads vazios), o usuário não recebe confirmação de que a tarefa foi concluída. O código simplesmente retornava `undefined` quando não havia payloads.

## Solução

- **Rastreamento de ferramentas**: Adiciona rastreamento de ferramentas executadas com sucesso via eventos `tool` com fase `result`
- **Confirmação automática**: Gera uma confirmação "✅ Concluído" quando não há payloads mas há ferramentas executadas
- **Evita duplicação**: Não envia confirmação quando verbose está ligado (onToolResult já notifica via tool callbacks)
- **Respeita heartbeats**: Não envia confirmação para heartbeats (que devem ser silenciosos)

## Arquivos Modificados

- `src/auto-reply/reply/agent-runner-execution.ts` - Rastreamento de ferramentas executadas
- `src/auto-reply/reply/agent-runner.ts` - Geração de confirmação automática

## Testes

- ✅ Verificação de lint passou
- ✅ Código compila sem erros
- ✅ Lógica implementada conforme especificado no plano

## Reviews


## Comments


## Stats

- **Size:** small (46+, 2-, 2 files)
- **Age:** 0 days
- **Last activity:** 2026-01-29

## Links

- Fixes: (none detected)
