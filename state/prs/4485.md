---
number: 4485
title: "Fix npm permission error for bird skill installation in Docker"
author: spiceoogway
created: 2026-01-30T08:19:07Z
updated: 2026-01-30T13:10:51Z
labels: ["docs", "commands", "docker", "agents"]
additions: 4672
deletions: 19
changed_files: 30
size: huge
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/4485
fixes_issues: [4130]
related_prs: [4130]
duplicate_of: null
---

## Description

Fixes #4130

## Problem
When running as the non-root `node` user in Docker, npm global installs fail with EACCES errors because `/usr/local/lib/node_modules` is owned by root. This prevents the bird skill (and any npm-based skills) from installing during the setup wizard.

## Root Cause
The Dockerfile switches to the `node` user for security hardening, but npm's default global prefix (`/usr/local`) is not writable by the node user.

## Solution
Configure npm to use a user-writable directory (`/home/node/.npm-global`) for global packages:
- Set npm prefix after the `USER node` directive
- Add the new npm global bin directory to PATH

## Changes
- Modified `Dockerfile` to configure npm prefix for the node user

## Testing
Tested by building the Docker image and running the onboarding wizard with bird skill installation.

## Impact
- Fixes bird skill installation (#4130)
- Fixes all npm-based skill installations in Docker
- Follows Docker best practices for npm global installs in non-root containers
- No breaking changes

cc @openclaw/maintainers

## Reviews


## Comments


## Stats

- **Size:** huge (4672+, 19-, 30 files)
- **Age:** 0 days
- **Last activity:** 2026-01-30

## Links

- Fixes: #4130
