---
number: 3707
title: "fix: repair unpaired tool calls when loading sessions"
author: bheemreddy181
created: 2026-01-29T02:43:04Z
updated: 2026-01-29T21:14:27Z
labels: ["agents"]
additions: 263
deletions: 0
changed_files: 2
size: large
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: pending
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/3707
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

When a session is loaded with assistant tool calls that never received results (e.g., due to exec timeout, crash, or interruption), the session would become stuck and unresponsive.

This fix adds repair logic during session initialization that:
- Detects unpaired tool calls in the loaded session history
- Injects synthetic error tool results for missing results
- Marks the session as unflushed so repairs are persisted

This ensures sessions can always recover from incomplete tool executions instead of remaining permanently stuck.

Fixes group chat sessions getting stuck when exec commands time out.

## Reviews


## Comments


## Stats

- **Size:** large (263+, 0-, 2 files)
- **Age:** 1 days
- **Last activity:** 2026-01-29

## Links

- Fixes: (none detected)
