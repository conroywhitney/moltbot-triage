---
number: 2617
title: "Fix Docker build failure caused by .dockerignore (#2593)"
author: HA2345567
created: 2026-01-27T06:38:59Z
updated: 2026-02-03T03:56:51Z
labels: ["docker"]
additions: 13
deletions: 3
changed_files: 1
size: small
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 4
reactions_total: 5
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/2617
fixes_issues: []
related_prs: [2593]
duplicate_of: null
---

## Description

## Summary

This PR fixes the Docker build failure reported in #2593.

### Problem

Docker builds failed because `.dockerignore` excluded directories required during the A2UI bundling step:

- `apps/shared/ClawdbotKit/Tools/CanvasA2UI`
- `vendor/a2ui/renderers/lit`

This caused `pnpm build` to fail with missing file errors during Docker builds.

### Root Cause

The `.dockerignore` file ignored the entire `apps/` and `vendor/` directories, preventing required shared assets from being copied into the Docker build context.

### Fix

- Removed blanket ignores for `apps/` and `vendor/`.
- Ignored only platform-specific directories (`apps/android`, `apps/ios`, `apps/macos`).
- Ensured required shared build assets remain available during Docker builds.

### Result

- Docker build now succeeds.
- A2UI bundling works correctly.
- Build context remains optimized without excluding required files.

### Verification

Tested locally with:

```bash
docker build -t clawdbot-test .

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR updates `.dockerignore` to stop excluding the entire `apps/` and `vendor/` directories, while still ignoring large platform-specific app trees (`apps/android`, `apps/ios`, `apps/macos`). This unblocks `pnpm build` in Docker by ensuring shared assets (`apps/shared/...`) and the A2UI vendored sources remain in the Docker build context for the `COPY . .` step in `Dockerfile`.

Primary impact is on Docker build-context size/contents; runtime behavior is unchanged.

<h3>Confidence Score: 4/5</h3>

- This PR is generally safe to merge; it only changes Docker ignore patterns but can affect build context size if paths don’t match as intended.
- The change is localized to `.dockerignore` and addresses a concrete Docker build failure. Main residual risk is unintentionally including large platform directories if the ignore patterns don’t match certain repo layouts (e.g., symlinks or file placeholders), which would increase build context and slow builds but not typically break correctness.
- .dockerignore

<!-- greptile_other_comments_section -->

<sub>(3/5) Reply to the agent's comments like "Can you suggest a fix for this @greptileai?" or ask follow-up questions!</sub>

<!-- /greptile_comment -->

## Reviews

### @greptile-apps — COMMENTED (2026-02-03)

<sub>1 file reviewed, 1 comment</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments

### @ved-harry (2026-01-27)

experienced the same isuse, and fixed by the same change locally. 

### @s92225 (2026-01-28)

Hi sorry, I still face this problem when i am trying to install from docker (in GCP), is this changes live?

### @HA2345567 (2026-01-28)

@s92225 
The fix is in this PR but it hasn’t been merged yet, so it’s not included in Docker builds or releases. Once the CI issues are resolved and the PR is merged, it should work in Docker as well.


### @velrino (2026-01-29)

> Hi sorry, I still face this problem when i am trying to install from docker (in GCP), is this changes live?

I resolved here 

https://github.com/moltbot/moltbot/pull/4066


## Stats

- **Size:** small (13+, 3-, 1 files)
- **Age:** 6 days
- **Last activity:** 2026-02-03

## Links

- Fixes: (none detected)
