---
number: 3727
title: "fix(googlechat): space type detection for modern API"
author: gustavozirbes
created: 2026-01-29T03:25:00Z
updated: 2026-01-30T02:11:03Z
labels: ["channel: googlechat"]
additions: 108
deletions: 3
changed_files: 3
size: medium
review_decision: none
reviews: []
comments_count: 1
reactions_total: 1
ci_status: failing
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/3727
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary
- Fix space type detection to use modern `spaceType` field instead of deprecated `type`
- Add backwards-compatible fallback for legacy API responses

## Problem
Google Chat deprecated `space.type` (values: `DM`, `ROOM`) in favor of `space.spaceType` (values: `DIRECT_MESSAGE`, `GROUP_CHAT`, `SPACE`). Modern API responses may only include `spaceType`, causing the integration to misidentify space types and return bad request errors for group chats/spaces.

## References
- [Google Chat spaces REST API](https://developers.google.com/workspace/chat/api/reference/rest/v1/spaces) - documents `spaceType` enum values
- [Google Chat Event reference](https://developers.google.com/workspace/chat/api/reference/rest/v1/Event) - webhook payload structure

## AI-Assisted ðŸ¤–
- [x] AI-assisted (Claude)
- [x] Lightly tested (unit tests pass, no live Google Chat testing)
- [x] I understand what the code does

## Reviews


## Comments

### @iHildy (2026-01-30)

LGTM thanks @gustavozirbes 


## Stats

- **Size:** medium (108+, 3-, 3 files)
- **Age:** 1 days
- **Last activity:** 2026-01-30

## Links

- Fixes: (none detected)
