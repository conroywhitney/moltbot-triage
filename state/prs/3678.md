---
number: 3678
title: "TUI: fix /reasoning by supporting stream + normalization-Mark as AI-assisted-lightly tested"
author: AaronWander
created: 2026-01-29T01:38:42Z
updated: 2026-01-29T02:10:28Z
labels: []
additions: 59
deletions: 5
changed_files: 4
size: medium
review_decision: none
reviews: [{"author":"orzelig","state":"APPROVED"}]
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/3678
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

This change fixes a mismatch between the TUI /reasoning command and the project’s canonical reasoning enum.

What was wrong before

The core enum is ReasoningLevel = "off" | "on" | "stream" ([thinking.ts](https://file+.vscode-resource.vscode-cdn.net/Users/aaron/.vscode/extensions/openai.chatgpt-0.4.67-darwin-arm64/webview/#)), and the Gateway session patch logic validates the same set (on|off|stream).
The TUI, however:
Only advertised /reasoning <on|off> (help text).
Only offered on/off in autocomplete.
Passed the raw argument through to patchSession without normalization/validation.
What this fixes

Adds stream to TUI autocomplete for /reasoning.
Updates /reasoning help text to include stream.
Normalizes user input via normalizeReasoningLevel() so common inputs like streaming become stream before calling patchSession.
If you didn’t make this change, when would it fail and how

If a user tries to enable streaming reasoning in TUI (e.g. /reasoning stream or /reasoning streaming):
The TUI would either not guide them to the correct value (no autocomplete, wrong usage).
For /reasoning streaming specifically, the TUI would send reasoningLevel: "streaming" to the Gateway, which rejects it as invalid (Gateway expects exactly on|off|stream).
Result: the command fails (you’d see a “reasoning failed: …” message in the TUI), and the session would not enter reasoning:stream, so the user cannot enable streaming reasoning from TUI reliably.

## Reviews

### @orzelig — APPROVED (2026-01-29)

Good fix! The normalization of reasoning levels ensures TUI aligns with the canonical enum. Adding 'stream' to autocomplete and help text improves UX. Test coverage validates the normalization properly. LGTM!


## Comments


## Stats

- **Size:** medium (59+, 5-, 4 files)
- **Age:** 1 days
- **Last activity:** 2026-01-29

## Links

- Fixes: (none detected)
