---
number: 7077
title: "fix: default cron enabled to true when not provided"
author: akramcodez
created: 2026-02-02T10:57:36Z
updated: 2026-02-02T11:06:15Z
labels: []
additions: 32
deletions: 0
changed_files: 2
size: small
review_decision: none
reviews: []
comments_count: 1
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/7077
fixes_issues: [6988]
related_prs: [6988]
duplicate_of: null
---

## Description

### **Problem**  
Cron jobs created via API/tool without an explicit `enabled` flag are silently disabled. The scheduler treats `undefined` as disabled, causing jobs to never run with no error or warning.

### **Solution**  
Default `enabled` to `true` in `normalizeCronJobInput` when `applyDefaults` is true and `enabled` is not explicitly set as a boolean.

### **Changes**
- `src/cron/normalize.ts`: Add default `enabled: true` when not provided
- `src/cron/normalize.test.ts`: Add tests for default behavior and explicit `false` override

**Testing**
```bash
npx vitest run src/cron/normalize.test.ts
```

fixes #6988

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR changes cron job normalization so that when `applyDefaults` is enabled (used by `normalizeCronJobCreate`), a missing or non-boolean `enabled` value is defaulted to `true`. This aligns API/tool-created jobs (which may omit `enabled`) with the expected “jobs run by default” behavior, and adds Vitest coverage to ensure the default and an explicit `enabled: false` override are preserved.

The change is localized to `src/cron/normalize.ts`’s `normalizeCronJobInput` defaulting block, and tests are added in `src/cron/normalize.test.ts` under the existing `normalizeCronJobCreate` suite.

<h3>Confidence Score: 5/5</h3>

- This PR is safe to merge with minimal risk.
- The behavior change is narrowly scoped to the `applyDefaults` path in cron job normalization, matches the described bug, and is covered by targeted tests verifying both the new default and explicit `false` behavior.
- No files require special attention

<!-- greptile_other_comments_section -->

<!-- /greptile_comment -->

## Reviews


## Comments

### @akramcodez (2026-02-02)

Hi @gumadeiras @thewilloftheshadow @cpojer,

Would appreciate a review when you get a chance. This fixes an issue where cron jobs created without an explicit enabled flag were silently disabled, causing them to never run.

The change defaults enabled to true when applying defaults, while preserving explicit false, and adds test coverage for both cases.

Thanks!


## Stats

- **Size:** small (32+, 0-, 2 files)
- **Age:** 0 days
- **Last activity:** 2026-02-02

## Links

- Fixes: #6988
