---
number: 5884
title: "fix: curly lint errors and formal conformance fork permissions"
author: codearranger
created: 2026-02-01T03:12:27Z
updated: 2026-02-01T05:34:51Z
labels: ["agents"]
additions: 17
deletions: 8
changed_files: 3
size: small
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 0
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/5884
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary
- Adds curly braces to two single-line `if` statements that violate the recently enabled `curly` lint rule
  - `src/routing/resolve-route.ts:224` â€” parentPeerMatch early return
  - `src/agents/system-prompt.ts:61` â€” userTimezone guard clause
- Wraps the `formal_conformance` workflow PR comment in a try/catch so it doesn't fail on fork PRs that lack write permissions

Both lint errors are currently failing on `main`. The formal conformance failure affects all fork PRs.

## Test plan
- [ ] `pnpm lint` passes
- [ ] `pnpm test` passes (no behavior change)
- [ ] `formal_conformance` job no longer fails on fork PRs

ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR makes two small TypeScript changes to satisfy the newly enabled `curly` ESLint rule by adding braces around single-line `if` early returns in `src/routing/resolve-route.ts` and `src/agents/system-prompt.ts`.

It also updates the `formal_conformance` GitHub Actions workflow to avoid failing on fork PRs without write permissions by wrapping the `github.rest.issues.createComment` call in a `try/catch` and logging a warning when commenting is not permitted. This keeps the job informational while still surfacing drift via uploaded artifacts and the final step summary.

<h3>Confidence Score: 5/5</h3>

- This PR is safe to merge with minimal risk.
- Changes are narrowly scoped (curly-brace lint fixes and a workflow try/catch) and do not affect runtime logic beyond formatting; the workflow change only prevents non-critical permission failures on fork PRs.
- No files require special attention

<!-- greptile_other_comments_section -->

<sub>(4/5) You can add custom instructions or style guidelines for the agent [here](https://app.greptile.com/review/github)!</sub>

**Context used:**

- Context from `dashboard` - CLAUDE.md ([source](https://app.greptile.com/review/custom-context?memory=fd949e91-5c3a-4ab5-90a1-cbe184fd6ce8))
- Context from `dashboard` - AGENTS.md ([source](https://app.greptile.com/review/custom-context?memory=0d0c8278-ef8e-4d6c-ab21-f5527e322f13))

<!-- /greptile_comment -->

## Reviews

### @greptile-apps â€” COMMENTED (2026-02-01)

<sub>No files reviewed, no comments</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments


## Stats

- **Size:** small (17+, 8-, 3 files)
- **Age:** 1 days
- **Last activity:** 2026-02-01

## Links

- Fixes: (none detected)
