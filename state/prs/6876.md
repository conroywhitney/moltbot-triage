---
number: 6876
title: "feat(web-search): add SearXNG as a search provider"
author: bubbagump1092
created: 2026-02-02T04:31:07Z
updated: 2026-02-02T04:44:12Z
labels: ["docs", "agents"]
additions: 213
deletions: 11
changed_files: 3
size: large
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 1
reactions_total: 1
ci_status: passing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/6876
fixes_issues: [2317]
related_prs: [2317]
duplicate_of: null
---

## Description

## Summary

Add SearXNG as a first-class search provider option for the `web_search` tool. SearXNG is a self-hosted meta search engine that aggregates results from multiple search engines (Google, Bing, DuckDuckGo, etc.) without requiring an API key.

## Motivation

Closes #2317

Many users want a free, unlimited, self-hosted search option that does not require API keys or have rate limits. SearXNG fits this need perfectly.

## Changes

### `src/agents/tools/web-search.ts`
- Add `searxng` to `SEARCH_PROVIDERS`
- Add `SearxngConfig` type and resolution functions
- Add `runSearxngSearch()` for SearXNG API calls
- Update `runWebSearch()` to handle SearXNG provider
- Update `createWebSearchTool()` for SearXNG description and config

### `src/config/zod-schema.agent-runtime.ts`
- Add `searxng` to provider union
- Add `searxng` config object schema (baseUrl)

### `docs/tools/web.md`
- Add SearXNG to provider comparison table
- Add full setup instructions with Docker
- Add config examples

## Config Example

```json
{
  "tools": {
    "web": {
      "search": {
        "provider": "searxng",
        "searxng": {
          "baseUrl": "http://localhost:8888"
        }
      }
    }
  }
}
```

## Quick SearXNG Setup

```bash
mkdir -p ~/searxng/searxng
cat > ~/searxng/docker-compose.yml << EOF
version: "3.7"
services:
  searxng:
    image: searxng/searxng:latest
    ports:
      - "8888:8080"
    volumes:
      - ./searxng:/etc/searxng:rw
    restart: unless-stopped
EOF
cd ~/searxng && docker-compose up -d
```

## Testing

- [x] Tested locally with SearXNG Docker instance
- [x] Verified results match expected format
- [x] Confirmed caching works correctly
- [x] Verified no API key is required

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

Adds **SearXNG** as an additional `web_search` provider alongside Brave and Perplexity, including:
- runtime support in `src/agents/tools/web-search.ts` (provider selection, config/env baseUrl resolution, SearXNG `/search?format=json` calls, result mapping/wrapping, and caching)
- config validation updates in `src/config/zod-schema.agent-runtime.ts` (provider union + `searxng.baseUrl` schema)
- user docs updates in `docs/tools/web.md` (provider comparison, setup/config instructions)

Overall the change fits the existing provider pattern (Brave/Perplexity branching with shared caching and result shaping) and exposes SearXNG as a first-class configuration option.

<h3>Confidence Score: 4/5</h3>

- This PR is generally safe to merge; main risk is cache correctness when switching between SearXNG instances.
- Implementation follows existing provider structure and uses timeouts + content wrapping consistently. The primary issue is that the cache key does not incorporate SearXNG baseUrl, which can serve stale results from a different backend in multi-instance setups. Docs also include user-specific paths but that’s non-blocking.
- src/agents/tools/web-search.ts (cache key composition for SearXNG); docs/tools/web.md (generic path examples)

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

<!-- /greptile_comment -->

## Reviews

### @greptile-apps — COMMENTED (2026-02-02)

<sub>2 files reviewed, 2 comments</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments

### @greptile-apps (2026-02-02)

<details>
<summary>Additional Comments (1)</summary>

**`src/agents/tools/web-search.ts`**
[P1] SearXNG caching key ignores baseUrl (and other SearXNG-specific inputs)

`runWebSearch` builds the cache key without including `searxngBaseUrl` (and SearXNG doesn’t use `country/ui_lang/freshness`). If a user switches between multiple SearXNG instances (or changes `SEARXNG_BASE_URL`) the cached results can be served from the wrong backend for up to the TTL.

Also note `runSearxngSearch` accepts `count` but doesn’t send it to the API, so different `count` values can still produce different payloads only due to local slicing (which is OK), but it further highlights that provider-specific inputs should be reflected in the cache key.

<details><summary>Prompt To Fix With AI</summary>

`````markdown
This is a comment left during a code review.
Path: src/agents/tools/web-search.ts
Line: 440:444

Comment:
[P1] SearXNG caching key ignores baseUrl (and other SearXNG-specific inputs)

`runWebSearch` builds the cache key without including `searxngBaseUrl` (and SearXNG doesn’t use `country/ui_lang/freshness`). If a user switches between multiple SearXNG instances (or changes `SEARXNG_BASE_URL`) the cached results can be served from the wrong backend for up to the TTL.

Also note `runSearxngSearch` accepts `count` but doesn’t send it to the API, so different `count` values can still produce different payloads only due to local slicing (which is OK), but it further highlights that provider-specific inputs should be reflected in the cache key.

How can I resolve this? If you propose a fix, please make it concise.
`````
</details>
</details>


## Stats

- **Size:** large (213+, 11-, 3 files)
- **Age:** 0 days
- **Last activity:** 2026-02-02

## Links

- Fixes: #2317
