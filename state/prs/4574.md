---
number: 4574
title: "- Fix Docker arm64 image crash (`exec format error`) caused by tag race condition"
author: Abhijrathod
created: 2026-01-30T10:24:22Z
updated: 2026-01-30T11:01:05Z
labels: []
additions: 0
deletions: 8
changed_files: 1
size: tiny
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: pending
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/4574
fixes_issues: [4566]
related_prs: [4566]
duplicate_of: null
---

## Description

Fixes #4566

## Problem

Both `build-amd64` and `build-arm64` jobs were tagging their images with *all* architecture suffixes. This caused a race condition where whichever job finished last would overwrite the other's tags—so `main-arm64` ended up pointing to an amd64 image.

## Solution

Each architecture build job now only tags with its own suffix:
- `build-amd64` → `main-amd64`, `v*-amd64`
- `build-arm64` → `main-arm64`, `v*-arm64`

The `create-manifest` job continues to create the multi-arch manifest (`main`, `v*`) by combining both digests.

## Test plan

- [ ] Verify workflow runs successfully on push to main
- [ ] Confirm `main-arm64` image runs on arm64 host without exec format error
- [ ] Confirm `main-amd64` image runs on amd64 host
- [ ] Confirm `main` manifest auto-selects correct architecture

## Reviews


## Comments


## Stats

- **Size:** tiny (0+, 8-, 1 files)
- **Age:** 0 days
- **Last activity:** 2026-01-30

## Links

- Fixes: #4566
