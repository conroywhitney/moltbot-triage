---
number: 3901
title: "feat: add official DeepSeek API support"
author: openperf
created: 2026-01-29T10:01:02Z
updated: 2026-01-29T10:01:14Z
labels: ["commands", "agents"]
additions: 293
deletions: 0
changed_files: 10
size: large
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: true
draft: false
url: https://github.com/moltbot/moltbot/pull/3901
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Problem

Currently, moltbot only supports DeepSeek models through third-party providers (Synthetic, Venice). Users cannot directly use official DeepSeek API with their own API keys.

## Solution

Add official DeepSeek API provider support to moltbot, allowing users to:
- Use their own DeepSeek API keys
- Access both chat and reasoner models
- Benefit from accurate, up-to-date pricing
- Configure DeepSeek during onboarding wizard

## Changes

### Core Provider Implementation
- Add `buildDeepSeekProvider()` function in `models-config.providers.ts`
- Register provider in `resolveImplicitProviders()` for automatic discovery
- Support two models:
  - `deepseek-chat`: DeepSeek-V3.2 (non-thinking mode, 128K context, 8K max output)
  - `deepseek-reasoner`: DeepSeek-V3.2 (thinking mode, 128K context, 64K max output)
- Include accurate pricing from official DeepSeek API documentation

### Onboarding Integration
- Add DeepSeek to onboarding wizard with full configuration support
- Implement `setDeepSeekApiKey()` for credential management
- Add configuration functions `applyDeepSeekConfig()` and `applyDeepSeekProviderConfig()`
- Support both Chat and Reasoner model selection during setup

### Files Modified
1. `src/agents/models-config.providers.ts` - Provider configuration
2. `src/commands/auth-choice-options.ts` - Onboarding options
3. `src/commands/onboard-auth.credentials.ts` - API key handling
4. `src/commands/onboard-auth.models.ts` - Model definitions
5. `src/commands/onboard-auth.config-core.ts` - Configuration
6. `src/commands/onboard-auth.ts` - Exports
7. `src/commands/auth-choice.apply.api-providers.ts` - Auth handling
8. `src/commands/onboard-types.ts` - Type definitions

## Configuration

Users can configure DeepSeek API in their `models.json`:
```json
{
  "models": {
    "providers": {
      "deepseek": {
        "apiKey": "${DEEPSEEK_API_KEY}"
      }
    }
  }
}
Or set environment variable:

Bash


export DEEPSEEK_API_KEY="sk-..."



Or use the onboarding wizard:

Bash


moltbot configure
# Select "DeepSeek" when prompted
# Select "DeepSeek API key"
# Enter your API key
# Select default model (Chat or Reasoner)



Usage

Using Chat Model

Bash


export DEEPSEEK_API_KEY="sk-..."
moltbot chat --model deepseek/deepseek-chat "Hello, DeepSeek!"



Using Reasoner Model

Bash


export DEEPSEEK_API_KEY="sk-..."
moltbot chat --model deepseek/deepseek-reasoner "Solve this problem..."



Testing

•✅ TypeScript compilation passes

•✅ Code follows existing patterns (Moonshot, Synthetic, Venice)

•✅ Verified against official DeepSeek API documentation

•✅ Models configured with correct context windows and max tokens

•✅ Pricing information matches official rates (as of 2026-01-29)

•✅ Onboarding wizard integration verified

Compatibility

•Fully compatible with existing provider patterns

•No breaking changes

•Backward compatible with all existing configurations

•Consistent with Moonshot, Synthetic, and Venice implementations

References

•DeepSeek API Docs: https://api-docs.deepseek.com/

•Models & Pricing: https://api-docs.deepseek.com/quick_start/pricing

•Chat Completions: https://api-docs.deepseek.com/api/create-chat-completion


## Reviews


## Comments


## Stats

- **Size:** large (293+, 0-, 10 files)
- **Age:** 0 days
- **Last activity:** 2026-01-29

## Links

- Fixes: (none detected)
