---
number: 4656
title: "fix: Remove standard Google providers from reasoning tag enforcement (#4536)"
author: spiceoogway
created: 2026-01-30T13:37:47Z
updated: 2026-01-30T13:37:47Z
labels: []
additions: 6
deletions: 5
changed_files: 1
size: small
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: pending
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/4656
fixes_issues: [4536]
related_prs: [754,4536]
duplicate_of: null
---

## Description

## Fixes
Closes #4536 - WebChat shows empty Assistant responses despite successful API calls

## Root Cause
Standard Google providers (`google-gemini-cli`, `google-generative-ai`) were incorrectly classified as 'reasoning tag providers', which:

1. Added instructions to use `<think>` and `<final>` tags in system prompt
2. Enabled `enforceFinalTag=true` which requires ALL responses to have `<final>` tags
3. Stripped responses to empty strings when no `<final>` tag found

Gemini 2.0 doesn't natively use these tags, so all responses were stripped empty.

## Changes
- Remove `google-gemini-cli` from `isReasoningTagProvider()`
- Remove `google-generative-ai` from `isReasoningTagProvider()`
- Keep `google-antigravity` (Gemini 3.0 DOES use reasoning tags)
- Add clarifying comments about which providers natively use tags

## Testing
Tested with:
- ✅ Gemini 2.0 Flash (`google/gemini-2.0-flash`) - responses now display correctly
- ✅ Google Antigravity (Gemini 3.0) - still works correctly with tag stripping
- ✅ Ollama - no regression
- ✅ OpenAI errors - now properly displayed to users

## Impact
- ✅ Gemini 2.0 responses now display correctly
- ✅ OpenAI errors now shown to users (instead of empty responses)
- ✅ Google Antigravity (Gemini 3.0) still works correctly
- ✅ Ollama and Minimax unchanged

## Files Modified
- `src/utils/provider-utils.ts`

## Related Commits
- Original implementation: `efdf87440` (Jan 12, 2026)
- PR #754: "enforce final tag gating" (@mcinteerj)
- Commit `a7cb27099`: "buffer streaming output until <final> tag appears"

## Reviews


## Comments


## Stats

- **Size:** small (6+, 5-, 1 files)
- **Age:** 0 days
- **Last activity:** 2026-01-30

## Links

- Fixes: #4536
