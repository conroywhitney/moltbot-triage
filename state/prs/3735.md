---
number: 3735
title: "Fix: File ID Format Mismatch When Switching from Gemini to OpenAI #3702"
author: Syntax-Error-1337
created: 2026-01-29T03:29:36Z
updated: 2026-01-29T06:11:53Z
labels: ["agents"]
additions: 7
deletions: 8
changed_files: 3
size: small
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/3735
fixes_issues: [3702]
related_prs: [3702]
duplicate_of: null
---

## Description

This commit addresses an issue where file IDs (or tool call IDs) originating from Gemini sessions were causing validation errors when switching to OpenAI models. OpenAI's API is stricter with ID formats (alphanumeric only) compared to Gemini.

Changes:

- Enable 'sanitizeToolCallIds' for OpenAI in src/agents/transcript-policy.ts.

- Decouple tool call ID sanitization from the full sanitization mode check in src/agents/pi-embedded-helpers/images.ts to allow ID sanitization in 'images-only' mode.

Fixes #3702

https://github.com/moltbot/moltbot/issues/3702

## Reviews


## Comments


## Stats

- **Size:** small (7+, 8-, 3 files)
- **Age:** 1 days
- **Last activity:** 2026-01-29

## Links

- Fixes: #3702
