---
number: 3428
title: "feat(hooks): wire up message_sent plugin hook"
author: CoderMariusz
created: 2026-01-28T15:48:26Z
updated: 2026-01-28T23:25:09Z
labels: []
additions: 109
deletions: 26
changed_files: 1
size: medium
review_decision: none
reviews: [{"author":"chatgpt-codex-connector","state":"COMMENTED"}]
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/3428
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary
Fire the `message_sent` plugin hook after successful/failed message sends.

## Problem
The `message_sent` hook was defined in the plugin system but never actually called anywhere in the codebase. This prevented plugins from implementing retry logic, logging, or other post-send behaviors.

## Solution
Call `hookRunner.runMessageSent()` in `executeSendAction` for both:
- Plugin-handled sends (via `dispatchChannelMessageAction`)
- Core sends (via `sendMessage`)

## Hook Payload
```typescript
{
  to: string;        // recipient
  content: string;   // message text
  success: boolean;  // whether send succeeded
  error?: string;    // error message when success=false
}
```

## Use Cases
- Auto-retry failed message sends
- Delivery logging/analytics
- Notification on send failures
- Message delivery confirmation

## Testing
- Verified hook is called on successful sends
- Verified hook is called with error on failed sends
- Both plugin and core send paths covered

## Reviews

### @chatgpt-codex-connector ‚Äî COMMENTED (2026-01-28)


### üí° Codex Review

Here are some automated review suggestions for this pull request.

**Reviewed commit:** `ca1802015a`
    

<details> <summary>‚ÑπÔ∏è About Codex in GitHub</summary>
<br/>

[Your team has set up Codex to review pull requests in this repo](http://chatgpt.com/codex/settings/general). Reviews are triggered when you
- Open a pull request for review
- Mark a draft as ready
- Comment "@codex review".

If Codex has suggestions, it will comment; otherwise it will react with üëç.




Codex can also answer questions or update the PR. Try commenting "@codex address that feedback".
            
</details>


## Comments


## Stats

- **Size:** medium (109+, 26-, 1 files)
- **Age:** 1 days
- **Last activity:** 2026-01-28

## Links

- Fixes: (none detected)
