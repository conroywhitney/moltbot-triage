---
number: 2434
title: "fix(docker): add Bash 4+ version check for macOS compatibility"
author: aspitz
created: 2026-01-26T23:16:02Z
updated: 2026-02-03T03:56:43Z
labels: ["docker"]
additions: 11
deletions: 0
changed_files: 1
size: small
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 0
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/2434
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

### **Summary**
Updated `docker-setup.sh` to include a check for Bash 4+

### **Detail**
The `docker-setup.sh` script uses associative arrays (declare -A) which require Bash 4+. macOS ships with Bash 3.2 causing the script to fail with "declare: -A: invalid option". The new code adds both a check for macOS and Bash 4+ and provides a helpful error message directing macOS users to install Bash via Homebrew.

### **Testing**
_Lightly tested on macOS 26_
Successfully demonstrated:
- [x] With shipping version of Bash -> script stops and lets the user know that they should install the latest version of bash with homebrew
- [x] With latest version of Bash -> script continues forward with no errors.

---

**AI-assisted**: Yes (drafted with Claude, tested and verified manually)

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

Updates `docker-setup.sh` to fail fast when run under Bash < 4, preventing macOS’s default Bash 3.2 from hitting `declare -A` errors later. The script now prints a platform-specific guidance message for darwin and exits early, keeping the rest of the Docker setup logic unchanged.

<h3>Confidence Score: 4/5</h3>

- This PR is generally safe to merge; it adds an early guard with minimal behavioral impact beyond clearer failures on unsupported Bash versions.
- Change is isolated to a small, early-exit version check. Main concern is the hardcoded Homebrew Bash path on macOS, which can be incorrect on Intel machines and cause user confusion.
- docker-setup.sh

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

<!-- /greptile_comment -->

## Reviews

### @greptile-apps — COMMENTED (2026-02-03)

<sub>1 file reviewed, 1 comment</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments


## Stats

- **Size:** small (11+, 0-, 1 files)
- **Age:** 7 days
- **Last activity:** 2026-02-03

## Links

- Fixes: (none detected)
