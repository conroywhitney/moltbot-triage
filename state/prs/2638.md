---
number: 2638
title: "fix(slack): add reactionNotifications config check to reactions handler"
author: jontsai
created: 2026-01-27T07:38:10Z
updated: 2026-01-28T23:25:11Z
labels: ["channel: slack"]
additions: 20
deletions: 0
changed_files: 1
size: small
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/2638
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Problem

The Slack reactions handler (`src/slack/monitor/events/reactions.ts`) processes all reactions unconditionally, ignoring the `reactionNotifications` config setting. Even with `channels.slack.reactionNotifications: "own"` configured, reaction events are not routed to agent sessions.

## Root Cause

Unlike Telegram's implementation (`src/telegram/bot.ts:379-382`), the Slack handler doesn't check `ctx.reactionMode` before processing reactions.

**Telegram (working):**
```typescript
const reactionMode = telegramCfg.reactionNotifications ?? "own";
if (reactionMode === "off") return;
if (user?.is_bot) return;
if (reactionMode === "own" && !wasSentByBot(chatId, messageId)) return;
```

**Slack (missing checks):**
```typescript
const handleReactionEvent = async (event: SlackReactionEvent, action: string) => {
  // ... just processes everything
```

## Solution

Added `reactionNotifications` config filtering at the start of `handleReactionEvent`:

- Check `reactionMode` config (`off`/`own`/`all`/`allowlist`)
- Skip bot's own reactions (consistent with other providers)
- For `own` mode, only process reactions on messages sent by the bot
- For `allowlist` mode, only process reactions from allowlisted users

## Testing

Verified that `ctx.reactionMode`, `ctx.reactionAllowlist`, and `ctx.botUserId` are already available on the `SlackMonitorContext`.

## Reviews


## Comments


## Stats

- **Size:** small (20+, 0-, 1 files)
- **Age:** 3 days
- **Last activity:** 2026-01-28

## Links

- Fixes: (none detected)
