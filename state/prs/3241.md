---
number: 3241
title: "feat: Add Kilo Gateway provider"
author: markijbema
created: 2026-01-28T09:08:49Z
updated: 2026-01-28T23:25:09Z
labels: ["docs", "cli", "commands", "agents"]
additions: 831
deletions: 2
changed_files: 18
size: large
review_decision: none
reviews: []
comments_count: 0
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/moltbot/moltbot/pull/3241
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary

Add support for Kilo Gateway as a model provider, similar to OpenRouter. Kilo Gateway provides a unified API that routes requests to many models behind a single endpoint and API key.

## Changes

### New Files
- `docs/providers/kilocode.md` - Provider documentation
- `docs/design/kilo-gateway-integration.md` - Design document for the integration

### Modified Files
- `src/agents/model-auth.ts` - Add kilocode provider to auth handling
- `src/agents/pi-embedded-runner/cache-ttl.ts` - Add kilocode prefix handling
- `src/agents/pi-embedded-runner/extra-params.ts` - Add kilocode prefix handling
- `src/agents/transcript-policy.ts` - Update provider handling
- `src/cli/program/register.onboard.ts` - Add --kilocode-api-key CLI option
- `src/commands/auth-choice-options.ts` - Add kilocode to provider options
- `src/commands/auth-choice.apply.api-providers.ts` - Add kilocode provider application logic
- `src/commands/auth-choice.preferred-provider.ts` - Add kilocode to preferred providers
- `src/commands/onboard-auth.config-core.ts` - Add kilocode config handling
- `src/commands/onboard-auth.credentials.ts` - Add KILOCODE_API_KEY credential handling
- `src/commands/onboard-auth.models.ts` - Add kilocode model defaults
- `src/commands/onboard-auth.ts` - Add kilocode to onboarding flow
- `src/commands/onboard-non-interactive/local/auth-choice.ts` - Add kilocode non-interactive support
- `src/commands/onboard-types.ts` - Add kilocode types
- `src/config/io.ts` - Add KILOCODE_API_KEY to config
- `docs/concepts/model-providers.md` - Add Kilo Gateway section

## Configuration

```bash
# CLI setup
moltbot onboard --kilocode-api-key <key>

# Or environment variable
export KILOCODE_API_KEY="your-api-key"
```

## Model References

Model refs use the format `kilocode/<provider>/<model>` (e.g., `kilocode/anthropic/claude-opus-4.5`).

## Reviews


## Comments


## Stats

- **Size:** large (831+, 2-, 18 files)
- **Age:** 1 days
- **Last activity:** 2026-01-28

## Links

- Fixes: (none detected)
