---
number: 3721
title: "fix(ui): webchat not displaying chat responses"
author: maxmaxrouge-rgb
created: 2026-01-29T03:12:10Z
updated: 2026-01-29T04:17:37Z
labels: ["channel: telegram", "app: web-ui", "gateway"]
additions: 244
deletions: 21
changed_files: 19
size: large
review_decision: none
reviews: [{"author":"dubeyshantanu2","state":"COMMENTED"},{"author":"maxmaxrouge-rgb","state":"COMMENTED"}]
comments_count: 0
reactions_total: 0
ci_status: passing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/3721
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary
- Fix webchat Control UI not displaying assistant responses (messages were going to TUI but not appearing in webchat)
- Add final message from chat event payload directly to chatMessages instead of relying on loadChatHistory (which returns 0 messages when session transcript file doesn't exist)
- Add configurable debug logging controlled by settings/environment variables

## Changes
- **UI**: Add `debug()` utility controlled by `debugLogs` setting, localStorage, or `window.MOLTBOT_UI_DEBUG`
- **Server**: Add `debugChat()` utility controlled by `CLAWDBOT_DEBUG_CHAT` env var
- **Fix**: Handle final chat event by adding message directly to chatMessages array

## Test plan
- [ ] Send message in webchat, verify response appears
- [ ] Enable debug logging (`localStorage.setItem('moltbot-ui-debug', 'true')`) and verify logs appear in browser console
- [ ] Set `CLAWDBOT_DEBUG_CHAT=1` and verify server-side debug logs appear

ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

## Reviews

### @dubeyshantanu2 â€” COMMENTED (2026-01-29)



### @maxmaxrouge-rgb â€” COMMENTED (2026-01-29)




## Comments


## Stats

- **Size:** large (244+, 21-, 19 files)
- **Age:** 1 days
- **Last activity:** 2026-01-29

## Links

- Fixes: (none detected)
