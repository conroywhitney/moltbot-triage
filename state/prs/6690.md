---
number: 6690
title: "UX: clearer /queue and /subagents output"
author: kamb5686
created: 2026-02-01T23:26:21Z
updated: 2026-02-02T15:49:31Z
labels: ["agents"]
additions: 42
deletions: 10
changed_files: 5
size: medium
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 2
reactions_total: 1
ci_status: passing
mergeable: false
draft: false
url: https://github.com/openclaw/openclaw/pull/6690
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

Small UX-only change for chat commands:

- /queue (no args) now shows a multi-line status card including followup queue depth and whether session settings override defaults.
- /subagents list output is split into two lines per run (status/label then timing + ids) and uses uppercase status for scanability.

Testing: pnpm vitest run src/process/command-queue.test.ts src/auto-reply/reply/subagents-utils.test.ts

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR tweaks the UX for two chat commands:

- `/subagents list` output is reformatted into a header plus two lines per run (status/label, then timing + IDs) and uppercases status for scanability.
- `/queue` status output (no args) becomes a small multi-line “status card” that includes followup queue depth and whether session-level queue settings override defaults.

Changes are localized to the auto-reply command handling layer (`src/auto-reply/reply/*`) and do not alter queue/subagent mechanics themselves, only how the current state is rendered in replies.

<h3>Confidence Score: 3/5</h3>

- Generally safe to merge, but `/queue` status may show misleading values in common cases.
- The PR is mostly presentation-only, but the new `/queue` status card introduces two behavioral accuracy risks: `followup_depth` appears keyed off `sessionId` rather than the string key used by followup queues in other paths, and the new `overrides` detector can miss explicit zero values. If these assumptions are wrong, users will see incorrect status output.
- src/auto-reply/reply/directive-handling.queue-validation.ts

<!-- greptile_other_comments_section -->

<sub>(3/5) Reply to the agent's comments like "Can you suggest a fix for this @greptileai?" or ask follow-up questions!</sub>

<!-- /greptile_comment -->

## Reviews

### @greptile-apps — COMMENTED (2026-02-01)

<sub>1 file reviewed, 3 comments</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments

### @kamb5686 (2026-02-01)

Good catch — updated the PR to treat explicit 0 values as overrides (we now check !== undefined instead of Boolean(nullish-coalesce)).

Re followup_depth: in OpenClaw SessionEntry.sessionId is the session key string for the conversation (not a numeric id), which matches what getFollowupQueueDepth expects. I added a clarifying comment in code to make that explicit.

### @kamb5686 (2026-02-02)

Follow-up on the `followup_depth` keying: I changed it to use the actual `sessionKey` string (the same string used by the enqueue APIs / followup queue map), rather than `SessionEntry.sessionId` (which is a UUID).

This should address the non-Pi / mixed-session concern as well.

Latest head: `2e3f51993d73fe485db0b97297c6e4664d494d72`.


## Stats

- **Size:** medium (42+, 10-, 5 files)
- **Age:** 1 days
- **Last activity:** 2026-02-02

## Links

- Fixes: (none detected)
