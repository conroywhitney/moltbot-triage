---
number: 4467
title: "fix: DEFAULT_SANDBOX_WORKSPACE_ROOT respects STATE_DIR"
author: Aphroq
created: 2026-01-30T07:51:05Z
updated: 2026-01-30T10:12:47Z
labels: ["agents"]
additions: 3
deletions: 3
changed_files: 1
size: tiny
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: pending
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/4467
fixes_issues: [4368]
related_prs: [4368]
duplicate_of: null
---

## Description

## Summary
Fixes #4368

`DEFAULT_SANDBOX_WORKSPACE_ROOT` was hardcoded to `~/.openclaw/sandboxes`, ignoring the `MOLTBOT_STATE_DIR` environment variable. This caused `~/.clawdbot/sandboxes/` to be recreated even when `MOLTBOT_STATE_DIR=~/.moltbot` was set.

## Changes
- Moved the `resolvedStateDir` variable to the top of the file (before `DEFAULT_SANDBOX_WORKSPACE_ROOT`)
- Updated `DEFAULT_SANDBOX_WORKSPACE_ROOT` to use `resolvedStateDir` instead of hardcoded path
- Removed the duplicate `resolvedSandboxStateDir` variable (now reuses `resolvedStateDir`)

## Testing
- Lint: ✅ passed
- Build: ✅ passed
- Awaiting CI for full test suite

## Reviews


## Comments


## Stats

- **Size:** tiny (3+, 3-, 1 files)
- **Age:** 0 days
- **Last activity:** 2026-01-30

## Links

- Fixes: #4368
