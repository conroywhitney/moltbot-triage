---
number: 3830
title: "feat(googlechat): add proactive messaging support"
author: rehanchrl
created: 2026-01-29T07:07:14Z
updated: 2026-01-29T07:15:46Z
labels: ["channel: googlechat"]
additions: 657
deletions: 13
changed_files: 9
size: large
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: pending
mergeable: true
draft: false
url: https://github.com/moltbot/moltbot/pull/3830
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary

Add space caching and auto-resolution for proactive Google Chat messages.

## Changes

- **Auto-cache space IDs** when users message the bot (`knownSpaces` config field)
- **Auto-resolve** `users/{id}` targets to cached spaces for outbound messages
- **Fallback to `findDirectMessage` API** when space not cached
- **Comprehensive documentation** for proactive messaging patterns

## Why

Previously, sending proactive messages required knowing the space ID beforehand. Now users can:

```bash
# Send to user ID (auto-resolves to cached space)
moltbot message send --channel googlechat --to "users/123" --text "Hello!"

# Or use in cron jobs
```

## Files Changed

- `src/config/types.googlechat.ts` - Add `knownSpaces` types
- `src/config/zod-schema.providers-core.ts` - Add schema validation
- `extensions/googlechat/src/space-cache.ts` (NEW) - Space caching utilities
- `extensions/googlechat/src/targets.ts` - Auto-resolve with cache + API fallback
- `extensions/googlechat/src/monitor.ts` - Auto-cache on incoming messages
- `extensions/googlechat/src/channel.ts` - Pass config to resolver
- `extensions/googlechat/PROACTIVE-MESSAGING.md` (NEW) - Documentation

## Testing

- [x] Incoming messages cache the space
- [x] Outbound messages resolve cached users
- [x] Fallback to `findDirectMessage` API works
- [x] Error messages are helpful when user hasn't messaged first

## Checklist

- [x] Follows contribution guidelines
- [x] Includes documentation
- [x] Backward compatible (space ID targeting still works)

## Reviews


## Comments


## Stats

- **Size:** large (657+, 13-, 9 files)
- **Age:** 0 days
- **Last activity:** 2026-01-29

## Links

- Fixes: (none detected)
