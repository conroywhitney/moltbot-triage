---
number: 3514
title: "fix: Render deployment support with CIDR trustedProxies and LLM configuration docs"
author: ojusave
created: 2026-01-28T18:16:58Z
updated: 2026-01-29T07:32:34Z
labels: ["docs", "gateway", "scripts", "docker"]
additions: 388
deletions: 44
changed_files: 9
size: large
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: pending
mergeable: true
draft: false
url: https://github.com/moltbot/moltbot/pull/3514
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary

This PR fixes Render deployment issues and adds documentation for LLM provider configuration when deploying Moltbot on Render.

## Changes

### Core fixes

1. **CIDR support for `trustedProxies`** (`src/gateway/net.ts`)
   - Added CIDR notation support (e.g. `10.0.0.0/8`) to `isTrustedProxyAddress()`
   - Enables correct proxy header handling behind Renderâ€™s load balancer
   - Fixes "Proxy headers detected from untrusted address" errors
   - Backward compatible with existing exact IP matching

2. **Render startup script** (`scripts/render-start.sh`)
   - Creates `moltbot.json` config with Render-friendly settings
   - Sets `trustedProxies` to private IP ranges (`10.0.0.0/8`, `172.16.0.0/12`, `192.168.0.0/16`)
   - Sets `allowInsecureAuth: true` for Control UI
   - Uses `MOLTBOT_STATE_DIR` / `MOLTBOT_GATEWAY_TOKEN` (with legacy env fallbacks)
   - Disables config cache for fresh reads

3. **Render blueprint** (`render.yaml`)
   - Uses `dockerCommand: /bin/sh scripts/render-start.sh`
   - Adds env vars: `MOLTBOT_GATEWAY_TOKEN`, `MOLTBOT_STATE_DIR`, `MOLTBOT_WORKSPACE_DIR`
   - Adds LLM provider API key placeholders (Anthropic, OpenAI, Gemini, Groq, OpenRouter, etc.)
   - All secrets use `sync: false`

### Documentation

4. **Render deployment guide** (`docs/render.mdx`)
   - Section on configuring LLM API keys in the Render dashboard
   - Links to API key sources per provider
   - Alternative config-file method
   - Generic note on community wrappers for installer-b

## Reviews


## Comments


## Stats

- **Size:** large (388+, 44-, 9 files)
- **Age:** 0 days
- **Last activity:** 2026-01-29

## Links

- Fixes: (none detected)
