---
number: 7703
title: "fix: remove Ollama from reasoning tag provider check"
author: briancolinger
created: 2026-02-03T04:08:59Z
updated: 2026-02-03T04:52:18Z
labels: []
additions: 1
deletions: 5
changed_files: 1
size: tiny
review_decision: none
reviews: []
comments_count: 0
reactions_total: 1
ci_status: pending
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/7703
fixes_issues: [2279]
related_prs: [2279]
duplicate_of: null
---

## Description

## Problem

Ollama models return `(no output)` because `isReasoningTagProvider()` in `src/utils/provider-utils.ts` returns `true` for the `ollama` provider. This causes `enforceFinalTag` to be set, which strips all model output that isn't wrapped in `<final>` tags â€” but Ollama models don't use `<think>`/`<final>` reasoning tags in their text stream.

## Fix

Remove `'ollama'` from the provider check in `isReasoningTagProvider()`. This is a one-line deletion.

Ollama is a model runner/proxy, not inherently a reasoning-tag provider. Individual Ollama models that do use reasoning tags (e.g., DeepSeek-R1) would need model-level detection rather than a blanket provider-level flag.

## Testing

- Existing reasoning tag tests pass (`agent-runner.reasoning-tags.test.ts`, `filters-final-suppresses-output-without-start-tag.test.ts`)
- No Ollama-specific assertions existed in those tests (the check was never correct)

Fixes #2279

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR adjusts provider capability detection by removing `ollama` from `isReasoningTagProvider()` in `src/utils/provider-utils.ts`, so Ollama-backed models are no longer forced through reasoning-tag parsing/`<final>` enforcement. This aligns the provider-level check with how Ollama behaves (a runner/proxy rather than a reasoning-tag emitting provider) and prevents valid model output from being stripped when no `<final>` tag is present.

<h3>Confidence Score: 5/5</h3>

- This PR is safe to merge with minimal risk.
- Change is a one-line deletion in a narrowly-scoped helper; it reduces incorrect tagging behavior for Ollama without affecting non-Ollama providers, and the existing reasoning-tag tests remain applicable.
- No files require special attention

<!-- greptile_other_comments_section -->

<sub>(5/5) You can turn off certain types of comments like style [here](https://app.greptile.com/review/github)!</sub>

<!-- /greptile_comment -->

## Reviews


## Comments


## Stats

- **Size:** tiny (1+, 5-, 1 files)
- **Age:** 0 days
- **Last activity:** 2026-02-03

## Links

- Fixes: #2279
