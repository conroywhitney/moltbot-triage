---
number: 1846
title: "fix(tlon): use HTTP-only poke for outbound to avoid SSE conflict"
author: arthyn
created: 2026-01-25T16:16:17Z
updated: 2026-01-28T23:25:13Z
labels: ["channel: tlon"]
additions: 45
deletions: 4
changed_files: 1
size: small
review_decision: none
reviews: []
comments_count: 1
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/1846
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Problem

The Tlon monitor already maintains an SSE connection for inbound messages. When `sendText` uses `Urbit.authenticate()`, it opens another EventSource connection which causes conflicts.

## Solution

Add a simple `createHttpPokeApi()` function that:
- Authenticates via HTTP (gets cookie)
- Sends pokes via HTTP PUT to the channel endpoint
- Does NOT open an EventSource

This avoids the SSE conflict while still allowing outbound messages to work.

## Changes

- Added `import { authenticate } from "./urbit/auth.js"`
- Added `createHttpPokeApi()` function
- Changed `sendText` to use `createHttpPokeApi` instead of `Urbit.authenticate`

## Testing

Tested with DM sends to `~nocsyx-lassul` - messages delivered successfully without SSE conflicts.

## Reviews


## Comments

### @wca4a (2026-01-26)

  Tested this locally. A few notes:                                                                                                                                                        
                                                                                                                                                                                           
  1. **Current behavior works** - without this PR, outbound messages are working fine in my setup                                                                                          
  2. **Good defensive fix** - avoiding the extra EventSource connection makes sense to prevent potential SSE conflicts                                                                     
  3. **Dependency note** - there's a separate packaging issue where `@urbit/http-api` doesn't auto-install with the extension (filed as separate issue)                                    
                                                                                                                                                                                           
  The approach of using HTTP-only pokes for outbound while keeping the monitor's SSE for inbound is clean. üëç                                                                              
                                                                                                                     


## Stats

- **Size:** small (45+, 4-, 1 files)
- **Age:** 4 days
- **Last activity:** 2026-01-28

## Links

- Fixes: (none detected)
