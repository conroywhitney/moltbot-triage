---
number: 2013
title: "fix(signal): replace ￼ with @uuid/@phone from mentions"
author: alexgleason
created: 2026-01-26T00:49:29Z
updated: 2026-02-03T03:58:21Z
labels: ["channel: signal"]
additions: 26
deletions: 1
changed_files: 2
size: small
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"},{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 0
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/2013
fixes_issues: []
related_prs: [1926]
duplicate_of: null
---

## Description

Related #1926

Signal mentions were appearing as ￼ (object replacement character) instead of readable identifiers. This caused Clawdbot to misinterpret messages and respond inappropriately.

Now parses dataMessage.mentions array and replaces the placeholder character with @{uuid} or @{phone} from the mention metadata.

It turns out it's very difficult to display the actual contact name, but displaying the UUID at least allows Clawdbot to differentiate between users who are being mentioned.

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

Updates the Signal inbound event handler to post-process `dataMessage.message` using `dataMessage.mentions`, replacing the object replacement character placeholders with `@{uuid}`/`@{phone}` identifiers so Clawdbot can correctly distinguish mentioned users. Adds a `SignalMention` type and wires `mentions` into `SignalDataMessage`.

This change lives in the Signal receive path (`src/signal/monitor/event-handler.ts`) just before control-command detection and message dispatch, so the normalized mention text is what downstream routing/command parsing sees.

<h3>Confidence Score: 3/5</h3>

- This PR is likely safe to merge, but mention substitution can produce incorrect text in some cases.
- The change is localized and straightforward, but it relies on `mention.start`/`mention.length` aligning with the trimmed JS string; if messages have leading whitespace/newlines, replacements can target the wrong span. Existing review threads already note additional index/bounds concerns.
- src/signal/monitor/event-handler.ts

<!-- greptile_other_comments_section -->

<!-- /greptile_comment -->

## Reviews

### @greptile-apps — COMMENTED (2026-02-03)

<sub>1 file reviewed, 2 comments</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>

### @greptile-apps — COMMENTED (2026-02-03)

<sub>1 file reviewed, 1 comment</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments


## Stats

- **Size:** small (26+, 1-, 2 files)
- **Age:** 7 days
- **Last activity:** 2026-02-03

## Links

- Fixes: (none detected)
