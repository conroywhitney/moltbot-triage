---
number: 3753
title: "feat(ui): clarify debug toggle with bug icon and extended filtering"
author: daveonkels
created: 2026-01-29T04:14:28Z
updated: 2026-01-29T04:36:24Z
labels: ["app: web-ui"]
additions: 74
deletions: 3
changed_files: 3
size: medium
review_decision: none
reviews: []
comments_count: 1
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/3753
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary

The "Show Thinking" toggle in the web chat was confusing - users didn't know what it did and thought it controlled LLM reasoning mode, not debug visibility.

This change makes the toggle purpose clear and extends filtering to catch more debug messages.

## Changes

**Icon and tooltip** (`app-render.helpers.ts`):
- Change icon from ðŸ§  brain to ðŸ› bug (clearer for debug output)
- Update tooltip: "Show/hide debug info (tool calls, heartbeats)"

**Extended filtering** (`chat.ts`):
- Add `isDebugMessage()` helper that filters:
  - `toolresult`, `tool_result`, `tool` role messages
  - System messages containing "heartbeat", "scheduled", "context compacted/trimmed"
- Replace simple role check with `isDebugMessage()` call

**Tests** (`chat.test.ts`):
- Add test: debug messages hidden when `showThinking` is false
- Add test: debug messages shown when `showThinking` is true

## Files Changed

- `ui/src/ui/app-render.helpers.ts` - Icon and tooltip
- `ui/src/ui/views/chat.ts` - Extended filtering logic
- `ui/src/ui/views/chat.test.ts` - New test cases

## Testing

- [x] With toggle OFF: heartbeat/tool messages hidden
- [x] With toggle ON: debug messages appear
- [x] Normal user/assistant messages always visible
- [x] Bug icon is clearer than brain for debug purpose
- [x] CI passes (lint, format, build)

ðŸ¤– AI-assisted (Claude Code)

## Reviews


## Comments

### @daveonkels (2026-01-29)

## CI Failure Analysis

The failing test is unrelated to this PR's changes:

**Failing test:** `src/media-understanding/apply.test.ts` > "escapes XML special characters in filenames to prevent injection"

**Error:** `ENOENT: no such file or directory` when trying to create `file<test>.txt` on Windows

**Root cause:** This test runs on the Windows CI runner and attempts to create a file with `<` and `>` characters in the filename, which are invalid on Windows filesystems.

**This PR only changes:**
- `ui/src/ui/app-render.helpers.ts` - Icon and tooltip for debug toggle
- `ui/src/ui/views/chat.ts` - Extended message filtering logic
- `ui/src/ui/views/chat.test.ts` - New test cases

This is a pre-existing test infrastructure issue, not caused by this PR. Same failure occurred in PR #3751.


## Stats

- **Size:** medium (74+, 3-, 3 files)
- **Age:** 1 days
- **Last activity:** 2026-01-29

## Links

- Fixes: (none detected)
