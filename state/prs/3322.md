---
number: 3322
title: "fix: merge provider config api into registry model"
author: nulone
created: 2026-01-28T12:50:27Z
updated: 2026-01-28T23:25:09Z
labels: ["agents"]
additions: 39
deletions: 1
changed_files: 2
size: small
review_decision: none
reviews: []
comments_count: 0
reactions_total: 2
ci_status: failing
mergeable: true
draft: false
url: https://github.com/moltbot/moltbot/pull/3322
fixes_issues: [1695]
related_prs: [1695]
duplicate_of: null
---

## Description

Fixes #1695

## Problem
When `modelRegistry.find()` returns a model, provider config `models.providers.*.api` was ignored — registry model was used as-is.

## Solution
Shallow clone + merge provider config api when `model.api` is missing.

## Changes
- `src/agents/pi-embedded-runner/model.ts` — 3 lines
- `src/agents/pi-embedded-runner/model.test.ts` — regression test

## Testing
All related tests pass ✓

## Reviews


## Comments


## Stats

- **Size:** small (39+, 1-, 2 files)
- **Age:** 0 days
- **Last activity:** 2026-01-28

## Links

- Fixes: #1695
