---
number: 4603
title: " fix: update Antigravity User-Agent to 1.15.8"
author: Kuberwastaken
created: 2026-01-30T11:14:00Z
updated: 2026-02-03T02:25:45Z
labels: ["extensions: google-antigravity-auth"]
additions: 4
deletions: 3
changed_files: 3
size: tiny
review_decision: none
reviews: [{"author":"MartinP7r","state":"APPROVED"},{"author":"tahaygun","state":"APPROVED"},{"author":"vivganes","state":"COMMENTED"},{"author":"Ziyadabdullah999","state":"APPROVED"},{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 11
reactions_total: 10
ci_status: failing
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/4603
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

Summary
Fixes https://github.com/openclaw/openclaw/issues/4111

This PR addresses issues with Antigravity API requests by updating the `User-Agent` header to a more recent and specific value (`antigravity/1.15.8 linux/arm64`). Currently proving as a band-aid to fix it.

**Antigravity API compatibility improvements:**

* Updated the `User-Agent` header in `extensions/google-antigravity-auth/index.ts` to `antigravity/1.15.8 linux/arm64` when fetching the project ID, replacing the older `google-api-nodejs-client/9.15.1` string.
* Changed the `User-Agent` header in `src/infra/provider-usage.fetch.antigravity.ts` to `antigravity/1.15.8 linux/arm64` for Antigravity usage requests, ensuring consistent identification across requests.

**Documentation:**

* Added a changelog entry describing the User-Agent update for Antigravity to version 1.15.8, highlighting the fix for "no longer supported" errors.

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR updates the `User-Agent` header used for Google Antigravity (Cloud Code Assist) requests in both the OAuth extension (`extensions/google-antigravity-auth/index.ts`) and the core usage fetcher (`src/infra/provider-usage.fetch.antigravity.ts`), and adds a changelog entry documenting the change.

The change is localized to the HTTP headers sent to Antigravity endpoints, intended to address ‚Äúno longer supported‚Äù API errors by identifying requests as a newer Antigravity client.

<h3>Confidence Score: 3/5</h3>

- Moderately safe to merge, but the hard-coded platform/arch in the User-Agent could cause regressions on non-Linux/arm64 environments.
- Changes are small and limited to request headers and a changelog entry, but they alter external API compatibility behavior. The main risk is that forcing `linux/arm64` could be rejected or behave differently for users on macOS/Windows or x64 Linux, undermining the fix.
- extensions/google-antigravity-auth/index.ts and src/infra/provider-usage.fetch.antigravity.ts (User-Agent construction); CHANGELOG.md formatting consistency

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

<!-- /greptile_comment -->

## Reviews

### @MartinP7r ‚Äî APPROVED (2026-01-31)



### @tahaygun ‚Äî APPROVED (2026-01-31)



### @vivganes ‚Äî COMMENTED (2026-02-01)



### @Ziyadabdullah999 ‚Äî APPROVED (2026-02-02)



### @greptile-apps ‚Äî COMMENTED (2026-02-03)

<sub>3 files reviewed, 3 comments</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments

### @yourcasualdev (2026-01-30)

Hey can someone merge this please. Its an easy fix but prevent users with Antigravity.

### @Kuberwastaken (2026-01-30)

Update: Been testing heavily on my clawdbot install and works great!

### @yourcasualdev (2026-01-30)

How can I run this fork?

### @abanoub-ashraf (2026-01-30)

can someone merge this please

### @davscro (2026-01-30)

hey guys I just fixed it with the cursor-cli with the prompt like:
`when i do like: "openclaw agents add main" and i add google antigravity everything went ok but then the bot respond with: "This version of  Antigravity is no longer supported. Please update to receive the latest  features!"                                                                        I found the solution, we have to specify header. Please take a 
look at this at this pr https://github.com/openclaw/openclaw/pull/4603

So it changed it like this and now it is working again üòâ
![Screenshot 2026-01-31 at 00 37 09](https://github.com/user-attachments/assets/acc41731-c6b7-4102-8bda-16c9926e8528)

### @tahaygun (2026-01-31)

What are we waiting for üò¢ 

### @pswpswpsw (2026-01-31)

it seems does not work for my openclaw. i can run any other model except antigravity and the error message is the same.  ü¶û OpenClaw 2026.1.29 (6522de6)
‚îÇ OS              ‚îÇ linux 6.8.0-90-generic (x64)                                                                                                                                                                                            ‚îÇ
‚îÇ Node            ‚îÇ 24.11.1          



### @Knucklessg1 (2026-01-31)

Changes look good. Can we get this merged? 

### @isgursoy (2026-01-31)

critical

### @tahaygun (2026-01-31)

Fixed with the new version.

### @timm-u (2026-02-02)

Hi! I believe this PR could really benefit from robustness check that would make model fallback work if such error is detected. Currently it will just basically render the bot useless until model is manually switched. For my own private openclaw - i fixed it by:

**Version Correctness:** The version strings and User-Agent headers in the google-gemini-cli provider should be regularly updated in the source code to match the latest supported Antigravity requirements (currently 1.15.8).
**Robustness (Fallback Logic):** The provider should implement a check during stream processing that detects the string "This version of Antigravity is no longer supported" in the response body. If detected, the provider should throw an Error object. This ensures the agent runner catches the failure and triggers an automatic model fallback instead of presenting the error text to the user as a successful response.

Please see issue #7308 with code-snippets.


## Stats

- **Size:** tiny (4+, 3-, 3 files)
- **Age:** 3 days
- **Last activity:** 2026-02-03

## Links

- Fixes: (none detected)
