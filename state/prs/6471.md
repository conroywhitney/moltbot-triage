---
number: 6471
title: "fix(skills): ignore Python directories in skills watcher"
author: Glucksberg
created: 2026-02-01T17:59:35Z
updated: 2026-02-01T18:00:36Z
labels: ["agents"]
additions: 7
deletions: 0
changed_files: 1
size: tiny
review_decision: none
reviews: []
comments_count: 0
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/6471
fixes_issues: [6429]
related_prs: [6429]
duplicate_of: null
---

## Description

## Summary
- Add `.venv`, `venv`, `__pycache__`, `.pytest_cache`, and `.cache` to `DEFAULT_SKILLS_WATCH_IGNORED`
- Prevents EMFILE (too many open files) errors when Python-based skills have large virtual environments

## Test plan
- [x] Existing test passes (`src/agents/skills/refresh.test.ts`)
- [ ] Manual test with Python skill containing `.venv`

Fixes #6429

ðŸ¤– Generated with [Claude Code](https://claude.ai/code)

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR expands the default `chokidar` ignore list used by the skills directory watcher (`ensureSkillsWatcher` in `src/agents/skills/refresh.ts`) to exclude common Python virtual environment and cache directories (`.venv`, `venv`, `__pycache__`, `.pytest_cache`, `.cache`). This reduces the watcherâ€™s file descriptor usage and helps avoid `EMFILE` errors when a skills workspace contains large Python dependency trees, while keeping the existing behavior of watching the skills-related paths and debouncing snapshot version bumps.


<h3>Confidence Score: 5/5</h3>

- This PR is safe to merge with minimal risk.
- Change is localized to adding additional ignore regexes for a file watcher; it doesnâ€™t affect core logic beyond reducing watched paths. No behavior-breaking changes were found in the modified code.
- No files require special attention

<!-- greptile_other_comments_section -->

<!-- /greptile_comment -->

## Reviews


## Comments


## Stats

- **Size:** tiny (7+, 0-, 1 files)
- **Age:** 1 days
- **Last activity:** 2026-02-01

## Links

- Fixes: #6429
