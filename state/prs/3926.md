---
number: 3926
title: "fix(security): disable browser.evaluateEnabled by default"
author: nirzadokox
created: 2026-01-29T11:08:58Z
updated: 2026-02-03T02:54:24Z
labels: ["docs", "gateway", "agents"]
additions: 7
deletions: 7
changed_files: 6
size: small
review_decision: none
reviews: []
comments_count: 0
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/3926
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary

Changes `browser.evaluateEnabled` to default to `false` for security.

## What This Controls

- `moltbot browser evaluate --fn '<code>'` - Execute arbitrary JavaScript in the browser
- `moltbot browser wait --fn '<condition>'` - Wait for a JavaScript condition

## The Risk

With this feature enabled, an attacker with gateway access can run arbitrary JavaScript in the browser context - stealing cookies, session tokens, or making authenticated requests as the user.

LLM agents can also be tricked via prompt injection into executing malicious code.

## Changes

- `DEFAULT_BROWSER_EVALUATE_ENABLED` changed from `true` to `false`
- Updated all config defaults and documentation to reflect the change

## Impact

**BREAKING CHANGE**: Users relying on `evaluate` or `wait --fn` must explicitly enable it:

```json
{ "browser": { "evaluateEnabled": true } }
```

Built-in actions (click, type, screenshot, wait for text/URL) remain fully functional.

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR changes the default for `browser.evaluateEnabled` (which gates `browser act kind=evaluate` / `moltbot browser evaluate` and `browser wait --fn`) from `true` to `false` across runtime constants (`src/browser/constants.ts`), skill/hook config gating defaults (`src/agents/skills/config.ts`, `src/hooks/config.ts`), and documentation (`docs/gateway/configuration.md`, `docs/tools/browser.md`). The goal is to disable arbitrary JS execution in the browser context by default for security, requiring users to opt in via config.

<h3>Confidence Score: 5/5</h3>

- This PR is safe to merge and is a targeted security-hardening default change.
- Changes are straightforward boolean default flips with consistent updates across constants, config gating, and docs; no functional logic changes beyond default configuration behavior were introduced in the modified files.
- No files require special attention

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

<!-- /greptile_comment -->

## Reviews


## Comments


## Stats

- **Size:** small (7+, 7-, 6 files)
- **Age:** 4 days
- **Last activity:** 2026-02-03

## Links

- Fixes: (none detected)
