---
number: 4672
title: "fix(docker): restrict default gateway bind to loopback for security"
author: HassanFleyah
created: 2026-01-30T13:54:26Z
updated: 2026-02-03T02:24:46Z
labels: ["docker"]
additions: 2
deletions: 2
changed_files: 2
size: tiny
review_decision: none
reviews: [{"author":"copilot-pull-request-reviewer","state":"COMMENTED"},{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 1
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/4672
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

### Problem
The gateway currently defaults to `OPENCLAW_GATEWAY_BIND=lan`, which causes port `18789` to bind to all LAN interfaces by default.

This means that simply running `docker-compose up` exposes the OpenClaw gateway to the local network without any explicit user intent. In environments such as public Wi-Fi, shared LANs, home routers with UPnP, or misconfigured VPS firewalls, this can unintentionally expose the gateway to untrusted clients.

### Impact
An exposed gateway increases the attack surface and may allow unauthorized access to the OpenClaw API, depending on deployment context and downstream authentication controls. This violates the principle of secure-by-default behavior.

### Solution
Changed the default value of `OPENCLAW_GATEWAY_BIND` to `loopback`, ensuring the gateway is only accessible from the host by default.

Users who intentionally require remote or LAN access can still explicitly opt in by setting:
- `OPENCLAW_GATEWAY_BIND=lan`
- or `OPENCLAW_GATEWAY_BIND=0.0.0.0`

This preserves existing functionality while making the default behavior safer.

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR changes the Docker default gateway bind from `lan` to `loopback` in both `docker-compose.yml` and `docker-setup.sh`, making the gateway secure-by-default (not exposed to the local network unless users opt in).

The change fits the repoâ€™s Docker onboarding flow by ensuring `OPENCLAW_GATEWAY_BIND` now defaults to a safer value while still allowing users to explicitly override it via environment variables.

<h3>Confidence Score: 4/5</h3>

- This PR is safe to merge with minimal risk, but has a small UX/documentation mismatch in the setup script output.
- The functional change is a simple default swap applied consistently in compose and setup script, which reduces exposure by default. The main issue found is the onboarding hint in `docker-setup.sh` still instructing `lan`, which can mislead users and undermine the security goal; otherwise there are no apparent runtime/compatibility problems in the diff.
- docker-setup.sh (printed onboarding instructions vs new default)

<!-- greptile_other_comments_section -->

<sub>(3/5) Reply to the agent's comments like "Can you suggest a fix for this @greptileai?" or ask follow-up questions!</sub>

<!-- /greptile_comment -->

## Reviews

### @copilot-pull-request-reviewer â€” COMMENTED (2026-01-30)

## Pull request overview

This PR aims to improve the security defaults for OpenClaw's Docker deployment by restricting the gateway's network binding from LAN-accessible to localhost-only. The intent is to prevent unintentional exposure of the gateway on local networks when users simply run `docker-compose up`.

**Changes:**
- Modified the default value of `OPENCLAW_GATEWAY_BIND` from `lan` to `localhost` in docker-compose.yml





---

ðŸ’¡ <a href="/openclaw/openclaw/new/main/.github/instructions?filename=*.instructions.md" class="Link--inTextBlock" target="_blank" rel="noopener noreferrer">Add Copilot custom instructions</a> for smarter, more guided reviews. <a href="https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot" class="Link--inTextBlock" target="_blank" rel="noopener noreferrer">Learn how to get started</a>.

### @greptile-apps â€” COMMENTED (2026-02-03)

<sub>1 file reviewed, 1 comment</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments

### @greptile-apps (2026-02-03)

<details>
<summary>Additional Comments (1)</summary>

**`docker-setup.sh`**
[P1] Onboarding hint still tells users to bind `lan`

`docker-setup.sh` now defaults `OPENCLAW_GATEWAY_BIND` to `loopback` (line 34), but the onboarding instructions still say `Gateway bind: lan` (line 183). This will confuse users and may cause them to unnecessarily expose the gateway again; consider updating the printed hint to `loopback` (or to match `$OPENCLAW_GATEWAY_BIND`).

<details><summary>Prompt To Fix With AI</summary>

`````markdown
This is a comment left during a code review.
Path: docker-setup.sh
Line: 181:184

Comment:
[P1] Onboarding hint still tells users to bind `lan`

`docker-setup.sh` now defaults `OPENCLAW_GATEWAY_BIND` to `loopback` (line 34), but the onboarding instructions still say `Gateway bind: lan` (line 183). This will confuse users and may cause them to unnecessarily expose the gateway again; consider updating the printed hint to `loopback` (or to match `$OPENCLAW_GATEWAY_BIND`).

How can I resolve this? If you propose a fix, please make it concise.
`````
</details>
</details>


## Stats

- **Size:** tiny (2+, 2-, 2 files)
- **Age:** 3 days
- **Last activity:** 2026-02-03

## Links

- Fixes: (none detected)
