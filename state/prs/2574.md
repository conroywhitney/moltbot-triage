---
number: 2574
title: "fix(diagnostics-otel): update to @opentelemetry/resources v2.x API"
author: dillera
created: 2026-01-27T04:32:30Z
updated: 2026-02-03T03:56:51Z
labels: ["extensions: diagnostics-otel"]
additions: 2
deletions: 2
changed_files: 1
size: tiny
review_decision: none
reviews: []
comments_count: 1
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/2574
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary

The `diagnostics-otel` plugin fails to load with:

```
TypeError: _resources.Resource is not a constructor
```

## Root Cause

The `@opentelemetry/resources` package v2.x removed the `Resource` class export. The new API uses `resourceFromAttributes()` function instead.

From the package's index.js (v2.5.0):
```js
export { resourceFromAttributes, defaultResource, emptyResource } from './ResourceImpl';
```

Note: No `Resource` class is exported.

## Fix

- Replace `import { Resource }` with `import { resourceFromAttributes }`
- Replace `new Resource({...})` with `resourceFromAttributes({...})`

## Testing

Tested locally on macOS with Node 22.22.0 â€” plugin now loads successfully and exports telemetry to Honeycomb.

---

Found while debugging with Clawdbot ðŸ¤–

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

Updates the `diagnostics-otel` plugin to match `@opentelemetry/resources` v2.x by switching from the removed `Resource` class to the new `resourceFromAttributes()` API, fixing the runtime `TypeError: Resource is not a constructor` when the plugin starts.

Change is localized to `extensions/diagnostics-otel/src/service.ts`, where the constructed resource passed into `NodeSDK`/`LoggerProvider` now uses `resourceFromAttributes({ [SemanticResourceAttributes.SERVICE_NAME]: serviceName })`.

<h3>Confidence Score: 5/5</h3>

- This PR is safe to merge with minimal risk.
- The change is a straightforward API migration (import + constructor â†’ function call) confined to a single location, and it directly addresses the reported runtime failure. No behavioral changes beyond resource construction were introduced.
- No files require special attention

<!-- greptile_other_comments_section -->

<sub>(2/5) Greptile learns from your feedback when you react with thumbs up/down!</sub>

<!-- /greptile_comment -->

## Reviews


## Comments

### @dillera (2026-01-27)

bots helping bots


## Stats

- **Size:** tiny (2+, 2-, 1 files)
- **Age:** 6 days
- **Last activity:** 2026-02-03

## Links

- Fixes: (none detected)
