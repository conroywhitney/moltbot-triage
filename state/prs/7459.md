---
number: 7459
title: "fix(signal): resolve mention placeholders to actual names"
author: gerigk-agent
created: 2026-02-02T21:17:01Z
updated: 2026-02-02T23:22:57Z
labels: ["channel: signal"]
additions: 15
deletions: 1
changed_files: 1
size: small
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 0
reactions_total: 1
ci_status: passing
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/7459
fixes_issues: [7457]
related_prs: [7457]
duplicate_of: null
---

## Description

## Summary
Signal messages with @mentions contain placeholder characters (`\uFFFC`) in the message text, with actual name/number/uuid data in the `mentions` array. This patch processes the mentions array and replaces placeholders with readable `@name` text.

## Problem
When someone sends a message like "Hey @Arthur check this" in Signal, OpenClaw receives:
```json
{
  "message": "Hey \uFFFC check this",
  "mentions": [{"start": 4, "length": 1, "name": "Arthur", ...}]
}
```

The agent sees garbled text instead of the actual mention.

## Solution
Process the `mentions` array and replace placeholder characters with `@name` (falling back to number or uuid if name isn't available).

Key points:
- Sort mentions by position descending to replace from end first (preserves indices)
- Use `name ?? number ?? uuid ?? "someone"` fallback chain
- Minimal change, single file

## Testing
- Tested locally with Signal group messages containing @mentions
- Names now appear correctly as `@Arthur` instead of placeholder chars

Fixes #7457

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This change updates Signal inbound message parsing to render `@mentions` correctly by replacing the U+FFFC placeholder(s) in `dataMessage.message` using entries from `dataMessage.mentions`, sorting mentions from the end of the string to preserve indices. This improves the text that gets passed into the normal inbound envelope/session/dispatch flow (control command detection, debouncing, and agent routing) without changing downstream message handling.

<h3>Confidence Score: 4/5</h3>

- This PR is likely safe to merge and improves Signal message readability, with a small risk around malformed mention indices.
- The change is localized to Signal inbound message text normalization and preserves existing flow (debouncing, command gating, dispatch). The main concern is robustness: defaulting missing `start/length` to `0/1` can produce incorrect replacements if mention metadata is absent/invalid, which would be user-visible but not catastrophic.
- src/signal/monitor/event-handler.ts

<!-- greptile_other_comments_section -->

<sub>(3/5) Reply to the agent's comments like "Can you suggest a fix for this @greptileai?" or ask follow-up questions!</sub>

**Context used:**

- Context from `dashboard` - CLAUDE.md ([source](https://app.greptile.com/review/custom-context?memory=fd949e91-5c3a-4ab5-90a1-cbe184fd6ce8))
- Context from `dashboard` - AGENTS.md ([source](https://app.greptile.com/review/custom-context?memory=0d0c8278-ef8e-4d6c-ab21-f5527e322f13))

<!-- /greptile_comment -->

## Reviews

### @greptile-apps â€” COMMENTED (2026-02-02)

<sub>1 file reviewed, 1 comment</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments


## Stats

- **Size:** small (15+, 1-, 1 files)
- **Age:** 0 days
- **Last activity:** 2026-02-02

## Links

- Fixes: #7457
