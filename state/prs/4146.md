---
number: 4146
title: "Proposed Workspace cloud sync — PR 1/4: Config types + rclone infrastructure"
author: ashbrener
created: 2026-01-29T19:28:14Z
updated: 2026-01-30T08:54:54Z
labels: []
additions: 1006
deletions: 0
changed_files: 4
size: huge
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: pending
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/4146
fixes_issues: [3505]
related_prs: [3505,3509,4012]
duplicate_of: null
---

## Description

## Summary

Foundation for bidirectional workspace sync with cloud storage providers (Dropbox, Google Drive, S3, etc).

**This is PR 1 of 4** for #4012, extracted from the closed #3505 per maintainer feedback on PR size.

## Changes

| File | Lines | Purpose |
|------|-------|---------|
| `src/config/types.workspace.ts` | 129 | Config types for `workspace.sync` block |
| `src/infra/rclone.ts` | 598 | rclone wrapper + config generation |
| `src/infra/rclone.test.ts` | 277 | Unit tests (23 tests) |
| `src/config/types.clawdbot.ts` | +2 | Wire up `workspace?: WorkspaceConfig` |

**Total: ~1,006 lines** (within reviewable range)

## What this enables

This PR adds the core infrastructure but **no user-facing features yet**. After this merges, the subsequent PRs will add:

- **PR 2:** CLI commands (`moltbot workspace setup/sync/status`)
- **PR 3:** Auto-sync hooks and background sync manager
- **PR 4:** Documentation and agent skill

## rclone wrapper features

- Binary detection in PATH and common install locations
- Config file generation from moltbot.json credentials
- OAuth authorization flow for Dropbox/GDrive/OneDrive
- `bisync` (bidirectional) and `sync` (one-way) operations
- Remote listing and connection health checks
- Cross-platform path handling (macOS, Linux, Windows)

## Testing

- ✅ `pnpm lint` passes
- ✅ `pnpm build` passes
- ✅ 23 unit tests for rclone helpers

## Related

- Issue: #4012
- Discussion: #3509
- Original PR (closed for size): #3505

/cc @sebslight

## Reviews


## Comments


## Stats

- **Size:** huge (1006+, 0-, 4 files)
- **Age:** 0 days
- **Last activity:** 2026-01-30

## Links

- Fixes: #3505
