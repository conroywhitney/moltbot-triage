---
number: 4756
title: "feat(tts): add outputFormat option for ElevenLabs"
author: lpjhelder
created: 2026-01-30T16:30:26Z
updated: 2026-01-30T16:34:48Z
labels: []
additions: 17
deletions: 3
changed_files: 3
size: small
review_decision: none
reviews: [{"author":"copilot-pull-request-reviewer","state":"COMMENTED"}]
comments_count: 0
reactions_total: 0
ci_status: pending
mergeable: true
draft: false
url: https://github.com/openclaw/openclaw/pull/4756
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary

Adds configurable `outputFormat` for ElevenLabs TTS, allowing users to override the default `mp3_44100_128` format.

## Motivation

WhatsApp requires specific audio formats (24kHz, 48kbps, mono) that differ from the defaults. Currently, the ElevenLabs output format is hardcoded, making it impossible to use native TTS with WhatsApp without post-processing via ffmpeg.

## Changes

- Add `outputFormat` field to elevenlabs config in `types.tts.ts`
- Add `outputFormat` to zod schema validation in `zod-schema.core.ts`
- Use configured `outputFormat` in `tts.ts`, falling back to channel defaults
- Infer file extension from custom `outputFormat` when specified

## Example Config

```json
{
  "messages": {
    "tts": {
      "elevenlabs": {
        "outputFormat": "mp3_22050_32"
      }
    }
  }
}
```

## Testing

Tested locally with WhatsApp channel - audio now plays correctly when using a compatible output format.

## Related

ElevenLabs supported output formats: https://elevenlabs.io/docs/api-reference/text-to-speech#output-format

## Reviews

### @copilot-pull-request-reviewer â€” COMMENTED (2026-01-30)

## Pull request overview

This PR adds configurable `outputFormat` support for ElevenLabs TTS to enable WhatsApp compatibility without post-processing. The motivation is that WhatsApp requires specific audio formats (24kHz, 48kbps, mono) that differ from the hardcoded ElevenLabs default of `mp3_44100_128`.

**Changes:**
- Add `outputFormat` field to ElevenLabs TTS configuration with validation
- Use custom format when specified, falling back to channel defaults
- Infer file extension from custom format when used

### Reviewed changes

Copilot reviewed 3 out of 3 changed files in this pull request and generated 4 comments.

| File | Description |
| ---- | ----------- |
| `src/config/types.tts.ts` | Add optional `outputFormat` field to ElevenLabs config type with documentation comment |
| `src/config/zod-schema.core.ts` | Add zod schema validation for the new `outputFormat` string field |
| `src/tts/tts.ts` | Implement output format override logic: add to `ResolvedTtsConfig`, resolve in config parsing, apply in `textToSpeech` function with extension inference |





---

ðŸ’¡ <a href="/openclaw/openclaw/new/main/.github/instructions?filename=*.instructions.md" class="Link--inTextBlock" target="_blank" rel="noopener noreferrer">Add Copilot custom instructions</a> for smarter, more guided reviews. <a href="https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot" class="Link--inTextBlock" target="_blank" rel="noopener noreferrer">Learn how to get started</a>.


## Comments


## Stats

- **Size:** small (17+, 3-, 3 files)
- **Age:** 0 days
- **Last activity:** 2026-01-30

## Links

- Fixes: (none detected)
