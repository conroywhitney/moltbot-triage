---
number: 6860
title: "fix(hooks): use agent default model for slug generation"
author: freshman-db
created: 2026-02-02T04:07:41Z
updated: 2026-02-02T04:08:43Z
labels: []
additions: 4
deletions: 0
changed_files: 1
size: tiny
review_decision: none
reviews: []
comments_count: 0
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/6860
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary

- Use `resolveDefaultModelForAgent` to get the agent's configured default model
- Pass provider and model to `runEmbeddedPiAgent` for slug generation
- Ensures slug generation respects agent-specific model configuration

## Test plan

- [ ] Verify slug generation uses the correct model when agent has custom model config
- [ ] Verify default behavior works when no custom model is configured

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR updates the LLM-based slug generator hook to respect per-agent model configuration. It resolves the default model for the resolved agent via `resolveDefaultModelForAgent` and passes the resulting `provider`/`model` into `runEmbeddedPiAgent`, so the embedded PI runner selects the same provider/model the agent would normally use.

Change is localized to `src/hooks/llm-slug-generator.ts` and aligns with existing model-selection patterns used elsewhere in the repo (e.g., Telegram and TTS modules).

<h3>Confidence Score: 5/5</h3>

- This PR is safe to merge with minimal risk.
- The change is small, localized, and uses an existing helper (`resolveDefaultModelForAgent`) to plumb provider/model into an already-supported `runEmbeddedPiAgent` API (params already include optional `provider`/`model`). No behavioral impact outside slug generation, and the added values follow the same normalization/selection flow used elsewhere in the codebase.
- No files require special attention

<!-- greptile_other_comments_section -->

<sub>(3/5) Reply to the agent's comments like "Can you suggest a fix for this @greptileai?" or ask follow-up questions!</sub>

**Context used:**

- Context from `dashboard` - CLAUDE.md ([source](https://app.greptile.com/review/custom-context?memory=fd949e91-5c3a-4ab5-90a1-cbe184fd6ce8))
- Context from `dashboard` - AGENTS.md ([source](https://app.greptile.com/review/custom-context?memory=0d0c8278-ef8e-4d6c-ab21-f5527e322f13))

<!-- /greptile_comment -->

## Reviews


## Comments


## Stats

- **Size:** tiny (4+, 0-, 1 files)
- **Age:** 0 days
- **Last activity:** 2026-02-02

## Links

- Fixes: (none detected)
