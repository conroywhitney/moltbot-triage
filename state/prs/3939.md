---
number: 3939
title: "feat(sandbox): configurable shell command"
author: sweepies
created: 2026-01-29T11:43:05Z
updated: 2026-01-29T11:43:16Z
labels: ["docs", "gateway", "docker", "agents"]
additions: 51
deletions: 7
changed_files: 14
size: medium
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/3939
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

When Moltbot runs commands inside a Docker sandbox container it previously hardcoded `sh -lc` as the shell. This PR adds a new config option `agents.defaults.sandbox.docker.shellCommand` to make the shell configurable.

Usage example:

```json
{
  "agents": {
    "defaults": {
      "sandbox": {
        "docker": {
          "shellCommand": ["bash", "-lc"]
        }
      }
    }
  }
}
```

If omitted, it defaults to `["sh", "-lc"]` (unchanged behavior).

Places the shell command is used
- Running user commands via the `exec` tool: `bash-tools.shared.ts:85-86`
- Running the one-time `setupCommand` after container creation: `docker.ts:207-208`

Code courtesy of Copilot

## Reviews


## Comments


## Stats

- **Size:** medium (51+, 7-, 14 files)
- **Age:** 1 days
- **Last activity:** 2026-01-29

## Links

- Fixes: (none detected)
