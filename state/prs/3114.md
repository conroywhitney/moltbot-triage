---
number: 3114
title: "feat(auto-think): Automatic thinking level classification"
author: johndowbs
created: 2026-01-28T03:47:29Z
updated: 2026-01-28T23:25:10Z
labels: ["docs"]
additions: 520
deletions: 0
changed_files: 6
size: large
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/3114
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Summary

Adds a new auto-think feature that automatically classifies incoming messages and selects an appropriate thinking level using heuristics, without requiring explicit `/think` directives.

## Features

- **Heuristic-based classification** (no API calls, <1ms latency)
- **High complexity**: debug, security, architecture, large code blocks
- **Medium complexity**: how-to, implementation, analysis, step-by-step  
- **Low complexity**: simple lookups, definitions, translations
- Configurable floor/ceiling levels
- Custom pattern rules support
- User directives still override auto-classification

## Config

```yaml
agents:
  defaults:
    autoThink:
      enabled: true
      floor: 'off'
      ceiling: 'high'
      rules:
        - match: 'newsletter'
          level: 'medium'
```

## Override Behavior

Auto-think respects the existing directive precedence:
1. Inline directive (`/t high` in the message) — always wins
2. Session sticky (previous `/think:high` directive-only message)
3. Auto-think classification — when enabled and no directive present
4. Default level (`thinkingDefault` config)

## Files Changed

- `src/auto-reply/auto-think.ts`: Classification logic
- `src/auto-reply/auto-think.test.ts`: Unit tests (25 tests, all passing)
- `src/auto-reply/reply/get-reply-run.ts`: Integration point
- `src/config/zod-schema.agent-defaults.ts`: Config schema
- `src/config/types.agent-defaults.ts`: TypeScript types
- `docs/auto-think.md`: Documentation

## Testing

All 25 unit tests pass:
```
✓ src/auto-reply/auto-think.test.ts (25 tests) 31ms
```

## Reviews


## Comments


## Stats

- **Size:** large (520+, 0-, 6 files)
- **Age:** 2 days
- **Last activity:** 2026-01-28

## Links

- Fixes: (none detected)
