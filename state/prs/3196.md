---
number: 3196
title: "docs: clarify auth-profiles.json format for Claude Max setup-tokens"
author: aadeina
created: 2026-01-28T07:30:07Z
updated: 2026-02-03T03:56:35Z
labels: ["docs"]
additions: 74
deletions: 0
changed_files: 2
size: medium
review_decision: none
reviews: [{"author":"greptile-apps","state":"COMMENTED"}]
comments_count: 0
reactions_total: 1
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/3196
fixes_issues: [3098]
related_prs: [3098]
duplicate_of: null
---

## Description

Fixes #3098

## Summary
   - Add explicit `auth-profiles.json` format examples for setup-tokens in `docs/providers/anthropic.md`
   - Add comprehensive credential type examples in `docs/concepts/oauth.md`
   - Clarify that setup-tokens require `type: "token"` (not `"oauth"`)

   ## The Problem
   When configuring `auth-profiles.json` manually for Claude Max/Pro setup-tokens, using `type: "oauth"` with
   `accessToken` fails silently. The correct format is:

   ```json
   {
     "type": "token",
     "provider": "anthropic",
     "token": "sk-ant-[REDACTED]..."
   }
   ```

   ## Test plan
   - [x] Verify JSON examples are syntactically correct
   - [x] Cross-reference with source types in `src/agents/auth-profiles/types.ts`

<!-- greptile_comment -->

<h2>Greptile Overview</h2>

<h3>Greptile Summary</h3>

This PR updates the documentation to prevent misconfigurations when manually editing per-agent `auth-profiles.json`, especially for Anthropic Claude subscription “setup-token” auth. It adds explicit JSON examples for the three credential shapes used by the auth profile store (`api_key`, `token`, and `oauth`) in `docs/concepts/oauth.md`, and adds a dedicated “Manual auth-profiles.json setup” section to `docs/providers/anthropic.md` that clarifies setup-tokens must use `type: "token"` (not `"oauth"` / `accessToken`).

These changes align with the credential union in `src/agents/auth-profiles/types.ts` and should reduce silent failures from using the wrong credential type while keeping auth storage documentation centralized under the OAuth/token-sink concept.

<h3>Confidence Score: 4/5</h3>

- This PR is safe to merge; changes are documentation-only with low operational risk.
- Edits are confined to docs and largely match the existing auth profile types, with only a small potential for minor schema drift in the OAuth example fields.
- docs/concepts/oauth.md (OAuth example field names)

<!-- greptile_other_comments_section -->

<sub>(3/5) Reply to the agent's comments like "Can you suggest a fix for this @greptileai?" or ask follow-up questions!</sub>

<!-- /greptile_comment -->

## Reviews

### @greptile-apps — COMMENTED (2026-02-03)

<sub>1 file reviewed, 2 comments</sub>

<sub>[Edit Code Review Agent Settings](https://app.greptile.com/review/github) | [Greptile](https://greptile.com?utm_source=greptile_expert&utm_medium=github&utm_campaign=code_reviews)</sub>


## Comments


## Stats

- **Size:** medium (74+, 0-, 2 files)
- **Age:** 5 days
- **Last activity:** 2026-02-03

## Links

- Fixes: #3098
