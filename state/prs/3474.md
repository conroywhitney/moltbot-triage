---
number: 3474
title: "fix(macos): menu bar activity badge not showing during agent work"
author: elektricM
created: 2026-01-28T17:11:33Z
updated: 2026-01-30T17:39:24Z
labels: ["app: macos"]
additions: 57
deletions: 9
changed_files: 3
size: medium
review_decision: none
reviews: []
comments_count: 1
reactions_total: 0
ci_status: failing
mergeable: false
draft: false
url: https://github.com/openclaw/openclaw/pull/3474
fixes_issues: []
related_prs: [1994]
duplicate_of: null
---

## Description

## Summary
Fixes two macOS issues:
1. **Menu bar activity badge** - Wasn't showing during agent work due to missing state update
2. **Chat window crash** - Prevented crash when opening chat window

## Rebased from #1994
Previous PR was closed due to merge conflicts. This is a clean rebase on current main.

## Changes
- Fix activity badge state propagation in menu bar
- Add nil check for chat window initialization

## Testing
- Verified badge appears during agent activity
- Confirmed chat window opens without crash

## Reviews


## Comments

### @elektricM (2026-01-30)

This PR fixes #1932 (macOS menu bar shows 'Idle' during active sessions), which was recently closed for inactivity. The issue is still reproducible â€” this PR addresses it directly.

Could #1932 be reopened and linked? Thanks!


## Stats

- **Size:** medium (57+, 9-, 3 files)
- **Age:** 1 days
- **Last activity:** 2026-01-30

## Links

- Fixes: (none detected)
