---
number: 3736
title: "fix: increase Venice discovery timeout and add retry"
author: jonisjongithub
created: 2026-01-29T03:33:13Z
updated: 2026-01-29T03:33:24Z
labels: ["agents"]
additions: 81
deletions: 49
changed_files: 1
size: medium
review_decision: none
reviews: []
comments_count: 0
reactions_total: 0
ci_status: failing
mergeable: unknown
draft: false
url: https://github.com/openclaw/openclaw/pull/3736
fixes_issues: []
related_prs: []
duplicate_of: null
---

## Description

## Problem

Venice model discovery uses a 5-second `AbortSignal.timeout(5000)` with no retry. Users with slower connections or during transient Venice API blips see:

```
[venice-models] Discovery failed: TimeoutError: The operation was aborted due to timeout, using static catalog
```

While the static catalog fallback works, it means those users never get newly added Venice models until the catalog is manually updated.

## Fix

- **Increase timeout** from 5s â†’ 10s per attempt
- **Add one automatic retry** with 1s backoff before falling back to static catalog
- Extract retry logic into `fetchVeniceModelsWithRetry()` for clarity
- Constants (`DISCOVERY_MAX_ATTEMPTS`, `DISCOVERY_TIMEOUT_MS`, `DISCOVERY_RETRY_DELAY_MS`) are easy to tune later

Total worst-case discovery time: ~21s (two 10s timeouts + 1s delay), which is acceptable during startup. In practice, the Venice API responds in <300ms, so this only affects edge cases.

## Testing

- Verified Venice `/models` endpoint returns 26 models in ~287ms
- Fallback to static catalog still works when all retries fail
- Test environment skip (`NODE_ENV=test`) is preserved

## Reviews


## Comments


## Stats

- **Size:** medium (81+, 49-, 1 files)
- **Age:** 1 days
- **Last activity:** 2026-01-29

## Links

- Fixes: (none detected)
