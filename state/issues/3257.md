---
number: 3257
title: "[Feature]: Log command details for exec approval requests"
author: schickling
created: 2026-01-28T09:45:29Z
updated: 2026-01-28T15:09:11Z
labels: ["enhancement"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/3257
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

When a command requires approval via the `exec` tool, the **command itself is not logged** - only that an approval was requested and whether it timed out. This makes it impossible to audit what commands were pending approval or why they timed out.

## Current behavior

When a command is **auto-approved** (in `safeBins`), it's logged at INFO level:
```
[exec] elevated command beepctl-read search "dog walking" --limit 30
```

When a command **requires approval**, only the tool call ID and timeout are logged:
```
[DEBUG] embedded run tool start: tool=exec toolCallId=toolu_01XXX
[DEBUG] embedded run tool end: toolCallId=toolu_01XXX
... 2 minutes later ...
[INFO] exec.approval.request 120011ms conn=42e51f3d id=e2864203
```

**The actual command is never logged.**

## Expected behavior

When an exec approval is requested, log the command being requested at INFO level:
```
[exec] approval requested: rm -rf /tmp/foo (id=e2864203)
```

And when it times out or is denied:
```
[exec] approval timeout: rm -rf /tmp/foo (id=e2864203, waited=120s)
```

Or when approved:
```
[exec] approval granted: rm -rf /tmp/foo (id=e2864203)
[exec] elevated command rm -rf /tmp/foo
```

## Why this matters

1. **Auditability**: Can't review what commands were requested but not approved
2. **Debugging**: When you see approval requests in Discord/UI, you can't correlate them with logs
3. **Security**: No log trail of potentially dangerous commands that were blocked

## Environment

- Clawdbot version: 2026.1.25
- Install method: Nix (nix-clawdbot)
- Logging config: default (level: info)

## Comments


## Links

- None detected yet
