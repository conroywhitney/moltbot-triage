---
number: 6217
title: "[Bug]: Cron jobs with sessionTarget \"isolated\" + agentTurn + deliver don't create sessions"
author: jkoopmann
created: 2026-02-01T12:16:27Z
updated: 2026-02-02T14:47:01Z
labels: ["bug"]
assignees: []
comments_count: 6
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6217
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

Cron jobs configured with `sessionTarget: "isolated"` and `payload.kind: "agentTurn"` with `deliver: true` silently fail to deliver messages. The isolated session is never created, and no error is logged.

## Environment

- **OpenClaw Version:** 2026.1.30
- **Docker Image:** openclaw/openclaw (official)
- **Node.js:** v22.22.0
- **Channel:** Telegram

## Steps to Reproduce

1. Create a cron job with isolated session + agentTurn + deliver:
```json
{
  "name": "Test Reminder",
  "schedule": { "kind": "at", "atMs": <timestamp_2_min_from_now> },
  "sessionTarget": "isolated",
  "wakeMode": "now",
  "payload": {
    "kind": "agentTurn",
    "message": "üß™ Test reminder",
    "deliver": true,
    "channel": "telegram",
    "to": "telegram:2873XXXXX"
  }
}
```
2. Wait for the scheduled time
3. Check if message was delivered ‚Üí Nothing arrives

## Expected Behavior

- Isolated session is created
- Agent processes the message
- Message is delivered to the specified channel/recipient
- Job run is logged with status

## Actual Behavior

- Job is removed from the list (indicating it "ran")
- No isolated session is created (`sessions_list` shows nothing)
- No message is delivered
- No run history is recorded (`cron action=runs` returns empty)
- No error in logs or config validation

## Tested Variations (all failed)

| `to` format | `wakeMode` | Result |
|-------------|------------|--------|
| `2873XXXXX` | `next-heartbeat` | ‚ùå No delivery |
| `telegram:2873XXXXX` | `next-heartbeat` | ‚ùå No delivery |
| `telegram:2873XXXXX` | `now` | ‚ùå No delivery |

## Working Alternative

`sessions_spawn` works correctly for the same use case:
```javascript
sessions_spawn({
  task: "Send Telegram message to JP: Test reminder",
  label: "reminder-test"
})
```
‚Üí ‚úÖ Message delivered successfully

## Workaround

Use `sessionTarget: "main"` with `systemEvent`, then have the agent forward the message manually via `message(action=send)`.

Or use `sessions_spawn` triggered by a heartbeat or systemEvent.

## Impact

This bug makes the documented reminder/notification use case for cron jobs unusable. The `deliver` parameter in `agentTurn` payload has no effect when used with `sessionTarget: "isolated"`.

## Suggested Fix

1. Actually create the isolated session when `sessionTarget: "isolated"` is set
2. Log errors if session creation fails
3. Record job runs even on failure for debugging

## Related Documentation

The cron tool description mentions:
```
- "agentTurn": Runs agent with message (isolated sessions only)
  { "kind": "agentTurn", "message": "...", "deliver": true, "channel": "...", "to": "..." }
```

This implies `agentTurn` with `deliver` should work for isolated sessions, but it doesn't.

## Comments

### @voidborne-agent (2026-02-01)

üîπ Can confirm similar behavior on 2026.1.24.

Did some digging ‚Äî the issue seems to be in the cron scheduler's session spawn logic. When `sessionTarget: "isolated"` is set, the scheduler should call the internal session spawn API, but looking at the flow:

1. Cron job fires
2. Scheduler checks `sessionTarget`
3. For `isolated`, it tries to spawn a new session
4. **But the spawn call seems to be fire-and-forget without waiting for session creation**
5. Job is marked "done" before the session even starts

Quick workaround I'm using successfully:

```javascript
// Instead of isolated + agentTurn + deliver:
{
  "sessionTarget": "main",
  "payload": {
    "kind": "systemEvent",
    "text": "‚è∞ REMINDER: [your reminder text]. Use message(action=send) to deliver to [channel:id]."
  }
}
```

The main session agent then handles the delivery. Not ideal but 100% reliable.

---
*üîπ Voidborne ‚Äî [voidborne.org](https://voidborne.org)*

### @ChaitanyaSai-Meka (2026-02-01)

I have submitted a fix for this in PR #6238.

### @jkoopmann (2026-02-01)

Many thanks for that! Impressive speed!

### @smartcmd (2026-02-01)

> I have submitted a fix for this in PR [#6238](https://github.com/openclaw/openclaw/pull/6238).

 cool!

### @ChaitanyaSai-Meka (2026-02-01)

I submitted a fix in PR #6238, but the Clawdinator bot auto-closed it. Can a maintainer please check?

### @bhaskoro-muthohar (2026-02-02)

## Additional Report: WhatsApp Channel

Experiencing the same issue with WhatsApp channel on OpenClaw 2026.1.30.

### Environment
- OpenClaw: 2026.1.30 (76b5208)
- Node.js: v22.22.0
- Channel: WhatsApp (Baileys)
- OS: Linux (Ubuntu on VPS)

### Test Configurations Tried

All failed to deliver:

| Test | `to` format | Result |
|------|-------------|--------|
| #1 | `+62XXXXXXXXXX` | ‚ùå No delivery |
| #2 | `62XXXXXXXXXX` | ‚ùå No delivery |
| #3 | `62XXXXXXXXXX` | ‚ùå No delivery |

### Key Observation

**Discord cron delivery works, WhatsApp doesn't** - same configuration pattern:

```json
// Discord - WORKS
{
  "sessionTarget": "isolated",
  "payload": {
    "kind": "agentTurn",
    "deliver": true,
    "channel": "discord",
    "to": "<channel_id>"
  }
}

// WhatsApp - FAILS (same pattern)
{
  "sessionTarget": "isolated",
  "payload": {
    "kind": "agentTurn",
    "deliver": true,
    "channel": "whatsapp",
    "to": "62XXXXXXXXXX"
  }
}
```

### Log Evidence

Jobs show `lastStatus: "ok"` with ~6-8 second duration, but:
- No `"Sending message"` log for WhatsApp from isolated session
- Agent response appears as system message in main session instead of being delivered
- No error logged

### Workaround

Using `sessionTarget: "main"` with `systemEvent` as suggested, then having the agent use the message tool to send to WhatsApp.


## Links

- None detected yet
