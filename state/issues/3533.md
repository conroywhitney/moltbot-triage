---
number: 3533
title: "Broken state dir migration when both ~/.clawdbot and ~/.moltbot exist causes pairing/auth failures"
author: ngisvold
created: 2026-01-28T19:28:20Z
updated: 2026-01-28T19:28:20Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 2
url: https://github.com/moltbot/moltbot/issues/3533
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

When both ~/.clawdbot and ~/.moltbot exist, Moltbot prints:

State dir migration skipped: target already exists

but continues running. The problem is that different parts of the system read/write different directories.

Result:

Pairing appears to succeed

paired.json contains the device

But the gateway still returns:

disconnected (1008): pairing required
disconnected (1008): unauthorized


This creates a split-brain state and makes the system unusable.

Expected behavior:

Either hard fail with instructions

Or deterministically choose one directory

Or auto-merge the state dirs

At minimum, Moltbot should refuse to start if both exist.

## Comments


## Links

- None detected yet
