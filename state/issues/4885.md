---
number: 4885
title: "Google Chat: attachment send fails with 'Failed to parse URL from undefined'"
author: jorgenscheel
created: 2026-01-30T20:31:44Z
updated: 2026-01-31T02:26:59Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 1
url: https://github.com/openclaw/openclaw/issues/4885
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug Report

### Description
When an agent sends a message with a `MEDIA:` local file path via Google Chat, the attachment fails with:

```
[googlechat] Google Chat attachment send failed: MediaFetchError: Failed to fetch media from undefined: TypeError: Failed to parse URL from undefined
```

The text portion of the message appears to be sent and then deleted (user sees "Meldingen er slettet av forfatteren" / "Message deleted by the author"), suggesting the plugin sends the message, fails on the attachment, and then removes the message.

### Steps to Reproduce
1. Configure Clawdbot with Google Chat channel (HTTP endpoint mode via Cloudflare Tunnel)
2. Agent generates an image using `uv run generate_image.py` which outputs `MEDIA: /path/to/file.png`
3. Agent reply includes the MEDIA line
4. Google Chat plugin attempts to send with attachment

### Expected Behavior
The image should be attached to the Google Chat message, similar to how Slack handles local file uploads via `MEDIA:` paths.

### Actual Behavior
- Error: `MediaFetchError: Failed to fetch media from undefined: TypeError: Failed to parse URL from undefined`
- The message text is sent but then deleted
- User sees "Message deleted by the author"

### Error Log
```
2026-01-30T18:40:50.247Z [googlechat] Google Chat attachment send failed: MediaFetchError: Failed to fetch media from undefined: TypeError: Failed to parse URL from undefined
2026-01-30T18:44:16.627Z [googlechat] Google Chat attachment send failed: MediaFetchError: Failed to fetch media from undefined: TypeError: Failed to parse URL from undefined
2026-01-30T19:44:44.881Z [googlechat] Google Chat attachment send failed: MediaFetchError: Failed to fetch media from undefined: TypeError: Failed to parse URL from undefined
2026-01-30T19:45:43.486Z [googlechat] Google Chat attachment send failed: MediaFetchError: Failed to fetch media from undefined: TypeError: Failed to parse URL from undefined
```

Also: `[tools] message failed: Failed to fetch media from undefined` when using the `message` tool directly.

### Environment
- Clawdbot version: 2026.1.24-3
- Channel: Google Chat (HTTP endpoint via Cloudflare Tunnel)
- OS: macOS (Apple Silicon)
- The same `MEDIA:` paths work correctly on the Slack channel

### Notes
The URL being `undefined` suggests the local file path is not being resolved to a fetchable URL before being passed to the Google Chat media upload API. The Slack plugin likely handles this differently (direct file upload vs URL-based fetch).

## Comments


## Links

- None detected yet
