---
number: 5062
title: "TypeError: Cannot read properties of undefined (reading 'includes') in Ollama model discovery"
author: Rickyzz
created: 2026-01-31T01:08:50Z
updated: 2026-01-31T02:24:36Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/5062
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug

Sporadic `Cannot read properties of undefined (reading 'includes')` error appearing in gateway.log.

## Reproduction

Occurs intermittently during Ollama model discovery. Error logged without stack trace:

```
2026-01-31T00:41:21.760Z Cannot read properties of undefined (reading 'includes')
```

## Location

`dist/agents/models-config.providers.js` line 81:

```javascript
const isReasoning = modelId.toLowerCase().includes("r1") || modelId.toLowerCase().includes("reasoning");
```

`modelId` is derived from `model.name` which can apparently be undefined in some edge cases.

## Suggested Fix

Add a guard before accessing `.toLowerCase()`:

```javascript
const modelId = model.name ?? '';
const isReasoning = modelId.toLowerCase().includes("r1") || modelId.toLowerCase().includes("reasoning");
```

## Environment

- Clawdbot version: 2026.1.24-3
- OS: macOS arm64
- Ollama models: dolphin, qwen, deepseek-r1:7b, mistral

## Comments


## Links

- None detected yet
