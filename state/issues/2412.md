---
number: 2412
title: "Slack: Bot responses route to App Home instead of original channel when @mentioned in DMs between other users"
author: mbennett37
created: 2026-01-26T22:17:34Z
updated: 2026-01-28T06:01:56Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/2412
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

# GitHub Issue Draft: Slack Response Routing Bug

## Title
**Slack: Bot responses route to App Home instead of original channel when @mentioned in DMs between other users**

---

## Description

When the bot is @mentioned in a DM conversation between two other users (not involving the bot), the bot's response is incorrectly routed to the sender's App Home DM with the bot, rather than back to the original channel where the @mention occurred.

## Steps to Reproduce

1. Configure Slack with socket mode and `app_mention` event subscription
2. User A and User B have a DM conversation (channel type `im`, e.g., `D096JKZAR1V`)
3. User A @mentions the bot in that DM: `@Smitty can you help with X?`
4. Bot receives the `app_mention` event correctly with the channel ID
5. Bot responds

**Expected:** Bot response appears in the DM between User A and User B (channel `D096JKZAR1V`)

**Actual:** Bot response appears in the bot's App Home / direct DM with User A (a different channel)

## Evidence from Logs

Gateway logs show routing to `user:<id>` instead of `channel:<id>`:

```
[slack] delivered reply to user:U09281Y1JBS
[slack] delivered reply to user:U08MQ7EP4TA
```

When the bot delivers to `user:X`, Slack interprets this as "send to bot's DM with user X" (App Home), not "send to the channel this message came from."

## Environment

- Clawdbot version: `2026.1.24-3`
- Slack mode: Socket mode
- Event subscriptions: `app_mention` only
- Bot token scopes: `chat:write`, `im:write`, `im:read`, `im:history`, etc.

## Configuration

```json
{
  "channels": {
    "slack": {
      "mode": "socket",
      "enabled": true,
      "botToken": "xoxb-...",
      "appToken": "xapp-...",
      "groupPolicy": "open",
      "replyToMode": "all",
      "dm": {
        "enabled": true,
        "policy": "open",
        "allowFrom": ["*"]
      }
    }
  }
}
```

## Root Cause Analysis

The routing logic appears to assume that for DM contexts (`channel_type: im`), replies should go to `user:<senderId>` rather than `channel:<originalChannelId>`. This works for 1:1 bot DMs but breaks when the bot is @mentioned in a DM between two other users.

## Suggested Fix

When responding to a Slack message, always use the `channel` field from the original event rather than constructing a `user:<id>` target. The original channel ID should work for all contexts (channels, DMs, group DMs) as long as the bot has permission to post there.

## Workarounds

Currently, users can only reliably @mention the bot in:
- Public/private channels (works correctly)
- Direct DMs with the bot (works correctly)

@mentioning in DMs between other users does not work correctly.

---

## Labels
`bug`, `slack`, `routing`

## Comments

### @thewilloftheshadow (2026-01-26)

Issue slop alert :(


## Links

- None detected yet
