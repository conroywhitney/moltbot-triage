---
number: 6499
title: "Cron: 'at' schedule jobs with deleteAfterRun fire repeatedly instead of once"
author: jhacksman
created: 2026-02-01T18:37:32Z
updated: 2026-02-01T20:57:56Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6499
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug Description

`at`-schedule cron jobs with `deleteAfterRun: true` fire repeatedly on every cron tick instead of firing once and being deleted. This creates a spam storm of duplicate system events.

## Reproduction

1. Create an `at`-schedule cron job:
```json
{
  "schedule": {"kind": "at", "atMs": <past-timestamp>},
  "payload": {"kind": "systemEvent", "text": "Reminder: ..."},
  "sessionTarget": "main",
  "deleteAfterRun": true,
  "enabled": true
}
```

2. Once `atMs` passes, the job fires on every cron evaluation tick (appears to be every ~60s)
3. The job is never deleted despite `deleteAfterRun: true`
4. Disabling via the cron tool or editing `jobs.json` does not take effect until gateway restart
5. Even after gateway restart (SIGUSR1), disabled jobs continued firing for at least one more cycle

## Observed Behavior

- 3 `at`-schedule jobs produced **18+ duplicate reminder events per tick** (6× each, every ~60s)
- `deleteAfterRun: true` had no effect — jobs persisted indefinitely
- Setting `enabled: false` in `jobs.json` + gateway SIGUSR1 restart did NOT stop them
- Only fully deleting the jobs from `jobs.json` + restart stopped the spam

## Expected Behavior

- `at`-schedule jobs should fire exactly once when `atMs` is reached
- `deleteAfterRun: true` should remove the job after successful execution
- Disabling a job should take effect immediately (or after the current tick completes)
- Gateway SIGUSR1 should reload cron state from `jobs.json`

## Environment

- openclaw: latest (npm)
- macOS, LaunchAgent gateway
- Node v25.4.0

## Workaround

Manually delete the offending jobs from `~/.openclaw/cron/jobs.json` and restart the gateway.

## Comments

### @ssmirnovpro (2026-02-01)

Same here. My bot dies during the night because of too many heartbeats. I turn off checking the mail box because of it.


## Links

- None detected yet
