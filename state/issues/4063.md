---
number: 4063
title: "CRITICAL: Gateway crashes on network errors, Windows auto-start unreliable"
author: bladexpress
created: 2026-01-29T16:20:24Z
updated: 2026-01-29T16:20:24Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/4063
duplicate_of: null
related_issues: [1]
blocks: []
blocked_by: []
---

## Description

# Critical Bug Report: Gateway Crashes on Network Errors + Windows Auto-Start Issues

**Reporter:** Daniel Dvorsky (via AI assistant)
**Platform:** Windows 11 (ARM64)
**Clawdbot Version:** 2026.1.24-3 (885167d)
**Node Version:** v22.21.0
**Duration of Issue:** 4+ days of troubleshooting

---

## Executive Summary

Clawdbot gateway on Windows is **not production-ready**. The gateway crashes on any network error instead of handling it gracefully, and auto-start configuration is undocumented and unreliable. User spent 4 days troubleshooting basic functionality that should work out of the box.

---

## Bug 1: Gateway Crashes on Network Errors (CRITICAL)

### Expected Behavior
Gateway should catch network errors (e.g., fetch failures) and retry gracefully.

### Actual Behavior
Any network hiccup causes an unhandled promise rejection that kills the entire gateway process:

```
[clawdbot] Unhandled promise rejection: TypeError: fetch failed
    at node:internal/deps/undici/undici:14900:13
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
```

### Reproduction
1. Start gateway on Windows
2. Experience any network instability (WiFi reconnect, brief timeout, etc.)
3. Gateway crashes immediately

### Frequency
- Crashes every 60-90 seconds under normal use
- Crashes immediately at boot if network isn't ready yet
- User had to manually restart gateway 10+ times in one morning session

### Impact
**Gateway is unusable without constant manual supervision.**

---

## Bug 2: Windows Auto-Start Not Documented or Reliable

### Issues Encountered

1. **`clawdbot gateway install` not discoverable**
   - User tried manual scheduled task creation first
   - No documentation pointed to the built-in install command
   - Only discovered it via `clawdbot gateway status` output

2. **Scheduled task uses wrong PowerShell path**
   - Initial attempts failed because `pwsh.exe` not found
   - Windows PowerShell is at `C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe`

3. **No network readiness delay**
   - Gateway starts before WiFi connects at boot
   - First network call fails, triggering Bug #1
   - Workaround: Manually add 30-second delay to scheduled task trigger

4. **No auto-restart on crash**
   - Scheduled task only runs at login
   - If gateway crashes mid-session, user must manually restart
   - Created manual watchdog script as workaround, but it also fails

---

## Environment Details

- **OS:** Windows 11 (ARM64) build 10.0.26200
- **Device:** eBolt laptop
- **Antivirus:** Bitdefender (triggered false positive on legitimate PowerShell commands)
- **Network:** WiFi

---

## User Impact Statement

> "This utility needs to be recalled. I have been working on this since Monday. No explanation but failure and a waste of time. I will feel obligated to publish my findings and discourage usage."

The user is an executive (EVP of Strategic Development) who purchased a new laptop specifically for this use case. Four days of troubleshooting basic functionality is unacceptable for any production software.

---

## Key Error Pattern

```
{"0":"[clawdbot] Unhandled promise rejection: TypeError: fetch failed\n    at node:internal/deps/undici/undici:14900:13\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}
```

This error appears repeatedly throughout the log, each instance representing a gateway crash.

## Comments


## Links

- None detected yet
