---
number: 2855
title: "[Bug]: `clawdbot node install` fails looking for `clawdbot-gateway.service` instead of creating node service"
author: danielgines
created: 2026-01-27T16:12:54Z
updated: 2026-01-28T05:58:17Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/2855
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug Description

`clawdbot node install` fails on a remote Linux server when trying to install a headless node host as a systemd service. The installer incorrectly looks for `clawdbot-gateway.service` instead of creating a `clawdbot-node.service`.

## Steps to Reproduce

1. Set up a Linux server (Ubuntu 24.04) with Node.js 22+ and Clawdbot installed globally
2. Configure the gateway on another machine with `bind: "tailnet"` and `auth.mode: "token"`
3. On the remote server, run:
   ```bash
   CLAWDBOT_GATEWAY_TOKEN=<token> clawdbot node install --host <gateway-tailscale-ip> --port 18789
   ```

## Expected Behavior

The command should create and enable a systemd service (`clawdbot-node.service`) that runs the node host.

## Actual Behavior

```
ðŸ¦ž Clawdbot 2026.1.24-3 (885167d)
Node install failed: Error: systemctl enable failed: Failed to enable unit: Unit file clawdbot-gateway.service does not exist.
```

The installer references `clawdbot-gateway.service` instead of creating a node-specific service file.

## Environment

- **Clawdbot version:** 2026.1.24-3
- **Node.js version:** v22.x
- **OS (remote server):** Ubuntu 24.04 (Linux)
- **Shell:** fish
- **User:** root
- **Linger enabled:** yes (`loginctl enable-linger root`)

## Workaround

Manually create the systemd service:

```bash
cat > /etc/systemd/system/clawdbot-node.service << 'EOF'
[Unit]
Description=Clawdbot Node Host
After=network-online.target
Wants=network-online.target

[Service]
Type=simple
ExecStart=/usr/bin/node /usr/lib/node_modules/clawdbot/dist/entry.js node run --host <gateway-ip> --port 18789
Restart=always
RestartSec=5
Environment=CLAWDBOT_GATEWAY_TOKEN=<token>

[Install]
WantedBy=multi-user.target
EOF

systemctl daemon-reload
systemctl enable clawdbot-node
systemctl start clawdbot-node
```

## Additional Context

### Documentation inconsistencies found during troubleshooting:

1. **Gateway token not documented for node connections:** The docs show `clawdbot node run --host <gateway-host> --port 18789` without mentioning that gateways with `auth.mode: "token"` require `CLAWDBOT_GATEWAY_TOKEN` environment variable.

2. **Two pairing mechanisms documented inconsistently:**
   - `cli/node.md` says: use `clawdbot nodes pending` + `clawdbot nodes approve`
   - `nodes/index.md` says: use `clawdbot devices list` + `clawdbot devices approve`
   - Only `clawdbot devices approve` actually works for WS node pairing (as noted in the docs: "node.pair.* does **not** gate the WS connect handshake")

### Suggested fixes:

1. Fix `clawdbot node install` to create `clawdbot-node.service` instead of looking for `clawdbot-gateway.service`
2. Document the need for `CLAWDBOT_GATEWAY_TOKEN` when connecting to token-authenticated gateways
3. Clarify in `cli/node.md` that device pairing uses `clawdbot devices approve`, not `clawdbot nodes approve`

## Comments


## Links

- None detected yet
