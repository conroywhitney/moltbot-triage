---
number: 2963
title: "[Bug]: OpenRouter integration incomplete"
author: Tataku
created: 2026-01-27T21:25:51Z
updated: 2026-01-28T18:16:26Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 5
url: https://github.com/moltbot/moltbot/issues/2963
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary
OpenRouter models fail silently when tool calling is enabled. Clawdbot sends requests to OpenRouter successfully, but responses never reach the client. OpenRouter activity logs show `finish: tool_calls` but the gateway doesn't process the response.

## Steps to reproduce
1. Configure OpenRouter API key: `clawdbot models auth add` → select `openrouter` → paste API key
2. Set an OpenRouter model as default: `clawdbot models set openrouter/google/gemini-2.0-flash-exp:free`
3. Restart gateway: `clawdbot gateway restart`
4. Open WebChat and send a message
5. Observe: "thinking" indicator shows but no response is ever received

## Expected behavior
- OpenRouter model should respond to messages
- Tools should either work or gracefully degrade (respond without tools)
- If tool calling fails, user should see an error message

## Actual behavior
- Request reaches OpenRouter successfully (confirmed in OpenRouter activity dashboard)
- OpenRouter processes request and returns `finish: tool_calls` 
- Clawdbot gateway appears to receive response but client gets nothing (no error, no message)
- Anthropic models via direct API work perfectly (Claude Sonnet 4.5 confirmed working)
- Issue occurs with ALL OpenRouter models tested (Gemini 2.0 Flash, Kimi K2.5, etc.)

## Environment
- Clawdbot version: `2026.1.22 (c48751a)`
- OS: Windows 11 (10.0.26200)
- Node: v24.13.0
- Install method: npm global install
- Gateway mode: local (port 18789)

## Additional context
- OpenRouter API key is valid (has $50 in credits)
- Models show as `configured` (not `missing`) in `clawdbot models list`
- Direct Anthropic API works flawlessly with same gateway/config
- Issue appears to be related to tool/function calling format mismatch between Clawdbot and OpenRouter
- Suspected cause: Clawdbot sends Anthropic-style tool definitions, OpenRouter may use OpenAI-style format

## Comments

### @antymijaljevic (2026-01-28)

Tried to setup Kimi 2.5 model via OpenRouter provider. Getting "not whitelisted" even config is valid.


## Links

- None detected yet
