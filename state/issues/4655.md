---
number: 4655
title: "[Feature]: Sessions UI: show /new-created transcript history per sessionKey (manage old sessionIds)"
author: He-Xun
created: 2026-01-30T13:37:31Z
updated: 2026-01-30T13:46:38Z
labels: ["enhancement"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/4655
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

Title:
Sessions UI: expose per-sessionKey transcript history created by /new  /reset

Summary
In Control UI, /sessions currently lists session keys from the gateway session store ([sessions.json](https://file+.vscode-resource.vscode-cdn.net/Users/mac/.vscode/extensions/openai.chatgpt-0.4.68-darwin-arm64/webview/#)) and each sessionKey only points to the current sessionId. When a user sends /new or /reset, the gateway rotates to a new sessionId and overwrites the store entry. The previous transcript file (<oldSessionId>.jsonl) remains on disk, but is no longer referenced anywhere, so it becomes invisible to the UI/CLI.

This is hard to manage for non-technical users:

+ Old conversations are not discoverable unless you already know the old sessionId.
+ Users cannot preview / delete / archive old transcripts in the UI.
+ Users concerned about context/prompt pollution can /new to start fresh, but still cannot audit or clean up previous transcripts via the UI.

Proposed solution
Have the gateway track and expose “historical sessionIds for the same sessionKey”, and make them manageable in the Sessions UI.

Recommended approach (gateway-owned index in the store):
+ Add a bounded history field to the session store SessionEntry, e.g.:
  - previousSessionIds: string[], or
  - transcripts: { sessionId: string; startedAt?: number; endedAt?: number; reason?: string }[]
On sessions.reset (including /new//reset triggers), append the old sessionId to the history before rotating to the new sessionId.

Expose history via RPC:
either extend [sessions.list](https://file+.vscode-resource.vscode-cdn.net/Users/mac/.vscode/extensions/openai.chatgpt-0.4.68-darwin-arm64/webview/#) with includeHistory=true, or
add sessions.history (per key returns history list)

+ Update Control UI /sessions:
  - add a “History” expander per session row
  - show historical sessionIds (with timestamps / optional reason)
  - allow preview (reuse sessions.preview if applicable, or add a per-sessionId preview)
  - allow delete/archive historical transcripts without requiring users to know raw IDs

Minimal acceptance criteria:
+ After sending /new multiple times in the same DM, /sessions shows multiple historical entries under the same sessionKey.
+ Users can preview and delete/archive a historical transcript from the UI.
+ Works in remote gateway mode (UI relies on gateway RPC only; no local file scanning).

Alternatives considered
1. Maintain a separate transcript index file (e.g. [transcripts.json](https://file+.vscode-resource.vscode-cdn.net/Users/mac/.vscode/extensions/openai.chatgpt-0.4.68-darwin-arm64/webview/#) mapping sessionKey -> sessionId[])

+ Pros: keeps [sessions.json](https://file+.vscode-resource.vscode-cdn.net/Users/mac/.vscode/extensions/openai.chatgpt-0.4.68-darwin-arm64/webview/#) entries smaller

+ Cons: additional consistency surface (reset/delete/migration must update both) 
 
2. Infer history by scanning the sessions/ directory and parsing JSONL (not recommended)sessionId (UUID) is not derivable from sessionKey without additional indexing
expensive and especially problematic in remote gateway mode

Additional context
Current behavior: /new rotates sessionId for the same sessionKey and overwrites the store entry, leaving previous transcripts unindexed.
UI surface: Control UI /sessions currently focuses on “session keys and per-session overrides”, not transcript history.

## Comments


## Links

- None detected yet
