---
number: 5103
title: "ClawdBot → OpenClaw migration leaves system in broken state (dual services, port conflicts, token mismatch)"
author: tylervovan
created: 2026-01-31T02:25:12Z
updated: 2026-02-01T19:29:57Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/5103
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

After upgrading from ClawdBot to OpenClaw, the system was left in a broken state with dual services running, authentication failures, and the dashboard inaccessible. The upgrade process did not properly migrate or remove the old ClawdBot installation, causing conflicts.

## Environment

- **OS:** Linux 6.17.0-8-generic (Ubuntu)
- **Node:** v22.22.0
- **Old Package:** `clawdbot` v2026.1.24-3
- **New Package:** `openclaw` v2026.1.29

## Issues Encountered

### 1. Dual Services Running Simultaneously

Both services were running at the same time after upgrade:

```
clawdbot-gateway.service   loaded active running  Clawdbot Gateway (v2026.1.24-3)
openclaw-gateway.service   loaded active running  OpenClaw Gateway (v2026.1.29)
```

### 2. Port Conflict and Restart Loop

The old gateway process held port 18789 while the new service entered a restart loop (53+ times):

```
Gateway failed to start: another gateway instance is already listening on ws://127.0.0.1:18789
```

### 3. Authentication Token Mismatch (HTTP 401)

Each service had a different gateway token, causing clients to get 401 errors.

### 4. Both NPM Packages Remained Installed

```
/home/tyler/.npm-global/lib/node_modules/clawdbot
/home/tyler/.npm-global/lib/node_modules/openclaw
```

## Root Cause

The upgrade from ClawdBot to OpenClaw:
1. Did NOT stop the old clawdbot-gateway service
2. Did NOT disable or remove the old systemd service file
3. Did NOT uninstall the old clawdbot npm package
4. Generated a new gateway token without migrating clients

## Resolution Required

A fresh install was required. Manual cleanup needed:

```bash
systemctl --user stop clawdbot-gateway.service
pkill -f clawdbot
npm uninstall -g clawdbot
rm -f ~/.config/systemd/user/clawdbot-gateway.service
systemctl --user daemon-reload
openclaw uninstall --all --yes
curl -fsSL https://openclaw.bot/install.sh | bash
```

## Suggestions

1. **Upgrade path should handle ClawdBot migration** - stop/disable old service, uninstall old package, migrate token
2. **Pre-flight check before starting service** - detect port conflicts, other claw services running
3. **`openclaw uninstall` should detect old ClawdBot** - offer to remove old service files and package
4. **Token migration or warning** - either migrate old token or clearly warn users
5. **Documentation** - add a ClawdBot → OpenClaw migration guide

---

*Full detailed report available. Happy to provide more info.*

## Comments

### @chenyuan99 (2026-02-01)

you can try use a skill to do it, the way I do is setup the openclaw as new and use the migration skill reset up everything, I think we can consider add the skill to openclaw as a default skill https://www.clawhub.ai/chenyuan99/openclaw-migration


## Links

- None detected yet
