---
number: 6451
title: "[Bug]: Kimi K2.5 reasoning output leaking into user-visible responses"
author: coupclawbot
created: 2026-02-01T17:29:01Z
updated: 2026-02-01T20:58:06Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6451
duplicate_of: null
related_issues: [4407]
blocks: []
blocked_by: []
---

## Description

## Summary

When using Kimi K2.5 (via Ollama or Moonshot provider), internal reasoning tokens are leaking into user-visible output. The model is configured with `reasoning: false` but actually outputs reasoning content that isn't being stripped.

## Steps to reproduce

1. Configure OpenClaw to use Kimi K2.5:
   - Via Ollama: `ollama/kimi-k2.5:cloud`
   - Or via Moonshot: `kimi-k2.5`
2. Set `thinking: off` in config
3. Send any message to the agent
4. Observe reasoning tokens in output (e.g., "NoneI found...", internal analysis visible)

## Expected behavior

Reasoning tokens should be stripped from output when `thinking: off`, regardless of model config.

## Actual behavior

Internal reasoning is visible in responses. Examples from my usage:
- "NoneI found..." appearing at start of responses
- Internal analysis visible in output

## Root cause analysis

**Location:** `src/agents/models-config.providers.ts`

Current config for Kimi K2.5:
```typescript
{
  id: MOONSHOT_DEFAULT_MODEL_ID,  // "kimi-k2.5"
  name: "Kimi K2.5",
  reasoning: false,  // ‚ùå Incorrect - model DOES output reasoning
  ...
}
```

**The problem:**
1. Kimi K2.5 is marked as `reasoning: false`
2. The `reasoning-tags.ts` stripper may not be applied to "non-reasoning" models
3. Kimi outputs reasoning in a format not caught by current regex patterns

## Proposed fix

**Option 1:** Update model config
Change `reasoning: false` to `reasoning: true` for Kimi K2.5 in both:
- `models-config.providers.ts` (Moonshot provider)
- `synthetic-models.ts` (if present there)

**Option 2:** Always apply reasoning stripper
Modify output pipeline to always run `stripReasoningTagsFromText()` regardless of model's reasoning flag.

**Option 3:** Add Kimi-specific patterns
Extend `reasoning-tags.ts` to catch Kimi's specific reasoning format if it differs from `<thinking>` tags.

## Environment

- Model: `ollama/kimi-k2.5:cloud` (also affects `kimi-k2.5` via Moonshot)
- OpenClaw version: Latest main
- Config: `thinking: off`

## Related

- PR #4407 - Added Kimi K2.5 with reasoning concerns
- `reasoning-tags.ts` - Existing tag stripper module

## Would you like to submit a PR?

- [x] Yes, I can submit a PR with the fix

## Comments

### @tonimelisma (2026-02-01)

This also affects Kimi K2.5 when used through opencode zen.


## Links

- None detected yet
