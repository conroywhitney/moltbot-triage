---
number: 7408
title: "[Bug]: Isolated cron sessions route Matrix messages through wrong account"
author: saxyguy81
created: 2026-02-02T19:48:10Z
updated: 2026-02-02T19:48:10Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7408
duplicate_of: null
related_issues: [4344,5531]
blocks: []
blocked_by: []
---

## Description

## Environment
- **OpenClaw version:** 2026.1.29
- **OS:** macOS
- **Setup:** Multi-agent configuration with Matrix integration

## Description
Isolated cron sessions assigned to a specific agent route Matrix messages through the wrong account instead of the agent's bound account.

## Steps to Reproduce
1. Configure a multi-agent setup with Matrix (e.g., agents `max` and `yessica` each with their own Matrix accounts)
2. Create a cron job with:
   - `agentId: "max"`
   - `sessionTarget: "isolated"`
3. Have the cron send a Matrix message via the `message` tool with:
   - `channel: "matrix"`
   - `accountId: "max"`
4. Observe the message is sent from a different Matrix account (e.g., Yessica's account)

## Expected Behavior
Messages sent from an isolated cron session with `agentId: "max"` should use Max's Matrix account credentials, respecting both the agent binding and the explicit `accountId` parameter.

## Actual Behavior
Messages are routed through a different agent's Matrix account (e.g., Yessica's), ignoring both:
- The `agentId` specified in the cron configuration
- The `accountId` parameter in the message tool call

## Root Cause Hypothesis
Isolated cron sessions don't inherit the agent's Matrix account binding from the gateway config. The `accountId` parameter in the message tool call appears to be ignored, and the wrong account is resolved (possibly defaulting to the first available or alphabetically first account).

## Related Issues
- #4344 - AccountId missing causing wrong Telegram routing
- #5531 - Replies not routing to correct channel

This appears to be part of a broader pattern where account routing isn't properly respected in certain session contexts.

## Workaround
- Disable cron jobs that need to send Matrix messages
- Use server-side mechanisms that don't rely on the Matrix message tool

## Impact
**Severity: Medium-High**

Multi-agent Matrix setups cannot reliably use cron jobs to send messages. This breaks automation workflows where agents need to send scheduled messages from their own accounts (e.g., daily summaries, reminders, notifications).

## Comments


## Links

- None detected yet
