---
number: 5148
title: "Telegram: Messages intermittently not received (session lock timeouts + gateway restarts)"
author: Daxiongmao87
created: 2026-01-31T03:50:26Z
updated: 2026-02-02T00:20:12Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/5148
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

**Describe the bug**
Messages sent to the Telegram bot are intermittently not received by Clawdbot. The user sends a message via Telegram, but the bot never processes it - no response, no log entry of the message being received.

**To Reproduce**
- Send messages to the Telegram bot during periods of activity (agent processing responses, cron jobs running)
- Frequency: Observed multiple times per hour during active conversation + cron execution
- Pattern: Appears more common when the gateway is under load

**Expected behavior**
All messages sent to the bot should be queued and processed, even if there's a delay.

**Observed correlations**
When investigating the logs around times when messages were dropped, we consistently see one or both of:

1. **Session store lock timeout errors:**
```
{"subsystem":"gateway/channels/telegram"}","handler failed: Error: timeout acquiring session store lock: /home/patrick/.clawdbot/agents/main/sessions/sessions.json.lock"
```

2. **Telegram gateway restarts:**
```
{"subsystem":"gateway/channels/telegram"}","[default] starting provider (@username_bot)"
```

**Log examples**
Session lock timeouts observed at:
- 2026-01-31T03:10:31 (9:10 PM CT)
- 2026-01-31T03:11:58 (9:11 PM CT)
- 2026-01-31T03:16:56 (9:16 PM CT)
- 2026-01-31T03:18:00 (9:18 PM CT)
- 2026-01-31T03:22:25 (9:22 PM CT)
- 2026-01-31T03:38:58 (9:38 PM CT)
- 2026-01-31T03:40:05 (9:40 PM CT)
- 2026-01-31T03:42:23 (9:42 PM CT)

All during periods when agent runs or cron jobs were active.

Gateway restarts observed at similar intervals, sometimes correlating with dropped messages.

**Environment**
- Clawdbot version: 2026.1.24-3
- OS: Linux
- Channel: Telegram
- Concurrent activity: Active conversation + multiple M5 cron jobs

**Additional context**
- No existing queueing mechanism appears to buffer incoming messages when session lock is held
- Messages are silently dropped (handler fails, but no retry or queue)
- Possible solutions: message queue, increased lock timeout, faster lock release, or worker concurrency

## Comments


## Links

- None detected yet
