---
number: 3644
title: "[Bug]: \"v2026.1.24-3 config validator rejects apiKey field in auth.profiles and agents.defaults.models"
author: eddie6137
created: 2026-01-28T23:59:26Z
updated: 2026-01-28T23:59:26Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 3
url: https://github.com/openclaw/openclaw/issues/3644
duplicate_of: null
related_issues: [85167]
blocks: []
blocked_by: []
---

## Description

Here's what you should write in the bug report:

---

```markdown
## Summary
Config validator rejects valid `apiKey` fields in both `auth.profiles.openrouter:default` and `agents.defaults.models."openrouter/anthropic/claude-3.5-sonnet"`, preventing OpenRouter API authentication despite correct JSON structure.

## Steps to reproduce
1. Fresh install Clawdbot v2026.1.24-3 via `curl -fsSL https://clawd.bot/install.sh | bash`
2. During onboarding, select OpenRouter as provider and Claude 3.5 Sonnet as model
3. After onboarding completes, manually add API key to config file:
   ```bash
   jq '.agents.defaults.models."openrouter/anthropic/claude-3.5-sonnet".apiKey = "sk-or-v1-..." | .auth.profiles."openrouter:default".apiKey = "sk-or-v1-..."' ~/.clawdbot/clawdbot.json > /tmp/fixed.json
   mv /tmp/fixed.json ~/.clawdbot/clawdbot.json
   ```
4. Start gateway: `clawdbot daemon start`
5. Run status check: `clawdbot daemon status`

## Expected behavior
- Config validator should accept the `apiKey` field in both locations
- `clawdbot daemon status` should show "RPC probe: ok"
- Bot should authenticate with OpenRouter and respond to Telegram messages

## Actual behavior
- Config validator shows: `Invalid config at /home/moltbot/.clawdbot/clawdbot.json:\n- auth.profiles.openrouter:default: Unrecognized key: "apiKey"`
- And: `agents.defaults.models.openrouter/anthropic/claude-3.5-sonnet: Unrecognized key: "apiKey"`
- `clawdbot daemon status` shows "RPC probe: failed" with "1006 abnormal closure"
- Bot does not respond to messages due to authentication failure
- **The API keys ARE present in the file and JSON is valid** (verified with `jq` and `cat`)

## Environment
- Clawdbot version: 2026.1.24-3 (#85167d)
- OS: Ubuntu 24.04 LTS (Hostinger VPS)
- Node version: v22.22.0
- npm version: 11.8.0
- Install method: Official installer script (`curl -fsSL https://clawd.bot/install.sh | bash`)

## Logs or screenshots

**Config file structure (with redacted keys):**
```json
{
  "agents": {
    "defaults": {
      "models": {
        "openrouter/anthropic/claude-3.5-sonnet": {
          "apiKey": "sk-or-v1-[REDACTED]"
        }
      }
    }
  },
  "auth": {
    "profiles": {
      "openrouter:default": {
        "provider": "openrouter",
        "mode": "api_key",
        "apiKey": "sk-or-v1-[REDACTED]"
      }
    }
  }
}
```

**Validator output:**
```
Invalid config at /home/moltbot/.clawdbot/clawdbot.json:\n- auth.profiles.openrouter:default: Unrecognized key: "apiKey"
- agents.defaults.models.openrouter/anthropic/claude-3.5-sonnet: Unrecognized key: "apiKey"
```

**Gateway status:**
```
RPC probe: failed
gateway closed (1006 abnormal closure (no close frame)): no close reason
```

## Additional context
- The onboarding wizard never prompted for the OpenRouter API key during installation
- Environment variable `OPENROUTER_API_KEY` was also tried but still rejected
- Config validation appears to expect a different schema than what the installer creates
- JSON syntax is valid (confirmed with `jq . ~/.clawdbot/clawdbot.json`)
```

## Comments


## Links

- None detected yet
