---
number: 7119
title: "[Feature]: Add agentId to hooks.mappings for multi-agent webhook routing"
author: kubaodias
created: 2026-02-02T12:19:57Z
updated: 2026-02-02T12:19:57Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7119
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

In multi-agent setups, webhooks currently always route to the default agent regardless of the `sessionKey` configuration. There is no way to route different webhook paths to different agents.

## Current Behavior

- `hooks.mappings` supports `sessionKey` but this only sets the session name
- The actual agent processing the webhook is always the default agent (`agents.list[].default: true`)
- `bindings` only route channel messages (WhatsApp, Telegram, Slack, etc.), not webhooks

## Proposed Solution

Add an optional `agentId` field to `hooks.mappings`:

```json5
{
  hooks: {
    mappings: [
      {
        match: { path: "agent-a/incoming" },
        action: "agent",
        agentId: "agent-a",  // NEW: route to specific agent
        sessionKey: "hook:incoming"
      },
      {
        match: { path: "agent-b/incoming" },
        action: "agent",
        agentId: "agent-b",  // NEW: route to different agent
        sessionKey: "hook:incoming"
      }
    ]
  }
}
```

## Use Case

External services (SMS gateways, IoT webhooks, custom integrations) need to trigger specific agents based on the webhook path. Currently the only workaround is making the target agent the default, which breaks routing for other channels.

## Alternatives Considered

1. **Transform with redirect** - Complex and hacky
2. **Separate gateway instances** - Overkill for simple routing
3. **Make target agent default** - Breaks multi-agent channel bindings

## Additional Context

The `bindings` system already supports `agentId` for channel routing. Extending this pattern to `hooks.mappings` would provide consistent multi-agent routing across all entry points.

## Comments


## Links

- None detected yet
