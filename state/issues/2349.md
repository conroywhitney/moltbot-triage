---
number: 2349
title: "clawdhub: Missing undici dependency after global install"
author: anoop22
created: 2026-01-26T19:39:23Z
updated: 2026-01-28T06:02:25Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 1
url: https://github.com/moltbot/moltbot/issues/2349
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Description

After installing `clawdhub` globally via npm, running any command fails with a missing `undici` dependency error.

## Steps to Reproduce

1. Install clawdhub globally:
   ```bash
   npm install -g clawdhub
   ```

2. Run any command:
   ```bash
   clawdhub --help
   ```

## Expected Behavior

Command should run successfully.

## Actual Behavior

```
Error [ERR_MODULE_NOT_FOUND]: Cannot find package 'undici' imported from /home/ubuntu/.npm-global/lib/node_modules/clawdhub/dist/http.js
    at Object.getPackageJSONURL (node:internal/modules/package_json_reader:314:9)
    at packageResolve (node:internal/modules/esm/resolve:767:81)
    ...
```

## Workaround

Manually install undici in the clawdhub package directory:
```bash
cd ~/.npm-global/lib/node_modules/clawdhub && npm install undici
```

## Environment

- Node.js: v22.22.0
- clawdhub: v0.3.0
- OS: Ubuntu (EC2)

## Analysis

`undici` is listed in `package.json` dependencies but doesn't get installed during global npm install. The dependency is present in package.json:

```json
"dependencies": {
  ...
  "undici": "^7.19.1"
}
```

But the `node_modules` folder after install doesn't contain `undici`.

## Comments

### @qx54 (2026-01-27)

Issue also confirmed when installing clawdbot via `npm install -g clawdbot@latest` (before the renaming to moltbot).

Workaround when brew is installed: `cd /opt/homebrew/lib/node_modules/clawdhub && npm install -g undici ⁠`

`-g` because in my case undici ⁠ wasn't even in the package.json dependencies which is odd.



## Links

- None detected yet
