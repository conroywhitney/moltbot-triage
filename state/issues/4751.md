---
number: 4751
title: "Slack channel/user IDs incorrectly lowercased in normalizeSlackMessagingTarget()"
author: switchspan
created: 2026-01-30T16:09:27Z
updated: 2026-01-31T02:28:56Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/4751
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug Description

The `normalizeSlackMessagingTarget()` function in `src/providers/plugins/normalize-target.ts` lowercases all Slack IDs (channels, users, groups). Slack IDs are alphanumeric and **case-sensitive** (e.g., `C0ACC8J786L`), so this breaks API calls.

## Reproduction

1. Try to react to a message in a Slack channel using the message tool
2. Pass a channel ID like `C0ACC8J786L`
3. The ID gets normalized to `c0acc8j786l`
4. Slack API returns "Unknown channel"

## Root Cause

In `normalize-target.js`, every return path lowercases the entire string:

```javascript
// Line 15
return id ? `channel:${id}`.toLowerCase() : undefined;
// C0ACC8J786L â†’ channel:c0acc8j786l ðŸ’¥
```

## Suggested Fix

Remove `.toLowerCase()` from Slack ID handling, or only lowercase the prefix:

```javascript
// Option 1: Don't lowercase at all (Slack IDs are already canonical)
return id ? `channel:${id}` : undefined;

// Option 2: Only lowercase the prefix for consistency
return id ? `channel:${id}` : undefined;
```

Note: Discord's numeric IDs are unaffected by case, so this bug only manifests with Slack.

## Environment

- Clawdbot version: (installed via npm)
- Node: v22.22.0
- OS: Linux 6.8.0-90-generic (x64)

## Comments


## Links

- None detected yet
