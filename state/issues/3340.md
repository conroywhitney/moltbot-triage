---
number: 3340
title: "[Bug]:  NO_REPLY leaks into webchat responses (silent token not filtered)"
author: 26tajeen
created: 2026-01-28T13:22:52Z
updated: 2026-01-29T18:24:08Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/3340
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

Summary:
  In webchat, the internal silent token `NO_REPLY` is appearing as a visible assistant message. This should be suppressed (Clawdbot docs state it must be filtered from outgoing payloads).

  Environment:
  - Clawdbot version: 2026.1.24-3 (from config)
  - Channel: webchat
  - Model: deepseek-chat

  Expected:
  `NO_REPLY` should be treated as a silent token and never rendered in webchat output.

  Actual:
  User sees `NO_REPLY` as a visible assistant message in webchat.

  Notes / context:
  - `NO_REPLY` shows up in session transcripts (expected), but itâ€™s being delivered to the webchat UI.
  - Docs say silent replies are filtered from outgoing payloads.

  Attempted local patch (did NOT fix):
  I patched the gateway chat streamer to drop `NO_REPLY` before sending chat deltas/final:

  File: `dist/gateway/server-chat.js`

  ```js
  import { isSilentReplyText, SILENT_REPLY_TOKEN } from "../auto-reply/tokens.js";

  const emitChatDelta = (...) => {
    ...
    if (isSilentReplyText(text, SILENT_REPLY_TOKEN)) return;
    ...
  };

  const emitChatFinal = (...) => {
    const text = ...
    if (isSilentReplyText(text, SILENT_REPLY_TOKEN)) {
      broadcast("chat", { state: "final", message: undefined, ... });
      return;
    }
    ...
  };


  After restart, NO_REPLY still appeared in webchat, so the leak may occur earlier (e.g., message normalization or delivery mirror), or via a different stream.

  Logs/examples:

  - I can provide a session snippet where the assistant message is exactly "NO_REPLY".

  Request:
  Please ensure NO_REPLY is stripped from webchat outputs consistently (both streaming and final). Ideally apply the same silent-token filtering used elsewhere in the auto-reply pipeline.

## Comments

### @jleonar (2026-01-29)

Just want to add that this results in the Discord integration sending "None" messages.  NO_REPLY multiple times in the gateway chat, then in Discord, it will receive and post "None" the same amount of times.  


## Links

- None detected yet
