---
number: 3480
title: "[Bug]: Docker install => EACCES: permission denied, mkdir '/home/node'"
author: NeilSCGH
created: 2026-01-28T17:18:58Z
updated: 2026-01-29T16:17:23Z
labels: ["bug"]
assignees: []
comments_count: 12
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/3480
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary
Docker installation fails with error `Error: EACCES: permission denied, mkdir '/home/node/.clawdbot/agents/main/agent'`
Impossible to change this folder in the settings.

## Steps to reproduce
1. Follow [the doc](https://docs.molt.bot/install/docker#containerized-gateway-docker-compose), clone the repo and then run `sudo ./docker-setup.sh`
2. There is a warning here, even if it's the first time I install moltbot
```
Failed to move legacy state dir (/home/node/.clawdbot â†’ /home/node/.moltbot): Error:
EBUSY: resource busy or locked, rename '/home/node/.clawdbot' -> '/home/node/.moltbot'
```
3. Begin the setup (Yes, Quickstart, Google, Gemini API key, * enter the key *, press enter)
4. Have the fatal crash: 
```Error: EACCES: permission denied, mkdir '/home/node/.clawdbot/agents/main/agent'```

## Notes
- Using `Manual` instead of `Quickstart` and setting the `Workspace Directory` to `/home/neil/clawd` doesn't change anything
- I've also tried to create the `/home/node/.clawdbot/agents/main/agent'` folder but it doesn't help (maybe it's the path inside the container? but I don't think so)

## Expected behavior
Not using the /home/node folder that doesn't exists

## Actual behavior
Use the /home/neil folder that I asked for

## Environment
- Clawdbot version: last version (2026-01-28)
- OS: Linux Ubuntu 24.04.3 LTS
- Install method (pnpm/npx/docker/etc): docker

## Logs or screenshots
With quickstart
<img width="890" height="600" alt="Image" src="https://github.com/user-attachments/assets/418abe19-d25c-49c5-a792-e57dc1e25a5c" />
With manual
<img width="895" height="500" alt="Image" src="https://github.com/user-attachments/assets/87b7f930-91a4-4646-982f-293bbf6dd464" />

## Comments

### @ggilestro (2026-01-28)

I think the volumes in the `docker-compose.yml` needs to be updated to reflect the new name.

```
      - ${CLAWDBOT_CONFIG_DIR}:/home/node/.moltbot
      - ${CLAWDBOT_WORKSPACE_DIR}:/home/node/moltd
```


### @NeilSCGH (2026-01-28)

Hello,

Thanks for the pull request @Suksham-sharma, but it seems that it doesn't fix my issue.
I've made the same changes as your PR on my docker-compose.yml file, but I still have the same error.

Edit:
I've just noticed that I've mixed up the two folder, `/home/node/clawd` is in the container and is mapped to `/root/clawd` on the host (and same for `.clawdbot`). But the container doesn't have write access in `/root`.

### @NeilSCGH (2026-01-28)

Here is the fix:

As said in `docs/platform/hetzner.md`:
```bash
mkdir -p /root/.clawdbot
mkdir -p /root/clawd

# Set ownership to the container user (uid 1000):
chown -R 1000:1000 /root/.clawdbot
chown -R 1000:1000 /root/clawd
```

I think this should be added in the doc, or automated in the `doccker-setup.sh` file.

### @Suksham-sharma (2026-01-28)

  Thanks for debugging this further @NeilSCGH!

  The MOLTBOT_STATE_DIR fix was working on my end (macOS with OrbStack).

  I've updated the PR to also add chown commands in docker-setup.sh.

### @NeilSCGH (2026-01-28)

Just tested your solution and it works fine!

Thanks for the quick fix ğŸ¥‡ 

### @jero-at-github (2026-01-29)

Hi, thank you for the solution, it works now in my VPS, however the moltbot-cli container doesn't keep alive after a docker compose up -d, is this expected?

### @ggilestro (2026-01-29)

In my case the two containers could not see each other due to network isolation. Adding `network_mode: host` to both containers in the `docker-compose.yml` is the easiest way to solve that. The host will expose all the relevant ports obviously.

### @Suksham-sharma (2026-01-29)

  Yes, this is expected. The `moltbot-cli` container is for one-off CLI commands, not a persistent
  service â€” only `moltbot-gateway` runs continuously.

  Use it like this:
  ```bash
  docker compose run --rm moltbot-cli <command>
```

If you're having issues with the CLI connecting to the gateway (network errors), see @ggilestro's solution or you can configure     gateway.remote.url 

### @angangang-660 (2026-01-29)

è¿™æ˜¯æ¥è‡ªQQé‚®ç®±çš„å‡æœŸè‡ªåŠ¨å›å¤é‚®ä»¶ã€‚ä½ å¥½ï¼Œæˆ‘æœ€è¿‘æ­£åœ¨ä¼‘å‡ä¸­ï¼Œæ— æ³•äº²è‡ªå›å¤ä½ çš„é‚®ä»¶ã€‚æˆ‘å°†åœ¨å‡æœŸç»“æŸåï¼Œå°½å¿«ç»™ä½ å›å¤ã€‚

### @jeroenev (2026-01-29)

It still doesn't completely work for me after the fix from the PR, few issues still remain:
first it fails to install skills:
```
â—‡  Install missing skill dependencies
â”‚  ğŸ§© clawdhubâ”‚
â—‡  Install failed: clawdhub â€” ? Do you want to continue? [Y/n]
! Corepack is about to download https://registry.npmjs.org/pnpm/-/pnpm-10.23.0.tgz
? Do you want to continue? [Y/n]
Tip: run `moltbot doctor` to review skills + requirements.
Docs: https://docs.molt.bot/skills
```
then it doesn't install user services:
```
â—‡  Systemd â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                         â”‚
â”‚  Systemd user services are unavailable. Skipping lingering checks and service install.  â”‚
â”‚                                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```
And the gateway doesn't start:
```
Health check failed: gateway closed (1006 abnormal closure (no close frame)): no close reason
  Gateway target: ws://127.0.0.1:18789
  Source: local loopback
  Config: /home/node/.clawdbot/moltbot.json
  Bind: loopback
```

### @ggilestro (2026-01-29)

That probably refers to the issue I was mentioning before. The gateway is configured to bind to loopback (127.0.0.1) but the port is served by the `moltbot-gateway ` container which `moltbot-cli` does not know how to access. The easiest solution, at least on linux, is to configure `network_mode: host` in the `docker-compose.yml` for both containers.

The alternative would be to refer to each other via their container names.

### @jeroenev (2026-01-29)

aha thanks! something like this should probably also be added to the docker-setup.sh script


## Links

- None detected yet
