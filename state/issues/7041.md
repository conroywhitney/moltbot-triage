---
number: 7041
title: "[Bug]: main branch build broken - pi-tool-definition-adapter signature mismatch"
author: wakingcan
created: 2026-02-02T10:05:05Z
updated: 2026-02-02T20:00:43Z
labels: []
assignees: []
comments_count: 2
reactions_total: 1
url: https://github.com/openclaw/openclaw/issues/7041
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Description
After pulling latest main (d5f6caba3), the build fails with TypeScript errors.

## Error Output
```
src/agents/pi-tool-definition-adapter.ts(32,3): error TS2322
src/agents/pi-tool-definition-adapter.ts(40,7): error TS2322  
src/agents/pi-tool-definition-adapter.ts(48,57): error TS2345
src/agents/pi-tool-definition-adapter.ts(50,23): error TS2551
src/agents/pi-tool-definition-adapter.ts(83,3): error TS2322
src/agents/pi-tool-definition-adapter.ts(91,7): error TS2322
src/agents/pi-embedded-runner/compact.ts(403,51): error TS2345
```

## Root Cause
The `execute` function signature has changed - the `signal` and `onUpdate` parameters appear to have swapped positions, but `pi-tool-definition-adapter.ts` wasn't updated to match.

From the error:
> Types of parameters 'onUpdate' and 'signal' are incompatible.
> Type 'AbortSignal | undefined' is not assignable to type 'AgentToolUpdateCallback'

## Environment
- Commit: d5f6caba3
- Node: v25.4.0
- OS: macOS (arm64)

## Steps to Reproduce
1. Clone/pull latest main
2. Run `npm run build`
3. Observe TypeScript errors

This appears to be introduced in recent commits affecting pi-tools.

## Comments

### @asil-ea (2026-02-02)

Running into same error when tried to initialize with Docker. This commit may have fixed it, can you verify? 9ae1b732ef69ba880fa681fa41d9d788691b34c8

### @wakingcan (2026-02-02)

Verified! âœ…

Pulled commit 9ae1b732e and build succeeds now. Thank you @asil-ea for the pointer.

Gateway restarted successfully on my end.


## Links

- None detected yet
