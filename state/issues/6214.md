---
number: 6214
title: "[Bug]: openclaw update reports \"No plugin updates needed\" while npm-installed plugins require update"
author: dial481
created: 2026-02-01T12:09:06Z
updated: 2026-02-01T12:22:40Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6214
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

openclaw update reports "No plugin updates needed" even when  npm-isntalled  plugins have updates available.                      

What went wrong?

An outdated plugin was not updated.

## Steps to reproduce

  1. Install a plugin from npm: openclaw plugins install                                                           
  2. Wait for new version to be published (e.g., 1.0.1 → 1.0.2)                                                                        
  3. Run openclaw update                                                                                                               
  4. Observe: "No plugin updates needed"                                                                                               
  5. Run openclaw plugins update --dry-run --all                                                                                       
  6. Observe: correctly shows update available      

  Config excerpt:                                                                                                                      
  "installs": {                                                                                                                        
    "{plugin}": {                                                                                                             
      "source": "npm",                                                                                                                 
      "spec": "{plugin}",                                                                                                     
      "version": "1.0.1"                                                                                                               
    }                                                                                                                                  
  }      

## Expected behavior

openclaw update should update outdated plugins.

## Actual behavior

Plugin was not updated.

## Environment

- Clawdbot version: 2026.1.29 → 2026.1.30 update
- OS: Linux (Debian 12)
- Install method: npm -g originally, openclaw update for subsequent updates 

## Workaround 

openclaw plugins update --all

## Comments

### @dial481 (2026-02-01)

## Root Cause Analysis

After tracing through the source, the bug is in `src/cli/update-cli.ts`.

### The Problem

**`openclaw plugins update --all` (works):**

```typescript
// plugins-cli.ts:473-488
const cfg = loadConfig();
const installs = cfg.plugins?.installs ?? {};
const targets = opts.all ? Object.keys(installs) : [id];

await updateNpmInstalledPlugins({
  config: cfg,
  pluginIds: targets,  // ← Explicit IDs passed
});
```

**`openclaw update` (broken):**

```typescript
// update-cli.ts:880-892
const syncResult = await syncPluginsForUpdateChannel({
  config: activeConfig,
  channel,
  ...
});
let pluginConfig = syncResult.config;

await updateNpmInstalledPlugins({
  config: pluginConfig,
  skipIds: new Set(syncResult.summary.switchedToNpm),
  // ← NO pluginIds - relies on Object.keys(config.plugins?.installs)
});
```

`syncPluginsForUpdateChannel()` only iterates over bundled plugins. External npm-installed plugins (like third-party plugins) are skipped in the loop, and somewhere in the config transformation, `plugins.installs` for external plugins is not being preserved in `syncResult.config`.

When `updateNpmInstalledPlugins()` falls back to `Object.keys(installs)`, it gets an empty array.

### Proposed Fix

Extract npm plugin IDs from the original config before the sync step:

```typescript
// update-cli.ts ~line 880
const originalInstalls = activeConfig?.plugins?.installs ?? {};
const npmPluginIds = Object.keys(originalInstalls).filter(
  id => originalInstalls[id]?.source === "npm"
);

const syncResult = await syncPluginsForUpdateChannel({ ... });
let pluginConfig = syncResult.config;

const npmResult = await updateNpmInstalledPlugins({
  config: pluginConfig,
  pluginIds: npmPluginIds,  // ← ADD THIS
  skipIds: new Set(syncResult.summary.switchedToNpm),
  logger: pluginLogger,
});
```

This mirrors how `plugins-cli.ts` handles it and ensures external plugins are included.


## Links

- None detected yet
