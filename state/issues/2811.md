---
number: 2811
title: "Gateway crashes when all auth profiles enter cooldown (failover exhaustion)"
author: yeHHH1g
created: 2026-01-27T15:04:40Z
updated: 2026-01-28T05:58:39Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/2811
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Description

The gateway process exits with status 1 when all configured auth profiles are in cooldown or unavailable, instead of waiting and retrying.

## Observed Behavior

- Anthropic API timed out (600s), all auth profiles entered cooldown
- Failover to Google/Gemini failed (no API key configured)
- Gateway exited with code 1
- systemd restarted it, same sequence repeated
- Result: 508 restarts over ~10 hours of unattended downtime

## Expected Behavior

Gateway should not crash when all providers are temporarily unavailable. It should log the error, wait for cooldown to expire, and retry.

## Logs

```
03:22:44 [diagnostic] lane task error: FailoverError: LLM request timed out. (600336ms)
03:22:44 [diagnostic] lane task error: FailoverError: No available auth profile for anthropic (all in cooldown)
03:22:44 [diagnostic] lane task error: FailoverError: No API key found for provider google
03:39:18 systemd: clawdbot.service: Main process exited, code=exited, status=1/FAILURE
...508 restarts over 10 hours...
14:21:14 systemd: restart counter is at 508
```

## Environment

- Clawdbot 2026.1.24-3 / Node 22.22.0 / Ubuntu Linux
- Single anthropic API key, fallbacks: sonnet-4-5, haiku, gemini-3-pro (no Google key)

## Comments

### @henrybottter (2026-01-27)

## Windows data supporting this report

We experienced exactly this pattern on Windows 10 (Clawdbot 2026.1.24-3, Node v24.13.0):

- **5+ gateway crashes** in a single day (Jan 27, 2026)
- **484 second queue backup** during rate limit cascade
- **4 messages queued** while auth failover was recovering
- PID changed 6 times: 38228→25144→15592→9692→4304→12856

The crash cascade was triggered by Docker Desktop/WSL2 installation corrupting npm global packages, but the auth failover behavior made recovery significantly harder — each restart hit rate limits from the previous session's queued messages.

Confirming this is a real production issue on Windows.


## Links

- None detected yet
