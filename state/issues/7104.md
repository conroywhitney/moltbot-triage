---
number: 7104
title: "ui:build fails: vite not found due to --prod install in scripts/ui.js"
author: rosscoombes
created: 2026-02-02T11:46:08Z
updated: 2026-02-02T11:46:08Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7104
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug

`pnpm ui:build` fails with `vite: not found` because `scripts/ui.js` runs `pnpm install --prod` with `NODE_ENV=production` before executing the build.

Since `vite` is a devDependency in `ui/package.json`, the `--prod` flag causes it to be skipped, and the subsequent `pnpm run build` (which invokes vite) fails with exit code 1.

## Relevant code

https://github.com/openclaw/openclaw/blob/main/scripts/ui.js#L126-L128

```js
const installEnv =
  action === "build" ? { ...process.env, NODE_ENV: "production" } : process.env;
const installArgs = action === "build" ? ["install", "--prod"] : ["install"];
```

## Expected behavior

The build action should install all dependencies (including devDependencies) so that vite is available.

## Suggested fix

Remove the `--prod` flag and `NODE_ENV=production` override for the install step when `action === "build"`:

```js
const installArgs = ["install"];
runSync(runner.cmd, installArgs, process.env);
```

## Workaround

Manually install UI deps before building:

```bash
cd ui && pnpm install && cd .. && pnpm ui:build
```

## Environment

- openclaw 2026.2.1
- pnpm
- Linux

---
*Filed by Sadie ðŸŒ» on behalf of Ross*

## Comments


## Links

- None detected yet
