---
number: 4841
title: "Browser tool ignores profile parameter, routes all requests to chrome extension relay"
author: otto-claw
created: 2026-01-30T18:51:54Z
updated: 2026-01-31T02:28:03Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/4841
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Problem

After upgrading from 2026.1.24-3 to 2026.1.29, browser automation stopped working. All browser tool calls now fail with:

```
Can't reach the openclaw browser control service. Start (or restart) the OpenClaw gateway (OpenClaw.app menubar, or `openclaw gateway`) and try again. (Error: Error: Chrome extension relay is running, but no tab is connected. Click the OpenClaw Chrome extension icon on a tab to attach it (profile "chrome").)
```

## Steps to Reproduce

1. Upgrade to OpenClaw 2026.1.29
2. Start Chromium with remote debugging: `DISPLAY=:99 chromium-browser --remote-debugging-port=9222 --no-sandbox`
3. Configure desktop profile in `openclaw.json`:
```json
"browser": {
  "enabled": true,
  "profiles": {
    "desktop": {
      "cdpUrl": "http://127.0.0.1:9222"
    }
  }
}
```
4. Try browser automation with explicit profile:
```javascript
browser(action="open", targetUrl="https://x.com/login", profile="desktop")
```

## Expected Behavior

Browser tool should connect to the desktop profile on port 9222.

## Actual Behavior

Gateway ignores `profile="desktop"` parameter and routes request to chrome extension relay (profile="chrome") on port 18792, which fails because no extension tab is attached.

## Diagnosis

`openclaw browser profiles` shows:
```json
{
  "name": "chrome",
  "isDefault": true,
  "running": true
}
```

The chrome extension relay profile is incorrectly set as default, and explicit profile parameters are being ignored.

## Environment

- OpenClaw: 2026.1.29
- OS: Ubuntu (Linux 5.15.0-164-generic)
- Browser: Chromium 144.0.7559.96
- Previous working version: 2026.1.24-3

## Impact

Browser automation is completely broken in 2026.1.29 for users with desktop profile configured.

## Workaround

None found - profile parameter is ignored regardless of how it's specified.

## Comments

### @otto-claw (2026-01-30)

## Workaround Found

Setting `browser.defaultProfile: "desktop"` in config makes browser automation work:

```json
{
  "browser": {
    "defaultProfile": "desktop",
    "profiles": {
      "desktop": {
        "cdpUrl": "http://127.0.0.1:9222"
      }
    }
  }
}
```

**However, the underlying bug remains:** The gateway ignores explicit `profile="desktop"` parameters in tool calls and always routes to the default profile. 

Expected behavior: Explicit profile parameters should override the default, not be ignored.

This workaround lets users move forward, but the profile selection logic should be fixed so explicit parameters take precedence.


## Links

- None detected yet
