---
number: 7125
title: "completion command outputs log messages to stdout, causing 'command not found' errors in shell completion"
author: shipinliang
created: 2026-02-02T12:29:23Z
updated: 2026-02-02T12:29:23Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7125
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description


## Problem Description

The `openclaw completion --shell bash` command outputs log messages to **stdout** instead of **stderr**, which causes shell completion to fail with "command not found" errors.

When the completion script is sourced in `.bashrc` like this:
```bash
source <(openclaw completion --shell bash)
```

The actual output includes a log line at the beginning:
```
[plugins] feishu_doc: Registered 10 document tools

_openclaw_completion() {
    // ... actual completion script ...
}
```

Bash tries to execute `[plugins] feishu_doc: Registered 10 document tools` as a command, but since there's no command named `plugins`, it throws:
```
[plugins]: command not found
```

## Expected Behavior

The `completion` command should only output the pure completion script to stdout, and any log/debug messages should go to stderr.

## Current Workaround

Users have to filter out the first line manually:
```bash
source <(openclaw completion --shell bash | tail -n +2)
```

## Root Cause

In `/dist/cli/completion-cli.js`, the `registerCompletionCli` function calls `registerSubCliByName` for all subcommands, which triggers plugin loading and logging. These log messages are written to stdout via `console.log()` instead of `console.error()`.

## Environment

- OpenClaw version: 2026.1.30
- OS: Ubuntu (WSL2)
- Shell: bash

## Steps to Reproduce

1. Add `source <(openclaw completion --shell bash)` to `.bashrc`
2. Open a new terminal or run `source ~/.bashrc`
3. Observe the error: `[plugins]: command not found`

## Proposed Fix

Modify the plugin loading/logging system to ensure that all non-completion-script output goes to stderr (`console.error()`) instead of stdout (`console.log()`).

Alternatively, modify the completion command to suppress all logging during completion script generation.

## Comments


## Links

- None detected yet
