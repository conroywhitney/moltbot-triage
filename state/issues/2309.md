---
number: 2309
title: "Browser tool output leaks to Telegram channel during execution"
author: tuomashietala
created: 2026-01-26T17:46:08Z
updated: 2026-01-28T06:02:56Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/2309
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug Description

When using the browser tool (headless Chrome) with Telegram channel, internal tool call outputs (snapshot IDs, click actions, navigation commands) are being streamed/posted to the Telegram chat instead of only the final assistant response.

## Expected Behavior
Only the assistant's final text response should appear in Telegram. Internal tool calls and their outputs should remain hidden from the user.

## Actual Behavior
Raw browser commands appeared in Telegram:
- Browser action: open/navigate URLs
- Snapshot IDs like `38B6B24D6BAC8FE304C784F3FB2E8DB8`
- Click actions and navigation logs

## Environment
- Clawdbot version: 2026.1.23-1
- Channel: Telegram
- Browser config: headless=true, defaultProfile=clawd
- OS: Linux (headless server)

## Steps to Reproduce
1. Enable browser tool with headless mode
2. From Telegram, ask agent to search Google Maps
3. Agent uses browser tool (open, snapshot, click, etc.)
4. Internal tool outputs appear in Telegram chat

## Notes
- No debug/verbose flags were enabled in config
- Final response (cafe list) was correct, but preceded by all the internal operations

## Comments

### @abhijitsingh10 (2026-01-26)

> Root Cause (Why this is happening)

This telegram integration is streaming everything the agent emits, including:

Intermediate tool calls (browser.open, click, snapshot)

Tool responses (snapshot IDs, navigation logs)

Final assistant message

In Clawdbot, browser tools are not “silent” by default. If the transport layer (Telegram adapter) does not explicitly filter message types, it will forward all frames instead of just the final assistant output.

So this is not a browser bug — it’s a message routing / output filtering issue in the Telegram channel adapter.

> Fix in Telegram Channel Adapter (RECOMMENDED)

> In your Telegram send pipeline, filter messages like this:

> Not Current (buggy)
sendToTelegram(message.content)

> Correct
if (message.role === "assistant" && message.type === "final") {
  sendToTelegram(message.content)
}


> OR if your system doesn’t split type, then:

if (message.role === "assistant" && !message.tool_calls) {
  sendToTelegram(message.content)
}


## Links

- None detected yet
