---
number: 5590
title: "Audio transcription includes raw binary attachment as text in 2026.1.30"
author: OmarNassar1127
created: 2026-01-31T17:49:48Z
updated: 2026-02-02T00:18:34Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 1
url: https://github.com/openclaw/openclaw/issues/5590
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Description
After upgrading to 2026.1.30 from 2026.1.24-3, voice memo transcriptions now include the raw audio file binary data in the context window, displayed as garbage/Chinese characters.

## Expected behavior
Per docs: 'On success, it replaces Body with an `[Audio]` block and sets `{{Transcript}}`'

Only the transcript should appear in context.

## Actual behavior
The transcription works correctly, BUT the raw audio file is ALSO included with `mime="text/plain"`, causing the binary data to render as garbage text:

```
<file name="file_95---...ogg" mime="text/plain">
杏卧Ȁ퍀ഈ햄ጁ灏獵效摡āĸ뮀伀杧S...
```

## Impact
- Blows out context window with garbage tokens on every voice memo
- Didn't happen in 2026.1.24-3 (regression)

## Config
Using Whisper CLI transcription:
```json
"audio": {
  "enabled": true,
  "models": [{
    "type": "cli",
    "command": "python3",
    "args": ["-m", "whisper", "{{MediaPath}}", "--model", "base", "--output_format", "txt", "--output_dir", "/tmp"],
    "timeoutSeconds": 90
  }]
}
```

## Environment
- OpenClaw: 2026.1.30
- Channel: Telegram
- Node: v24.13.0
- macOS (arm64)

## Comments

### @OmarNassar1127 (2026-01-31)

This is a duplicate of #5552 — same root cause.

**TL;DR:** `resolveUtf16Charset()` in `media-understanding/apply.js` detects OGG/Opus binary as UTF-16 (due to null byte frequency), so the audio file bypasses the skip guard and gets injected as garbage text.

**One-liner fix** (line ~177 in `dist/media-understanding/apply.js`):

```diff
- if (!forcedTextMimeResolved && kind === "audio" && !textLike) {
+ if (!forcedTextMimeResolved && kind === "audio") {
```

Remove the `&& !textLike` condition. Audio files without a forced text MIME should always be skipped in file extraction — the transcription pipeline handles them separately.

See full explanation: #5552


## Links

- None detected yet
