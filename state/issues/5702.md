---
number: 5702
title: "Bug: Transcript file not being written for multi-agent DM sessions"
author: schergr
created: 2026-01-31T21:23:33Z
updated: 2026-02-02T00:18:10Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/5702
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Environment
- OpenClaw 2026.1.29 (a5b4d22)
- Node v22.22.0
- Linux arm64 (Raspberry Pi)
- Multi-agent setup with 4 agents

## Description
One agent's DM session (`agent:work:main`) completed 53 API runs over ~4.5 hours, but only 1 message was ever written to the transcript file. The agent had no memory of prior conversation turns.

## Evidence
- Session file created: 16:40:07
- 53 `embedded run done` entries in logs for this sessionId
- Transcript file only contains 1 message (2,157 bytes)
- Other agents on same gateway have proper transcripts (43KB+)
- `cacheRead: 13440` shows API was receiving context (from Anthropic prompt cache), but local transcript wasn't being appended

## Expected Behavior
All user messages and assistant responses should be appended to the session's `.jsonl` transcript file.

## Actual Behavior
Only 1 message was written. Agent had no persistent memory between turns.

## Reproduction
- Multi-agent config with separate workspaces
- DM sessions (`agent:<name>:main`) vs group sessions (`agent:<name>:discord:channel:<id>`)
- Group sessions work fine; DM session transcript writing is broken

## Workaround
Delete the broken session file and restart gateway:
```bash
rm ~/.openclaw/agents/<agent>/sessions/<sessionId>.jsonl
openclaw gateway restart
```

## Comments


## Links

- None detected yet
