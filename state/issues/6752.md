---
number: 6752
title: "Feature Request: message:received hook for pre-processing model selection"
author: gginesta
created: 2026-02-02T01:22:21Z
updated: 2026-02-02T02:57:39Z
labels: ["enhancement"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6752
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Problem

Currently, there's no way to dynamically select which model handles a message based on the message content. Every message goes to the configured primary model, which:

1. **Wastes rate limits** on simple tasks (e.g., "hello" uses Opus)
2. **Prevents cost optimization** (can't route simple tasks to cheap models)
3. **Limits multi-tier architectures** (like the tiered model strategy popularized by @code_rams)

## Proposed Solution

Add a `message:received` hook that fires **before** the message is processed by the agent, allowing hooks to:

1. Inspect the incoming message content
2. Set a model override for this specific message
3. Optionally transform the message

## Example Use Case

```typescript
// hooks/task-router/handler.ts
const handler: HookHandler = async (event) => {
  const message = event.context.messageContent;
  
  // Simple keyword-based routing
  const complexKeywords = ['code', 'debug', 'plan', 'analyze', 'think hard'];
  const isComplex = complexKeywords.some(k => message.toLowerCase().includes(k));
  
  if (isComplex) {
    event.context.modelOverride = 'anthropic/claude-opus-4-5';
  } else {
    event.context.modelOverride = 'google/gemini-2.5-flash';
  }
};
```

## Benefits

- **Cost optimization:** Route 80% of messages to cheap models
- **Rate limit preservation:** Save premium models for complex tasks
- **Flexibility:** Users can implement their own routing logic
- **No breaking changes:** Existing setups continue to work

## Notes

This was listed as a "Future Event" in the hooks documentation. Would love to see it prioritized!

---

*Submitted via OpenClaw assistant (Molty)*

## Comments


## Links

- None detected yet
