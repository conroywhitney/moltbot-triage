---
number: 4344
title: "Native command replies route to default Telegram account when AccountId missing from context"
author: TheMattBerman
created: 2026-01-30T03:45:19Z
updated: 2026-01-31T02:32:12Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/4344
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug Description

When using multiple Telegram bot accounts bound to different agents, native slash commands (like `/reset`, `/new`) send their confirmation messages to the **default account** instead of the account that received the command.

## Reproduction Steps

1. Configure multiple Telegram bot accounts with bindings to different agents:
```json
"accounts": {
  "default": { "name": "Jean Luc", "botToken": "..." },
  "stealads-builder": { "name": "StealAds Builder", "botToken": "..." }
},
"bindings": [
  { "agentId": "stealads-builder", "match": { "channel": "telegram", "accountId": "stealads-builder" } }
]
```

2. Send `/reset` to the `stealads-builder` bot (non-default account)
3. **Expected:** Only stealads-builder responds with "✅ New session started"
4. **Actual:** Both stealads-builder AND the default bot respond with "✅ New session started"

## Root Cause

In `src/telegram/bot-native-commands.ts`, the `ctxPayload` passed to `finalizeInboundContext` is missing the `AccountId` field:

```typescript
const ctxPayload = finalizeInboundContext({
    // ... other fields
    OriginatingChannel: "telegram",
    OriginatingTo: \`telegram:\${chatId}\`,
    // AccountId is MISSING!
});
```

When `get-reply-run.ts` sends the reset confirmation via `routeReply`:
```typescript
await routeReply({
    accountId: ctx.AccountId,  // undefined!
    // ...
});
```

The undefined `accountId` flows through to `resolveTelegramAccount({ accountId: undefined })`, which returns the DEFAULT account due to `normalizeAccountId()` returning `"default"` for falsy values.

## Fix

Add `AccountId: accountId` to the context payload in `bot-native-commands.ts` (around line 242):

```typescript
const ctxPayload = finalizeInboundContext({
    // ... existing fields
    OriginatingChannel: "telegram",
    OriginatingTo: \`telegram:\${chatId}\`,
    AccountId: accountId,  // ADD THIS LINE
});
```

The `accountId` variable is already available in scope from the function parameters.

## Verified Fix

We manually patched `dist/telegram/bot-native-commands.js` and confirmed the fix works - after adding `AccountId: accountId`, the cross-account message routing no longer occurs.

## Environment

- Clawdbot version: 2026.1.24-3
- Multiple Telegram accounts configured with agent bindings
- WSL2 Ubuntu

## Workaround

Manually patch `dist/telegram/bot-native-commands.js` line ~242 to add `AccountId: accountId,` after the `OriginatingTo` line, then restart the gateway.

## Comments


## Links

- None detected yet
