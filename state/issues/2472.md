---
number: 2472
title: "OpenAI batch embeddings failing: completion_window and request_params API changes"
author: natescherer01
created: 2026-01-27T00:45:02Z
updated: 2026-01-28T06:01:24Z
labels: ["enhancement"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/2472
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Description

OpenAI batch embeddings are failing with 422 errors due to API changes:

```
openai batch create failed: 422 {"detail":[
  {"type":"enum","loc":["body","completion_window"],"msg":"Input should be '12h'","input":"24h",...},
  {"type":"missing","loc":["body","request_params"],"msg":"Field required",...}
]}
```

## Issues

1. `completion_window` is being set to `'24h'` but OpenAI now only accepts `'12h'`
2. `request_params` field is now required but not being sent

## Behavior

After 2 failures, batch mode is disabled and falls back to non-batch embeddings (which works, but is slower).

## Version

clawdbot 2026.1.24-3

## Logs

```
00:40:57 [memory] embeddings: openai batch failed (1/2); keeping batch enabled; falling back to non-batch embeddings
00:41:15 [memory] embeddings: openai batch failed (2/2); disabling batch; falling back to non-batch embeddings
```

## Comments


## Links

- None detected yet
