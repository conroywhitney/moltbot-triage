---
number: 7194
title: "[BUG] TimeoutOverflowWarning in waitForSubagentCompletion with sub-agent spawn"
author: zote
created: 2026-02-02T14:48:56Z
updated: 2026-02-02T15:38:29Z
labels: []
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7194
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug Description

When spawning a sub-agent with no timeout (`runTimeoutSeconds: 0`), the system uses a 30-day timeout value (2,592,000,000ms) which exceeds Node.js's 32-bit signed integer limit for `setTimeout`, causing a `TimeoutOverflowWarning` and the timeout to be reset to 1ms.

### Stack Trace
```
TimeoutOverflowWarning: 2592010000 does not fit into a 32-bit signed integer. Timeout duration was set to 1.
    at new Timeout (node:internal/timers:188:17)
    at setTimeout (node:timers:117:19)
    at file:///opt/homebrew/lib/node_modules/openclaw/dist/gateway/call.js:178:23
    at callGateway (file:///opt/homebrew/lib/node_modules/openclaw/dist/gateway/call.js:122:18)
    at waitForSubagentCompletion (file:///opt/homebrew/lib/node_modules/openclaw/dist/agents/subagent-registry.js:276:28)
    at registerSubagentRun (file:///opt/homebrew/lib/node_modules/openclaw/dist/agents/subagent-registry.js:271:10)
    at execute (file:///opt/homebrew/lib/node_modules/openclaw/dist/agents/tools/sessions-spawn-tool.js:216:13)
```

### Root Cause

In `dist/agents/timeout.js`, line 18:
```javascript
const NO_TIMEOUT_MS = 30 * 24 * 60 * 60 * 1000; // 2,592,000,000ms
```

This value exceeds the Node.js `setTimeout` maximum of 2,147,483,647ms (~24.85 days). When this timeout is passed to `callGateway`, the additional buffer (+10,000ms) makes it even larger (2,592,010,000ms), triggering the overflow warning.

### Impact

- Sub-agents spawned with `runTimeoutSeconds: 0` (meaning "no timeout") effectively timeout almost immediately (~1ms) due to the overflow
- This causes the sub-agent wait to fail prematurely
- The warning pollutes logs

## Proposed Fix (will be implemented)

We'll update `resolveAgentTimeoutMs` to cap the NO_TIMEOUT_MS at the maximum safe value for `setTimeout`.

## Comments

### @aman-jaglan (2026-02-02)

Hey @zote 
pushed a fix and opened a PR that caps the “no timeout” sentinel below Node’s setTimeout limit and clamps the +10s buffer to avoid overflow. Also added a unit test for resolveAgentTimeoutMs.


## Links

- None detected yet
