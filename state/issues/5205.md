---
number: 5205
title: "[Bug]: Z.ai Coding Plan configuration 404s and validation errors on build 885167d"
author: kevin046
created: 2026-01-31T05:42:08Z
updated: 2026-01-31T05:42:08Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/5205
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

Summary

The current build (885167d) fails to authenticate Z.ai Coding Plan subscriptions. The CLI validator rejects the zai-coding provider key for standard OpenAI-compatible inputs (e.g., api: "openai"), and the TUI returns an HTTP 404: Not Found or null with no reply because the gateway defaults to the general API endpoint instead of the dedicated /coding/ endpoint required for subscription tokens.

Steps to reproduce

Attempt to configure the Z.ai Coding provider via CLI:

clawdbot config set models.providers.zai-coding.api "openai"

Observe the CLI error: Error: Config validation failed: models.providers.zai-coding.api: Invalid input.

Manually set the provider to use the coding endpoint in clawdbot.json:

"baseUrl": "https://api.z.ai/api/coding/paas/v4"

Launch clawdbot tui and send a message.

Observe the TUI hang on hobnobbing... or return HTTP 404.

Expected behavior

The zai-coding provider should be recognized as a valid, first-class provider that automatically routes to the subscription-gated /api/coding/paas/v4 endpoint and accepts glm-4.7 as a valid model ID without requiring manual base URL overrides.

Actual behavior

Validator Error: The CLI schema expects a models array immediately and rejects the api type string if it's placed under the reserved zai-coding key.

Routing Error: Even with the correct API key, the system attempts to reach the general usage-based endpoint, resulting in a 404 for subscription-only keys.

Session Hang: The token counter remains at 0/200k while the status remains hobnobbing....

Environment

Clawdbot version: 2026.1.24-3 (885167d)

OS: Ubuntu 24.04 (Moltbot-VC)

Install method: Binary / Systemd service

Logs or screenshots

Plaintext
(node:148089) [DEP0040] DeprecationWarning: The `punycode` module is deprecated.
Error: Config validation failed: models.providers.zai.models: Invalid input: expected array, received undefined
TUI Status: zai-coding/chat/completions | tokens 0/200k | HTTP 404: "Not Found"

## Comments


## Links

- None detected yet
