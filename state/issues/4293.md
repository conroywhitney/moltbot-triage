---
number: 4293
title: "message tool: emoji-list action ignores limit parameter"
author: GRR-Git
created: 2026-01-30T01:25:57Z
updated: 2026-01-31T02:32:29Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/4293
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug Description

The `message` tool's `emoji-list` action for Slack does not accept or use the `limit` parameter, even though the parameter is documented and other similar actions (like `reactions`, `read`) correctly support it.

## Steps to Reproduce

1. Call the message tool with `action: emoji-list` and `limit: 5`
2. The full emoji list is returned regardless of the limit value

## Expected Behavior

The `limit` parameter should restrict the number of emojis returned, consistent with other list-type actions.

## Actual Behavior

The `limit` parameter is silently ignored and all custom emojis are returned.

## Technical Analysis

In `dist/channels/plugins/slack.actions.js`, the `emoji-list` handler does not extract the limit parameter:

```javascript
if (action === "emoji-list") {
    return await handleSlackAction({ action: "emojiList", accountId: accountId ?? undefined }, cfg);
}
```

Compare with the `reactions` handler which correctly extracts limit:

```javascript
if (action === "reactions") {
    const messageId = readStringParam(params, "messageId", { required: true });
    const limit = readNumberParam(params, "limit", { integer: true });
    return await handleSlackAction({
        action: "reactions",
        channelId: resolveChannelId(),
        messageId,
        limit,
        accountId: accountId ?? undefined,
    }, cfg);
}
```

## Suggested Fix

1. In `slack.actions.js`, extract the limit parameter:

```javascript
if (action === "emoji-list") {
    const limit = readNumberParam(params, "limit", { integer: true });
    return await handleSlackAction({ action: "emojiList", limit, accountId: accountId ?? undefined }, cfg);
}
```

2. In `slack-actions.js`, handle the limit by slicing the result (since Slack's emoji.list API returns all emojis at once):

```javascript
if (action === "emojiList") {
    // ... existing checks ...
    let emojis = readOpts ? await listSlackEmojis(readOpts) : await listSlackEmojis();
    const limitRaw = params.limit;
    const limit = typeof limitRaw === "number" && Number.isFinite(limitRaw) && limitRaw > 0 ? limitRaw : undefined;
    if (limit && typeof emojis === "object" && emojis !== null) {
        const entries = Object.entries(emojis);
        if (entries.length > limit) {
            emojis = Object.fromEntries(entries.slice(0, limit));
        }
    }
    return jsonResult({ ok: true, emojis, total: Object.keys(emojis).length });
}
```

## Environment

- Clawdbot version: latest
- Channel: Slack
- Platform: Windows

## Comments


## Links

- None detected yet
