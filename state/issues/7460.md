---
number: 7460
title: "[Bug]:Telegram voice notes no longer auto-transcribe via Deepgram after config changes / restarts"
author: tobiasmullett-svg
created: 2026-02-02T21:18:01Z
updated: 2026-02-02T21:18:01Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7460
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

Environment

• OpenClaw: 2026.1.30
• Host: Toby’s Mac mini (local mode, loopback gateway)
• Channel: Telegram DM (@bison994)
• Audio: Deepgram configured via DEEPGRAM_API_KEY in ~/.openclaw/openclaw.json
• Tools: tools.media.audio enabled with Deepgram settings
Expected Behavior (earlier today)

• When I send a Telegram voice note, OpenClaw:  • Automatically sends the audio to Deepgram
  • Injects the resulting transcript into the conversation
  • The agent sees plain text and responds as if I had typed it

• No manual calls to skills or shell scripts required; it “just works”.
Current Behavior (after a series of config edits + gateway restarts)

• Telegram voice notes arrive as .ogg files, for example:
/Users/bisey/.openclaw/media/inbound/file_119---edd8f8ce-4780-4cf6-960a-31e6d7d45fc2.ogg
• The agent does not receive any text transcript automatically.
• To get text, the agent had to:  1. Create a custom skill skills/deepgram-transcribe with a transcribe.sh script that calls Deepgram’s listen API using DEEPGRAM_API_KEY.
  2. Manually run:
/Users/bisey/.openclaw/workspace/skills/deepgram-transcribe/transcribe.sh \
  /Users/bisey/.openclaw/media/inbound/file_119---edd8f8ce-4780-4cf6-960a-31e6d7d45fc2.ogg  3. Read the resulting .txt file.

• This proves:  • Deepgram API key is valid.
  • Network + auth to Deepgram work.
  • The automatic Telegram→Deepgram→text pipeline is what’s missing.

Relevant Config Snippet (openclaw.json)

"tools": {
  "media": {
    "audio": {
      "enabled": true,
      "deepgram": {
        "detectLanguage": true,
        "punctuate": true,
        "smartFormat": true
      },
      "baseUrl": "https://api.deepgram.com",
      "headers": {
        "Authorization": "Token 16b969af05fc4e5e2cf237de29223e42697cdefd"
      }
    }
  }
},
"channels": {
  "telegram": {
    "enabled": true,
    "dmPolicy": "pairing",
    "groupPolicy": "allowlist",
    "streamMode": "partial",
    "actions": {
      "reactions": true,
      "sendMessage": true,
      "deleteMessage": true,
      "sticker": true
    }
  }
}What changed before it broke

In this session we:

• Edited ~/.openclaw/openclaw.json to:  • Change default model to google-antigravity/claude-sonnet-4-5
  • Add fallbacks (openai-codex/gpt-5.1, openrouter/deepseek/deepseek-v3.2, ollama/llama3.2)
  • Introduce a cron agent profile with google-antigravity/gemini-3-flash

• Ran multiple openclaw gateway restart cycles.
• Ran openclaw doctor --non-interactive (which completed successfully; only informational hints).
After those changes, voice transcription stopped being automatic, even though Deepgram itself still works when called manually.

Why this matters

• The intended UX for this setup is:
“Send voice notes on Telegram and have the assistant respond as if they were text.”
• Right now the assistant must say “I can’t read audio, please type a summary” unless it manually calls a custom Deepgram skill per file.
• User expectation: this should be handled at the Telegram/media pipeline layer, not by ad‑hoc shell scripts.
Requested fix / questions

1. Restore the previous behavior where the Telegram channel automatically:  • Detects voice notes
  • Sends them to Deepgram
  • Injects the transcript into the message before it reaches the agent.

2. Document where this behavior is controlled (config vs plugin code), so that:  • Users can toggle “auto-transcribe Telegram voice” on/off explicitly
  • Agents know whether to expect transcripts for voice messages.

3. If this behavior was intentionally disabled or gated behind a new flag in 2026.1.30, please point to the correct config key so we can re-enable it safely.
Happy to provide the session log or ~/.openclaw/openclaw.json diff from before/after if that helps debug.

## Comments


## Links

- None detected yet
