---
number: 5244
title: "Agent session freezes when Read tool encounters unprocessable image (HTTP 400)"
author: patrickhustonoly1996
created: 2026-01-31T07:28:17Z
updated: 2026-02-02T00:19:53Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 1
url: https://github.com/openclaw/openclaw/issues/5244
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Description

When the agent uses the `Read` tool on an image file (PNG) that the LLM API cannot process, the entire agent session freezes instead of gracefully returning an error. The gateway continues running but the session becomes unresponsive, requiring a manual kill and restart.

## Steps to Reproduce

1. Agent runs `exec` to save/generate a file that produces a PNG image
2. Agent uses `Read` tool on that PNG file
3. Clawdbot detects it's an image and sends it as an attachment to the LLM API
4. The API returns HTTP 400: `invalid_request_error: Could not process image`
5. **Expected:** Error is returned as a tool result, agent continues
6. **Actual:** Agent session freezes completely. No further responses.

## Observed Behavior

- Gateway heartbeats continued normally after freeze
- Webchat disconnected (code 1001) ~10 minutes later
- Gateway process alive but session dead
- Required manual kill + restart to recover

## Log Evidence

```
HTTP 400 invalid_request_error: Could not process image
(request_id: req_011CXe5qjCZd1Ppx1jUrfYRt)
```

No crash or error on gateway side - just silent hang.

## Expected Behavior

HTTP 400 should be caught and returned as a tool error result, allowing the agent to continue.

## Environment

- Clawdbot: latest (npm global)
- OS: WSL2 Linux 6.6.87
- Node: v22.22.0
- Model: claude-opus-4-5
- Channel: webchat

## Comments


## Links

- None detected yet
