---
number: 7603
title: "[Bug] STT (tools.media.audio) passes raw audio bytes to model instead of transcribed text"
author: damon-agent
created: 2026-02-03T01:11:45Z
updated: 2026-02-03T01:11:45Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7603
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

When receiving voice messages via Telegram with `tools.media.audio` configured, the gateway passes raw audio bytes (as a base64-encoded voice:bytes attachment) to the model instead of automatically transcribing the audio and including the text in the message.

## Expected Behavior

When `tools.media.audio` is configured with an STT provider:
```yaml
tools:
  media:
    audio:
      provider: openai
      model: gpt-4o-mini-transcribe
```

Inbound voice messages should be automatically transcribed, and the transcribed text should appear in the message content sent to the model.

## Actual Behavior

The gateway sends the raw audio bytes as an attachment:
```
voice:bytes len=12345 mime=audio/ogg
```

The model receives opaque binary data and cannot process the voice content. Manual transcription via the OpenAI Whisper API works correctly on the same audio file.

## Steps to Reproduce

1. Configure `tools.media.audio` with OpenAI STT provider
2. Configure TTS (working correctly) with `auto: inbound`
3. Send a voice message via Telegram to the bot
4. Observe that the model receives `voice:bytes` attachment instead of transcribed text

## Environment

- OpenClaw version: latest (installed via npm)
- Channel: Telegram
- STT provider: OpenAI (`gpt-4o-mini-transcribe`)
- TTS: Working correctly with same OpenAI config
- OS: macOS (arm64)

## Workaround

Manual transcription via curl to Whisper API works:
```bash
curl -s https://api.openai.com/v1/audio/transcriptions \
  -H "Authorization: Bearer $OPENAI_API_KEY" \
  -F model="whisper-1" \
  -F file="@/path/to/audio.ogg"
```

## Additional Context

- TTS (`messages.tts`) works correctly in both directions
- The audio file is saved to `~/.openclaw/media/inbound/` and is valid
- Issue appears to be in the audio processing pipeline - transcription step is being skipped

## Comments


## Links

- None detected yet
