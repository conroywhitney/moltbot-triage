---
number: 4764
title: "Gateway exits on unhandled promise rejection (fetch failed) due to hard process.exit(1)"
author: holstein13
created: 2026-01-30T16:47:47Z
updated: 2026-01-30T16:47:47Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/4764
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

Hi — on Windows, the gateway process is exiting whenever there’s an unhandled promise rejection from a failed fetch (e.g. transient network/DNS/TLS issues). This makes the gateway brittle: a single transient outbound failure kills the whole daemon.

I traced it to the unhandled rejection handler, which currently logs and then calls process.exit(1):

- dist/infra/unhandled-rejections.js:

```js
process.on("unhandledRejection", (reason) => {
  if (isUnhandledRejectionHandled(reason)) return;
  console.error("[clawdbot] Unhandled promise rejection:", formatUncaughtError(reason));
  process.exit(1);
});
```

Observed log:
`[clawdbot] Unhandled promise rejection: TypeError: fetch failed`

Why this is a problem:
- Node’s `--unhandled-rejections=warn` can’t help because the app explicitly exits.
- Transient network failures (timeouts, DNS, connection resets) shouldn’t kill the entire gateway service.
- The result is frequent gateway restarts/crashes when Telegram (or other outbound integrations) hit intermittent fetch failures.

Suggested fix:
- Default behavior: log the rejection (and ideally log `reason.cause` when present), but do not exit.
- Optional behavior: keep current fail-fast behavior behind an env var or a config flag.

Happy to provide a patch if you want.

## Comments


## Links

- None detected yet
