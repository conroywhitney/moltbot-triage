---
number: 4192
title: "sessions_spawn: model parameter ignored for cross-provider routing"
author: inkthorne
created: 2026-01-29T21:02:26Z
updated: 2026-01-29T21:02:26Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/4192
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Environment
- **Version:** 2026.1.24-3
- **OS:** Linux (WSL2)
- **Config:** Custom Ollama provider configured under `models.providers`

## Description

`sessions_spawn(model="provider/model")` returns `modelApplied: true` but silently falls back to the parent session's model when the requested model is from a different provider than the parent.

## Reproduction

1. Configure a custom provider (e.g., Ollama) in `models.providers`:
```json
{
  "models": {
    "providers": {
      "ollama": {
        "baseUrl": "http://<ollama-host>:11434/v1",
        "api": "openai-completions",
        "models": [{ "id": "qwen3-coder:30b", ... }]
      }
    }
  }
}
```

2. From a parent session running on Anthropic, spawn a subagent:
```
sessions_spawn(task="...", model="ollama/qwen3-coder:30b")
```

3. Response claims `modelApplied: true`

4. Check session history - actual model used is parent's model (e.g., `claude-opus-4-5`), not the requested Ollama model

## Test Results

| Requested Model | modelApplied | Actual Provider/Model |
|-----------------|--------------|----------------------|
| `anthropic/claude-sonnet-4-20250514` | true | ✅ anthropic/claude-sonnet-4-20250514 |
| `ollama/qwen3-coder:30b` | true | ❌ anthropic/claude-opus-4-5 |
| `totally-fake-provider/nonexistent` | true | ❌ anthropic/claude-opus-4-5 |

## Key Observations

1. **Same-provider switching works:** Anthropic → Anthropic (Opus → Sonnet) works correctly
2. **Cross-provider switching fails silently:** Request is ignored, falls back to parent model
3. **No validation:** Even completely fake provider names return `modelApplied: true` without error
4. **Ollama endpoint works:** Direct curl to the Ollama API succeeds, confirming the provider is accessible

## Expected Behavior

Either:
- Route the subagent to the requested provider/model, OR
- Return `modelApplied: false` or throw an error if the provider/model is unavailable

## Additional Context

The `agents.defaults.subagents.model` config option also appears to be ignored for cross-provider models - subagents still inherit the parent's provider.

## Comments


## Links

- None detected yet
