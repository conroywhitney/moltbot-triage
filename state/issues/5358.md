---
number: 5358
title: "# Issue: WebSocket Client ID Schema Validation Issues"
author: rechainvest
created: 2026-01-31T11:43:23Z
updated: 2026-02-02T00:19:21Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/5358
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Problem
When connecting to the OpenClaw gateway via WebSocket, client ID validation fails with schema errors, making it difficult to determine valid client IDs and modes.

## Environment
- OpenClaw version: 2026.1.29 (beta)
- Running in Docker container
- Gateway config: `allowInsecureAuth: true` enabled

## Error Messages
```
invalid connect params: at /client/id: must be equal to constant; at /client/id: must match a schema in anyOf
invalid connect params: at /client/mode: must be equal to constant; at /client/mode: must match a schema in anyOf
```

## What We've Tried

### Client IDs tested:
- `"cli"` - Works but requires device pairing (`NOT_PAIRED: device identity required`)
- `"a2"` - Schema validation fails
- `"a2web"` - Schema validation fails  
- `"macos"` - Schema validation fails
- `"ios-node"` - Schema validation fails
- `"web"` - Schema validation fails
- `"browser"` - Schema validation fails
- `"control"` - Schema validation fails
- `"dashboard"` - Schema validation fails
- `"ui"` - Schema validation fails

### Modes tested with `id: "cli"`:
- `"cli"` - Valid schema, but requires device pairing
- `"operator"` - Schema validation fails (`must be equal to constant`)
- `"standard"` - Schema validation fails
- `"app"` - Schema validation fails
- `"node"` - Schema validation fails

## Current Workaround
Using `id: "cli"` with `mode: "cli"` passes schema validation but requires device pairing, which is problematic for web-based control UIs.

## Questions/Requests

1. **What are the valid client IDs?** The documentation mentions `"cli"` and `"ios-node"` but others fail schema validation.

2. **What are the valid modes for each client ID?** The schema error `"must be equal to constant"` suggests there are specific allowed values.

3. **Web client support:** What client ID should web-based control UIs use? The `allowInsecureAuth` option suggests web clients should work without device pairing.

4. **Documentation:** Could the valid client IDs and modes be documented in the protocol documentation?

5. **Error messages:** Could schema validation errors include the list of valid values? (e.g., `"must be one of: cli, ios-node, ..."`)

## Reproduction Steps
1. Start OpenClaw gateway with `allowInsecureAuth: true`
2. Try to connect via WebSocket with different client IDs
3. Observe schema validation errors

## Configuration
```json
{
  "gateway": {
    "port": 18789,
    "mode": "local",
    "bind": "lan",
    "controlUi": {
      "allowInsecureAuth": true
    }
  }
}
```

## Connection Attempt (fails)
```json
{
  "type": "req",
  "id": "test",
  "method": "connect",
  "params": {
    "minProtocol": 3,
    "maxProtocol": 3,
    "client": {
      "id": "a2web",
      "version": "1.0.0",
      "platform": "web",
      "mode": "standard"
    },
    "role": "operator",
    "scopes": ["operator.read", "operator.write"],
    "caps": []
  }
}
```

## Expected Behavior
Clear documentation of valid client IDs and modes, or better error messages indicating valid values.

## Actual Behavior
Cryptic schema validation errors without indication of what values are allowed.

## Comments


## Links

- None detected yet
