---
number: 6913
title: "Google Chat spaces return 400 invalid payload (Add-on format not correctly handled)"
author: takumisawano-hash
created: 2026-02-02T05:54:03Z
updated: 2026-02-02T06:07:55Z
labels: []
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6913
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Environment
- Clawdbot: 2026.1.24-3
- OS: Ubuntu 22.04 (AWS EC2)
- Google Chat: HTTP endpoint URL via Tailscale Funnel

## Problem
DMs work fine, but Space @mentions return `400 invalid payload`.

## Root Cause Analysis
Captured the raw payload from Google Chat. Spaces use **Google Workspace Add-on format**:

```json
{
  "commonEventObject": { "hostApp": "CHAT" },
  "authorizationEventObject": { "systemIdToken": "..." },
  "chat": {
    "messagePayload": {
      "space": { "name": "spaces/XXX", "type": "ROOM" },
      "message": { ... }
    }
  }
}
The conversion logic in monitor.ts (lines 189-210) should handle this:

if (rawObj.commonEventObject?.hostApp === "CHAT" && rawObj.chat?.messagePayload) {
  raw = { type: "MESSAGE", space: ..., message: ... };
}
However, the request still returns 400.

Expected Behavior

Space mentions should work like DMs.

Config

{
  "channels": {
    "googlechat": {
      "groupPolicy": "open",
      "audienceType": "app-url"
    }
  }
}

## Comments

### @takumisawano-hash (2026-02-02)

"When the proxy was down, Google Chat showed 'not responding'. But when Clawdbot returns 400, no error is shown to the user - the message just silently fails."


## Links

- None detected yet
