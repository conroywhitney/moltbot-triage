---
number: 5355
title: "Bug: TUI crashes when message content exceeds terminal width"
author: tingxueren
created: 2026-01-31T11:39:06Z
updated: 2026-02-02T00:19:24Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/5355
duplicate_of: null
related_issues: [1686]
blocks: []
blocked_by: []
---

## Description

```markdown
## Bug: TUI crashes when message content exceeds terminal width

### Environment
- OpenClaw: 2026.1.29
- OS: Debian 12 (US VPS)
- Terminal: [your terminal, e.g., iTerm2 / Windows Terminal / SSH]
- pi-tui: 0.49.3

### Description
TUI crashes with an uncaught exception when assistant reply content exceeds terminal width. Messages are queued in gateway but not displayed until TUI is restarted.

### Error
```
[openclaw] Uncaught exception: Error: Rendered line 29 exceeds terminal width (330 > 318).

This is likely caused by a custom TUI component not truncating its output.
Use visibleWidth() to measure and truncateToWidth() to truncate lines.
```

### Steps to reproduce
1. Run `openclaw tui`
2. Send a message that produces a long response
3. TUI crashes immediately when rendering the message

### Expected behavior
- Long messages should be truncated to fit terminal width, OR
- TUI should wrap text instead of crashing, OR
- Show a warning that message is too long

### Workaround
- Use webchat at http://127.0.0.1:18789/ (works fine)
- Restart TUI after crash to see queued messages

### Additional context
- Gateway receives and processes messages correctly
- `openclaw status` shows session is active
- Messages appear after TUI restart (were queued, not lost)
- This is a rendering issue in pi-tui when content overflows terminal width

### Additional context (updated)
- This is a different component than the selection list overflow fixed in #1686 (2026.1.29)
- The crash occurs in chat log rendering, not selection lists
- Previously worked in clawdbot (pre-openclaw rebrand), appears to be a regression
```

---

## Comments


## Links

- None detected yet
