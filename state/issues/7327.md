---
number: 7327
title: "[Bug]: Telegram channel not receiving messages (long-polling issue)"
author: TheDreamer01
created: 2026-02-02T18:02:01Z
updated: 2026-02-02T18:02:01Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7327
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

Gateway runs but does not process incoming Telegram messages. Bot can send messages fine, but long-polling does not receive updates.

Environment
OS: Linux (x64)

Node: v22.x

OpenClaw: 2026.x

Gateway: Running in local mode (port 18789)

Configuration
JSON
{
  "channels": {
    "telegram": {
      "enabled": true,
      "botToken": "<REDACTED_BOT_TOKEN>",
      "network": {
        "autoSelectFamily": false
      }
    }
  }
}
Steps to reproduce
Gateway starts successfully.

Bot token configured and verified working.

Pairing approved for User ID <USER_ID>.

User sends messages to bot @<BOT_USERNAME>.

Messages are visible via getUpdates API but gateway does not process them.

Evidence
Bot info: Verified via getMe - bot @<BOT_USERNAME> (ID <BOT_ID>) exists and is functional.

Sending works: Bot can send messages successfully via API.

Receiving works (raw): getUpdates returns messages:

JSON
{
  "update_id": "<UPDATE_ID>",
  "message": {
    "message_id": 172,
    "from": {
      "id": "<USER_ID>",
      "is_bot": false,
      "first_name": "<NAME>",
      "last_name": "<SURNAME>",
      "username": "<USERNAME>",
      "language_code": "it"
    },
    "chat": {
      "id": "<CHAT_ID>",
      "type": "private"
    },
    "date": 1770054367,
    "text": "Test message"
  }
}
Gateway status: Process running, API responding on port 18789.

Pairing: Approved - credentials file telegram-allowFrom.json contains <USER_ID>.

Troubleshooting attempted
✅ Restarted gateway multiple times.

✅ Verified bot token works (can send messages).

✅ Approved pairing for user ID.

✅ Set channels.telegram.network.autoSelectFamily: false to force IPv4.

❌ Gateway still does not process incoming messages.

Network info
DNS for api.telegram.org returns valid A record.

curl to Telegram API works fine from shell.

Outbound connections to Telegram appear to work (sending messages succeeds).

Expected behavior
Gateway should receive messages via long-polling and route them to the agent for processing.

Actual behavior
Messages arrive at the bot but gateway does not process them. Agent never sees the incoming messages.

Additional notes
Workaround: Manually sending messages via curl to simulate responses.

Could this be a firewall issue blocking long-polling connections?

Could the offset management in the Telegram library (grammY) be failing silently?

## Comments


## Links

- None detected yet
