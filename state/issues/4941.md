---
number: 4941
title: "Dashboard \"pairing required\" (1008) when running gateway in Docker Desktop on Windows"
author: AliNMackie
created: 2026-01-30T21:35:14Z
updated: 2026-02-01T03:24:56Z
labels: ["bug"]
assignees: []
comments_count: 2
reactions_total: 10
url: https://github.com/openclaw/openclaw/issues/4941
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

# Environment
- **OS**: Windows 11 ARM64
- **Docker**: Docker Desktop (latest)
- **OpenClaw**: 2026.1.29
- **Gateway Mode**: Docker (`docker compose up openclaw-gateway`)

## Problem
When running the OpenClaw gateway inside Docker Desktop on Windows, the browser dashboard cannot connect. Every WebSocket connection fails with:

```
disconnected (1008): pairing required
```

## Root Cause Analysis
Looking at gateway logs, the issue is **Docker's NAT networking**:

```
[ws] closed before connect conn=8fabde36-... 
remote=172.18.0.1 fwd=n/a origin=http://127.0.0.1:18789
host=127.0.0.1:18789 code=1008 reason=pairing required
```

- Browser connects to `127.0.0.1:18789` → Docker NAT → Gateway sees `172.18.0.1`
- Gateway treats `172.18.0.1` as an **external connection** (not localhost)
- External connections require node pairing, which the browser cannot complete

## Config (verified correct)
```json
{
  "gateway": {
    "mode": "local",
    "auth": {
      "mode": "token",
      "token": "<redacted>"
    },
    "bind": "lan"
  }
}
```

## What I Tried (all failed)
1. ✅ Token in URL: `/?token=...` - Still "pairing required"
2. ✅ `trustedProxies: ["172.18.0.0/16"]` - Accepted but didn't fix
3. ❌ `auth.mode: "none"` - Invalid config
4. ❌ `auth.allowInsecureAuth: true` - Unknown key

## Expected Behavior
Dashboard should connect when the token is correct, regardless of whether the connection arrives via Docker's internal NAT.

## Suggested Fix
Add a config option like `gateway.auth.skipPairingForTokenAuth: true` or automatically trust connections when a valid token is provided in the WebSocket handshake.

## Workaround
Run the gateway natively on Windows (not in Docker) to get real localhost connections.

---
**Labels**: bug, windows, docker

## Comments

### @alexminza (2026-01-31)

Gemini CLI suggested this config change:

```json
    "controlUi": {
      "allowInsecureAuth": true
    },
```

```
> Just tell me what to change in the openclaw.json file

✦ To fix the "pairing required" error and allow the Control UI to authenticate without a persistent device identity (which requires manual approval), add the
  controlUi block to your gateway configuration.

  In your `/Users/user/.openclaw/openclaw.json` file, update the gateway section to look like this:

    1   "gateway": {
    2     "port": 18789,
    3     "mode": "local",
    4     "bind": "loopback",
    5     "auth": {
    6       "mode": "token",
    7       "token": "REDACTED"
    8     },
    9     "controlUi": {
   10       "allowInsecureAuth": true
   11     },
   12     "tailscale": {
   13       "mode": "off",
   14       "resetOnExit": false
   15     }
   16   },

  After saving the file, restart your Docker container to apply the changes:
   1 docker compose restart openclaw-gateway

  Why this is happening:
  By default, OpenClaw requires every connecting device to be "paired" (approved by an administrator). Since the Control UI is running in an "insecure" context
  (HTTP inside Docker), it cannot generate a persistent device identity. Setting allowInsecureAuth: true tells the gateway to trust the Control UI if it provides
  the correct token, skipping the pairing requirement.
```

### @sundeepgupta (2026-02-01)

This worked for me on macOS:

That error is expected: the CLI/UI is sending a device identity, and because the gateway sees the connection as non‑local, it requires device pairing. You don’t have a paired operator yet, so everything is stuck.

Fast bootstrap (recommended):

Temporarily disable device identity for the Control UI by adding to `openclaw.json`:

```json
{
  "gateway": {
    "controlUi": { "dangerouslyDisableDeviceAuth": true }
  }
}
```

Restart the gateway Docker container:

In the UI, approve the pending device pairing (Devices/Nodes section).

Remove dangerouslyDisableDeviceAuth and restart again.


## Links

- None detected yet
