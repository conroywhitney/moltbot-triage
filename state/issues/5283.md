---
number: 5283
title: "Multi-account Telegram inbound routing ignores accountId"
author: leonlushgit
created: 2026-01-31T08:34:04Z
updated: 2026-02-02T00:19:43Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/5283
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug: Multi-account Telegram inbound routing ignores accountId

**Environment:**
- OpenClaw version: 2026.1.29
- Platform: macOS 15.7.3
- Node: v25.4.0

**Config:**
```json
{
  "channels": {
    "telegram": {
      "enabled": true,
      "accounts": {
        "nigel": {
          "botToken": "8375781339:...",
          "dmPolicy": "pairing"
        },
        "brainworms": {
          "botToken": "8393948819:...",
          "dmPolicy": "open"
        }
      }
    }
  },
  "bindings": [
    {
      "agentId": "brainworms",
      "match": {
        "channel": "telegram",
        "accountId": "brainworms"
      }
    },
    {
      "agentId": "main",
      "match": {
        "channel": "telegram",
        "accountId": "nigel"
      }
    }
  ],
  "agents": {
    "list": [
      { "id": "main", "default": true },
      { "id": "brainworms" }
    ]
  }
}
```

**Steps to reproduce:**
1. Configure 2 Telegram bot accounts with distinct botTokens
2. Set up bindings to route each accountId to different agents
3. Send a message to @brainworms_bot (the second bot)

**Expected behavior:**
- Message routes to `agent:brainworms:main` based on `accountId: "brainworms"` binding

**Actual behavior:**
- Message routes to `agent:main:main` (default agent)
- Session shows `lastAccountId: "nigel"` even when messaging @brainworms_bot
- All inbound messages get tagged with the first account's ID regardless of which bot received them

**Evidence:**
```bash
$ cat ~/.openclaw/agents/main/sessions/sessions.json | jq '.["agent:main:main"] | {lastAccountId}'
{
  "lastAccountId": "nigel"
}
```

This happens even when the message was sent to @brainworms_bot, not @nigelbot_bot.

**Workaround status:**
- **Outbound works correctly** â€” messages sent via the brainworms agent session deliver through @brainworms_bot as expected
- Only inbound routing is broken

**Impact:**
- Multi-agent Telegram setups can't route based on which bot received the message
- All messages fall through to default agent

## Comments

### @knocte (2026-01-31)

This looks awfully similar to what was fixed in e913de072048414bacf10227347fdd7ed1d6aec8 maybe


## Links

- None detected yet
