---
number: 5597
title: "[Bug]: detectDuplicateKeys() does not detect duplicates in top-level arrays"
author: lailoo
created: 2026-01-31T17:56:52Z
updated: 2026-02-02T00:18:32Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/5597
duplicate_of: null
related_issues: [5538,11130]
blocks: []
blocked_by: []
---

## Description

## Problem

`detectDuplicateKeys()` in `src/config/io.ts` only scans when the top-level token is `{`. Valid JSON5 can also be an array at the top level; in that case duplicates inside nested objects won't be detected.

## Background

This is part of the duplicate key detection feature (PR #5538), which migrates the capability from OpenCode (opencode#11130) to OpenClaw.

## Example

```json5
[
  { key: 'first' },
  { key: 'value', key: 'duplicate' }  // duplicate not detected before fix
]
```

## Fix

Add support for top-level arrays:
```typescript
if (raw[i] === '{') parseObj();
else if (raw[i] === '[') parseArr();
```

## Status

Fixed in PR #5538 (commit 6ecf6a0)

## Comments

### @sebslight (2026-02-01)

OpenClaw Maintainer Triage // Issue Closure

Hi — this is a joint maintainer effort to keep the repo moving. We’re currently seeing ~30 new issues per hour, and we can’t review every future request without slowing down critical stabilization work. This issue is unlikely to be considered in the near term, so we’re closing it to keep the pipeline moving while we focus on stability.

We’re very sorry this is happening, but we won’t be able to look at the comments on this issue.

Want to make your request stand out? Submit a PR and report to #pr-thunderdome-dangerzone on Discord — READ THE TOPIC. Give us a clear briefing: what it fixes, who it helps, and why it’s worth shipping.

Thanks for understanding and for contributing.

![](https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExeXFramtnZWo1ZWM4YmYzcG1zcXE1NWV1eTl3MDZodnk4aWhvM2tqbCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/RWUqVYucDBD4A/giphy.gif)



## Links

- None detected yet
