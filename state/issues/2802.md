---
number: 2802
title: "[Bug]: Docker Build Fails Due to .dockerignore and Workspace Dependency Issues"
author: enquiry-sg-sol
created: 2026-01-27T14:49:43Z
updated: 2026-01-27T14:49:43Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 3
url: https://github.com/moltbot/moltbot/issues/2802
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

Docker Build Fails Due to .dockerignore and Workspace Dependency Issues
Summary
Docker build fails with two separate issues:

.dockerignore excludes directories required for the build
extensions/memory-core references moltbot as an npm dependency instead of a workspace dependency

Environment

Platform: Ubuntu (Docker build)
Clawdbot version: 2026.1.26


Issue 1: A2UI Bundling Fails — Required Directories Excluded by .dockerignore
Error
> [12/14] RUN pnpm build:
 > moltbot@2026.1.26 build /app
 > pnpm canvas:a2ui:bundle && tsc -p tsconfig.json && ...

shasum: /app/apps/shared/ClawdbotKit/Tools/CanvasA2UI: No such file or directory
shasum: /app/vendor/a2ui/renderers/lit: No such file or directory
A2UI bundling failed. Re-run with: pnpm canvas:a2ui:bundle
ELIFECYCLE  Command failed with exit code 123.
Cause
The .dockerignore file excludes apps/ and vendor/ entirely:
dockerignoreapps/
vendor/
This prevents the following required directories from being copied into the Docker image:

apps/shared/ClawdbotKit/Tools/CanvasA2UI
vendor/a2ui/renderers/lit

Solution
Update .dockerignore to include the required subdirectories using negation patterns:
dockerignoreapps/macos/.build
apps/ios/build
apps/
!apps/shared/
vendor/
!vendor/a2ui/

Issue 2: memory-core Extension Fails to Install — Invalid Dependency Specifier
Error
> [13/14] RUN pnpm ui:install:
/app/extensions/memory-core:
 ERR_PNPM_NO_MATCHING_VERSION  No matching version found for moltbot@>=2026.1.26 
 while fetching it from https://registry.npmjs.org/

This error happened while installing a direct dependency of /app/extensions/memory-core

The latest release of moltbot is "0.1.0".
Cause
extensions/memory-core/package.json specifies moltbot with a version range (>=2026.1.26) that resolves against the public npm registry. Since moltbot is a local workspace package (not published to npm at that version), the install fails.
Solution
Update extensions/memory-core/package.json to use the workspace protocol:
diff- "moltbot": ">=2026.1.26"
+ "moltbot": "workspace:*"

Steps to Reproduce

Clone the repository
Run docker build .
Observe failure at step 12/14 (A2UI bundling)
After fixing .dockerignore, observe failure at step 13/14 (pnpm ui:install)

Suggested Fix
A PR addressing both issues should:

Update .dockerignore to whitelist required apps/shared/ and vendor/a2ui/ paths
Update extensions/memory-core/package.json to use workspace:* for the moltbot dependency

## Comments


## Links

- None detected yet
