---
number: 2233
title: "[Bug]: Gemini CLI Login does not work"
author: DevDeepakBhattarai
created: 2026-01-26T14:23:17Z
updated: 2026-01-27T10:22:09Z
labels: ["bug"]
assignees: []
comments_count: 6
reactions_total: 2
url: https://github.com/moltbot/moltbot/issues/2233
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary
When ever I try to login using Gemini CLI in clawdbot, it gives me error saying gemini-cli is not installed , even tho it is already, installed. I have enabled the plugin using this `clawdbot plugins enable google-gemini-cli-auth` , but it does not let me login with cli. Antigravity login works but cli does not work 

## Steps to reproduce
1. Try to login in using gemini cli option in clawdbot 

## Expected behavior
What did you expect to happen?

## Actual behavior
What actually happened?

## Environment
- Clawdbot version: 2026.1.24-3
- OS: Windows 11 Home
- Install method (pnpm/npx/docker/etc): pnpm@10.28.0

## Logs or screenshots
Paste relevant logs or add screenshots (redact secrets).

`Error: Gemini CLI not found. Install it first: brew install gemini-cli (or npm install -g @google/gemini-cli), or set GEMINI_CLI_OAUTH_CLIENT_ID.`

I tried by using this environment variable, from google cloud console, but it gives me error saying secret is not provided. So there is no way to login in using gemini cli 

<img width="1275" height="551" alt="Image" src="https://github.com/user-attachments/assets/ff0ab152-fd2b-4891-879c-958fcf2ddb11" />

P.S: I have installed both gemini cli and clawdbot using pnpm. And since it says install using npm, I even tried switching gemini cli to npm but it did not work 

## Comments

### @z11419222 (2026-01-26)

同样的问题

### @sonce (2026-01-27)

+1

### @voznik (2026-01-27)

same. few notes:
- when `gemini` installed not via npm - it can never find files . (I use `mise` and I did update PATH in systemd unit to include mise shims)
- when I do set `GEMINI_CLI_OAUTH_CLIENT_ID` `GEMINI_CLI_OAUTH_CLIENT_SECRET` manually in systemd uint env - it tries to goes to:
```
Gemini CLI OAuth ───────────────────────────────────────────────╮
│                                                                  │
│  Browser will open for Google authentication.                    │
│  Sign in with your Google account for Gemini CLI access.         │
│  The callback will be captured automatically on localhost:8085.  │
│                                                                  │
├──────────────────────────────────────────────────────────────────╯
◒  Waiting for OAuth callback on http://localhost:8085/oauth2callback…
```
but Google rejects with Unauthorized 401

### @voznik (2026-01-27)

except of binary, clawd code tries to find these files:

```
const searchPaths = [
      join(geminiCliDir, "node_modules", "@google", "gemini-cli-core", "dist", "src", "code_assist", "oauth2.js"),
      join(geminiCliDir, "node_modules", "@google", "gemini-cli-core", "dist", "code_assist", "oauth2.js"),
    ];
```
https://github.com/clawdbot/clawdbot/blob/d7a00dc823d83e1ce3314492e7df9605602de524/extensions/google-gemini-cli-auth/oauth.ts#L69-L72 

but on mu systems gemini node_modules folder looks like this:

<img width="1681" height="673" alt="Image" src="https://github.com/user-attachments/assets/6e0c3faa-8ed9-49bf-b4f6-e3962e506081" />

so there's no `src/code_assist`


### @DevDeepakBhattarai (2026-01-27)

Yes, and there is no any `oauth2.js` file anywhere within in the folder to find the credential that `clawdbot` is looking for. 

### @DevDeepakBhattarai (2026-01-27)

$env:GEMINI_CLI_OAUTH_CLIENT_ID="[REDACTED].apps.googleusercontent.com"
$env:GEMINI_CLI_OAUTH_CLIENT_SECRET="GOCSPX-[REDACTED]"

Seems like setting these environement variables and trying to log in works. 

These are the credentails that, `clawdbot` is looking for. 

Found these from https://github.com/jenslys/opencode-gemini-auth/blob/main/src/constants.ts


## Links

- None detected yet
