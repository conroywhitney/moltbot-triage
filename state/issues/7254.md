---
number: 7254
title: "auth-profiles.json does not support env var substitution (unlike openclaw.json)"
author: jimlatimer-sp
created: 2026-02-02T16:14:40Z
updated: 2026-02-02T16:14:40Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7254
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug Description

The `auth-profiles.json` files for agents do not support environment variable substitution (`${VAR_NAME}` syntax), while `openclaw.json` does. This creates an inconsistency and makes credential management more difficult.

## Files Affected

- `~/.openclaw/agents/<agent-id>/agent/auth-profiles.json` (all agent configs)

## Expected Behavior

Given this `auth-profiles.json`:
```json
{
  "providers": [{
    "name": "anthropic",
    "key": "${ANTHROPIC_API_KEY}"
  }]
}
```

The `${ANTHROPIC_API_KEY}` should be substituted with the environment variable value, matching `openclaw.json` behavior.

## Actual Behavior

The literal string `"${ANTHROPIC_API_KEY}"` is passed to the API, causing auth failures.

## Workaround

Use literal API key values in `auth-profiles.json`. This requires duplicating keys across multiple agent configs instead of using centralized secret management.

## Suggested Fix

Apply the same env var substitution logic used for `openclaw.json` to `auth-profiles.json` parsing.

## Context

This was discovered while migrating agents to OpenClaw 2026.1.30. The inconsistency between main config and agent configs caused significant confusion during setup.

## Comments


## Links

- None detected yet
