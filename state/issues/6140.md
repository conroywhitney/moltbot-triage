---
number: 6140
title: "[Bug]: cron jobs with sessionTarget: \"isolated\" are not executing"
author: Navani001
created: 2026-02-01T09:55:35Z
updated: 2026-02-03T04:02:46Z
labels: ["bug"]
assignees: []
comments_count: 2
reactions_total: 4
url: https://github.com/openclaw/openclaw/issues/6140
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

Scheduled cron jobs using sessionTarget: "isolated" and payload: { kind: "agentTurn" } are not being executed. This makes it impossible for an agent to reliably schedule asynchronous, non-blocking tasks like reminders. The job is successfully created and appears in cron.list, but the agentTurn payload never runs at the scheduled time.

This was discovered during a session where an agent ("ReminderBuddy") repeatedly failed to deliver timed reminders to a user.

Environment:

• Platform: OpenClaw
• Host OS: Windows_NT 10.0.26100 (x64)
• Agent Runtime: agent=main
• Channel: telegram
Steps to Reproduce:

1. An agent attempts to schedule a non-blocking task using the cron tool. A minimal example is scheduling a job to write to a file.
2. The agent calls cron.add with the following parameters:
JSON


{
  "action": "add",
  "job": {
    "name": "Isolated Cron Test",
    "schedule": {
      "kind": "at",
      "atMs": <timestamp_for_2_minutes_in_the_future>
    },
    "sessionTarget": "isolated",
    "payload": {
      "kind": "agentTurn",
      "message": "exec: write('cron_test.log', 'File created by isolated cron at ' + new Date().toISOString())"
    }
  }
}

3. The tool call succeeds and returns a job ID. The job can be seen in the output of cron.list.
4. Wait for the scheduled time to pass.
Expected Behavior:

At the scheduled time, a new, isolated agent session should be spawned. It should execute the message from the payload, resulting in the creation of a file named cron_test.log in the workspace with a timestamp written to it.

Actual Behavior:

The scheduled time passes, and no action occurs. The cron_test.log file is never created. The isolated agent session does not appear to run at all. This was verified by the agent using exec: ls -l cron_test.log after the scheduled time, which confirmed the file's absence.

Debugging History & Analysis:

1. Initial Failures: Simple reminders using sessionTarget: "main" and payload: { kind: "systemEvent" } were being delivered late or missed entirely.
2. Initial Hypothesis: The main agent's single-threaded process was being blocked by other tasks, preventing it from processing the systemEvent from the cron job in a timely manner.
3. Proposed Solution: Switch to sessionTarget: "isolated" to decouple the reminder delivery from the main agent's process. This is the correct architectural approach for non-blocking notifications.
4. Reproduction of Failure: Multiple attempts to schedule reminders using the isolated target failed.
5. Definitive Diagnostic Test: The final test (described in "Steps to Reproduce") was designed to remove all external dependencies (like the Telegram channel) and test only the core functionality of the isolated cron scheduler. Its failure proves that the issue lies with the scheduler's inability to execute the agentTurn payload in an isolated session.
Conclusion:

The cron scheduler is not correctly spawning and executing jobs targeted for isolated sessions. This is a critical bug that prevents reliable asynchronous task execution, which is a core requirement for features like reminders.

## Comments

### @andyrdt (2026-02-03)

(a comment from my bot)

Confirmed this also affects `sessionTarget: "main"` with `systemEvent`, not just isolated jobs.

Root cause: Jobs created via tool/API are missing proper initialization:
- No `enabled: true` set
- No `state.nextRunAtMs` computed
- Jobs appear in `cron.list` but scheduler never picks them up

Evidence: 
- Pre-existing CLI-created jobs have `enabled: true` + `state.nextRunAtMs` → they work
- Tool/API-created jobs have empty `state: {}` → never fire
- Gateway restart doesn't help

The initialization code path for `cron.add` via tool differs from CLI and doesn't set these required fields.

### @Navani001 (2026-02-03)

then how can we make sure it works



## Links

- None detected yet
