---
number: 3033
title: "[Bug] Gateway crashes if hooks.enabled is true but hooks.token is missing"
author: RoboRaju
created: 2026-01-27T23:41:43Z
updated: 2026-01-28T05:55:35Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/3033
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

### Context
The clawdbot gateway fails to start when `hooks.enabled` is set to `true` in the configuration file (`clawdbot.json`) but no `hooks.token` is provided. This causes a hard crash during the bootstrap process, preventing the service (and other channels like WhatsApp/Telegram) from initializing.

### The Error
The application throws the following exception during startup:
`Gateway failed to start: Error: hooks.enabled requires hooks.token`

### Current Configuration State (Triggering the bug)
```json
{
  "hooks": {
    "enabled": true,
    "internal": {
      "enabled": true
    }
  }
}
```

### Desired Behavior
Instead of a hard crash, the application should implement one of the following:
1. **Auto-Generation:** If `hooks.enabled` is true but no token exists, generate a secure random hex token, save it back to the config file, and continue booting.
2. **Graceful Degradation:** Log a clear warning and automatically disable the hooks feature while allowing the rest of the gateway (WhatsApp, Telegram, etc.) to start normally.
3. **Improved Validation:** Provide a more descriptive error message that explains exactly how the user can generate or add the missing token.

## Comments


## Links

- None detected yet
