---
number: 5637
title: "TTS: typing indicator stops before audio is sent"
author: martinbon39
created: 2026-01-31T19:23:01Z
updated: 2026-02-03T01:09:57Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/5637
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Problem

When TTS is enabled, the typing indicator (chat action) stops as soon as the model run completes, but the TTS audio generation and sending happens **after** in the dispatch phase.

On Telegram (and likely other platforms), this causes the audio playback to be cut off when the bot goes back to idle state.

## Expected Behavior

The typing/recording indicator should remain active until the TTS audio is fully generated and sent to the user.

## Steps to Reproduce

1. Have TTS enabled
2. Send a message that triggers a longer response
3. The typing indicator stops while the audio is still being generated
4. Audio gets cut off

## Suggested Fix

Keep the typing controller active through the TTS generation phase in dispatch, only calling `markDispatchIdle()` after the audio message is actually sent.

## Environment

- Clawdbot version: 2026.1.24-3
- Channel: Telegram
- streamMode: partial

## Comments

### @rahultappetla (2026-02-03)

  PR #6778 may help mitigate this issue.                                                                                                                                                                                           
                                                                                                                                                                                                                                   
  It adds a configurable `typingTtlSeconds` option that extends how long the typing indicator stays active. By increasing this value, the indicator can remain on through the TTS generation phase:                                
                                                                                                                                                                                                                                   
  ```json5                                                                                                                                                                                                                         
  {                                                                                                                                                                                                                                
    agents: {                                                                                                                                                                                                                      
      defaults: {                                                                                                                                                                                                                  
        typingTtlSeconds: 300,  // 5 minutes                                                                                                                                                                                       
      },                                                                                                                                                                                                                           
    },                                                                                                                                                                                                                             
  }                                                                                                                                                                                                                                
                                                                                                                                                                                                                                   
  This is a workaround rather than a full fix (the ideal solution would be to keep the indicator active until dispatch completes), but it should help prevent the indicator from stopping prematurely during TTS.                  
     


## Links

- None detected yet
