---
number: 6674
title: "Add supportsStrictMode compat option for providers that reject OpenAI's strict parameter"
author: long-pham
created: 2026-02-01T23:04:31Z
updated: 2026-02-02T00:15:59Z
labels: ["enhancement"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6674
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Problem

Some OpenAI-compatible endpoints reject requests that include the `strict: true` parameter in tool/function definitions. This parameter was added by OpenAI for structured outputs but isn't universally supported.

Example error from RouteLLM (`routellm.abacus.ai`):
```
HTTP 400: "Validation Error: \"strict\" - Extra inputs are not permitted"
```

The endpoint works fine for basic chat completions, but fails when tools are included:

```bash
# Works
curl -X POST "https://routellm.abacus.ai/v1/chat/completions" \
  -H "Authorization: Bearer $KEY" \
  -d '{"model": "route-llm", "messages": [{"role": "user", "content": "Hello"}]}'

# Fails
curl -X POST "https://routellm.abacus.ai/v1/chat/completions" \
  -H "Authorization: Bearer $KEY" \
  -d '{"model": "route-llm", "messages": [...], "tools": [{"type": "function", "function": {"name": "test", "parameters": {...}, "strict": true}}]}'
```

## Proposed Solution

Add a `supportsStrictMode` option to `ModelCompatSchema`:

```typescript
export const ModelCompatSchema = z.object({
  supportsStore: z.boolean().optional(),
  supportsDeveloperRole: z.boolean().optional(),
  supportsReasoningEffort: z.boolean().optional(),
  supportsStrictMode: z.boolean().optional(),  // NEW
  maxTokensField: z.union([...]).optional(),
}).strict().optional();
```

When `supportsStrictMode: false`, omit the `strict` field from tool definitions in API requests.

## Config Example

```json
{
  "models": {
    "providers": {
      "routellm": {
        "baseUrl": "https://routellm.abacus.ai/v1",
        "apiKey": "...",
        "api": "openai-completions",
        "models": [{
          "id": "route-llm",
          "name": "RouteLLM",
          "compat": { "supportsStrictMode": false }
        }]
      }
    }
  }
}
```

## Environment

- openclaw version: 2026.1.30
- @mariozechner/pi-ai: 0.50.9

## Comments


## Links

- None detected yet
