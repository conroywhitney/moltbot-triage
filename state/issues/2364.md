---
number: 2364
title: "session-memory hook hardcodes Anthropic provider instead of using configured model"
author: dejimarquis
created: 2026-01-26T20:10:40Z
updated: 2026-01-29T11:09:43Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/2364
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

The `session-memory` internal hook (used for generating session slugs via LLM) hardcodes the Anthropic provider instead of respecting the user's configured model/provider.

## Steps to Reproduce

1. Configure Clawdbot with a non-Anthropic provider (e.g., `github-copilot/claude-opus-4.5`)
2. Enable the `session-memory` hook (enabled by default)
3. Run `/new` to create a new session

## Expected Behavior

The slug generator should use the user's configured model provider, or fall back gracefully if a lightweight model isn't available.

## Actual Behavior

The hook fails with:

```
Error: No API key found for provider "anthropic". Auth store: ~/.clawdbot/agents/main/agent/auth-profiles.json
```

Even though the user has a working provider configured (`github-copilot` in this case).

## Suggested Fix

- Use the agent's configured model for slug generation, OR
- Add a config option to specify which model the hook should use, OR
- Make the hook fail silently / skip slug generation instead of erroring

## Workaround

Disable the hook:
```json
{"hooks":{"internal":{"entries":{"session-memory":{"enabled":false}}}}}
```

## Environment

- Clawdbot version: 2026.1.24-3
- Configured provider: github-copilot
- OS: macOS (Darwin 24.6.0 arm64)

## Comments

### @deblanco (2026-01-29)

really annoying this bug


## Links

- None detected yet
