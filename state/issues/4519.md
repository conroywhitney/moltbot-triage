---
number: 4519
title: "TUI: crash when search matches ANSI escape sequences"
author: bee4come
created: 2026-01-30T08:46:07Z
updated: 2026-01-31T02:30:27Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/4519
duplicate_of: null
related_issues: [4479]
blocks: []
blocked_by: []
---

## Description

## Description

When using the searchable select list in TUI mode, searching for text that partially matches ANSI escape sequences causes a crash.

## Steps to Reproduce

1. Open a TUI component with colored/styled text (e.g., model selector with highlighted items)
2. Type a search query that matches part of an ANSI escape code
3. Application crashes

## Expected Behavior

Search should only match visible text, ignoring ANSI escape sequences.

## Root Cause

The highlight function was applying regex replacement to the entire string including ANSI codes, which could corrupt the escape sequences and cause rendering issues or crashes.

## Fix

PR #4479 

## Comments

### @Glucksberg (2026-01-30)

ðŸ”— **Related:** PR #4479 addresses this â€” it prevents TUI crash when search matches ANSI escape sequences.


## Links

- None detected yet
