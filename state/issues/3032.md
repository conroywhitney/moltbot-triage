---
number: 3032
title: "doctor: don't warn about expiring OAuth tokens with valid refresh tokens"
author: anotb
created: 2026-01-27T23:41:21Z
updated: 2026-01-28T05:55:37Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/3032
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Problem

`moltbot doctor` flags OAuth providers as "expiring" or "expired" based on access token lifetime, even when a valid refresh token exists. This creates unnecessary noise since the tokens will auto-refresh on first API call.

Example output:
```
◇  Model auth ────────────────────────────────────────────────────────────╮
│                                                                         │
│  - google-antigravity: expired (0m) — Re-auth via `moltbot configure`  │
│                                                                         │
├─────────────────────────────────────────────────────────────────────────╯
```

## Expected Behavior

- If a refresh token is present and valid, don't warn about access token expiration
- Only warn when the refresh token itself is expired/revoked or missing
- Consider probing the refresh flow if there's doubt

## Current Behavior

Doctor warns about expiring/expired access tokens even though they'll auto-renew, prompting users to manually re-auth when no action is needed.

## Comments


## Links

- None detected yet
