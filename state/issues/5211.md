---
number: 5211
title: "[Bug]: iMessage: Full Disk Access (FDA) fix for macOS — permissionDenied on chat.db"
author: EmpireCreator
created: 2026-01-31T06:00:43Z
updated: 2026-02-01T08:31:58Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 2
url: https://github.com/openclaw/openclaw/issues/5211
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary
iMessage channel fails with `permissionDenied` errors on macOS. The gateway can't access `~/Library/Messages/chat.db` because Full Disk Access (FDA) can't be granted to raw binaries like Node.js — macOS requires a proper `.app` bundle.

## Steps to reproduce
1. Install OpenClaw on macOS with Apple Silicon
2. Install `imsg` via `brew install steipete/tap/imsg`
3. Configure iMessage channel in `openclaw.json`
4. Start the gateway via launchd
5. Try to send/receive iMessages

## Expected behavior
OpenClaw should read and write iMessages via the `imsg` CLI.

## Actual behavior
```
permissionDenied(path: "/Users/<username>/Library/Messages/chat.db", underlying: authorization denied (code: 23))
```
Granting FDA to `/opt/homebrew/bin/node` directly doesn't work — macOS ignores it because it's not an app bundle.

## Environment
- OpenClaw version: 2026.1.29
- OS: macOS 26.2 (25C56)
- Install method: npm (global)
- Hardware: Apple Silicon (M-series)

## Solution
Create a wrapper `.app` bundle that has FDA, then run the gateway through it:

### 1. Create the app
```bash
mkdir -p /Applications/OpenClaw.app/Contents/MacOS
mkdir -p /Applications/OpenClaw.app/Contents/Resources

cat > /Applications/OpenClaw.app/Contents/Info.plist << 'EOF'
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleExecutable</key>
    <string>OpenClaw</string>
    <key>CFBundleIdentifier</key>
    <string>ai.openclaw.gateway</string>
    <key>CFBundleName</key>
    <string>OpenClaw</string>
    <key>CFBundleVersion</key>
    <string>1.0</string>
    <key>CFBundlePackageType</key>
    <string>APPL</string>
    <key>LSUIElement</key>
    <true/>
</dict>
</plist>
EOF

cat > /Applications/OpenClaw.app/Contents/MacOS/OpenClaw << 'EOF'
#!/usr/bin/env arch -arm64 /bin/bash
exec /opt/homebrew/bin/node /opt/homebrew/lib/node_modules/openclaw/openclaw.mjs "$@"
EOF
chmod +x /Applications/OpenClaw.app/Contents/MacOS/OpenClaw

codesign --force --deep --sign - /Applications/OpenClaw.app
xattr -cr /Applications/OpenClaw.app
```

### 2. Grant FDA to both:
- `/Applications/OpenClaw.app`
- `/opt/homebrew/bin/node`

(System Settings → Privacy & Security → Full Disk Access)

### 3. Update launchd plist
Edit `~/Library/LaunchAgents/ai.openclaw.gateway.plist`:
```xml
<key>ProgramArguments</key>
<array>
  <string>/Applications/OpenClaw.app/Contents/MacOS/OpenClaw</string>
  <string>gateway</string>
  <string>--port</string>
  <string>18789</string>
</array>
```

### 4. Reload
```bash
launchctl unload ~/Library/LaunchAgents/ai.openclaw.gateway.plist
launchctl load ~/Library/LaunchAgents/ai.openclaw.gateway.plist
```

### 5. Verify
```bash
openclaw doctor
```
Should show `iMessage: ok`

## Comments

### @pypandas (2026-02-01)

it works fine in 2026.1.30 version. Thanks!


## Links

- None detected yet
