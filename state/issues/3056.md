---
number: 3056
title: "feat(telegram): Add support for creating forum topics via message tool"
author: hotfingerdip
created: 2026-01-28T01:11:41Z
updated: 2026-01-28T05:55:19Z
labels: ["enhancement"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/3056
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Feature Request

**Summary:** Allow the agent to create Telegram forum topics (threads) programmatically via the `message` tool, so the bot can organize conversations into topics on the fly.

### Use Case

When running an agent in a Telegram supergroup with forum topics enabled, the agent currently can only _send to_ existing topics (via `threadId`). It would be very useful if the agent could also **create new topics** — for example, to create a topic per project, per daily report, per conversation thread, etc.

### Current Behavior

- The `message` tool supports `action=send` with `threadId` to target an existing forum topic
- There is no way for the agent to create a new topic

### Desired Behavior

Add a new action (e.g., `action=createTopic` or extend `action=send`) to the message tool for Telegram that:
1. Creates a new forum topic in a supergroup
2. Returns the new `message_thread_id` so the agent can send follow-up messages to it
3. Supports optional parameters: `name` (required), `iconColor`, `iconCustomEmojiId`

### Implementation Notes

grammY already exposes [`api.createForumTopic`](https://github.com/grammyjs/grammY/blob/main/src/core/api.ts) which wraps the [Telegram Bot API method](https://core.telegram.org/bots/api#createforumtopic). The bot needs `can_manage_topics` admin rights.

#### Suggested approach

**1. Add a new action to the message tool schema** (e.g., in `src/agents/tools/telegram-actions.ts` or the message tool definition):

```typescript
// New action for creating forum topics
interface CreateTopicParams {
  action: "createTopic";
  target: string;       // chat ID (e.g., "telegram:-100123456789")
  name: string;         // Topic name (1-128 characters)
  iconColor?: number;   // Color of the topic icon (0x6FB9F0, 0xFFD67E, 0xCB86DB, 0x8EEE98, 0xFF93B2, 0xFB6F5F)
  iconCustomEmojiId?: string; // Custom emoji for the topic icon
}
```

**2. Handle the action in the Telegram message handler:**

```typescript
// In the message action handler for Telegram
case "createTopic": {
  const { chatId } = parseTelegramTarget(params.target);
  
  const result = await bot.api.createForumTopic(chatId, params.name, {
    icon_color: params.iconColor,
    icon_custom_emoji_id: params.iconCustomEmojiId,
  });
  
  return {
    ok: true,
    messageThreadId: result.message_thread_id,
    name: result.name,
    iconColor: result.icon_color,
    iconCustomEmojiId: result.icon_custom_emoji_id,
  };
}
```

**3. The agent can then use it like:**

```
message(action="createTopic", target="telegram:-100123456789", name="Daily Report - Jan 28")
// Returns: { messageThreadId: 456, name: "Daily Report - Jan 28" }

// Then send to the new topic:
message(action="send", target="telegram:-100123456789", threadId="456", message="Here is today's report...")
```

#### Related Telegram Bot API methods to consider

For completeness, these could also be exposed later:
- `editForumTopic` — rename/change icon
- `closeForumTopic` / `reopenForumTopic` — archive/unarchive
- `deleteForumTopic` — delete entirely
- `getForumTopicIconStickers` — list available icon stickers

### Requirements

- Bot must be an admin in the supergroup with `can_manage_topics` permission
- The supergroup must have forum topics enabled

### Environment

- Clawdbot version: 2026.1.27-beta.1 (source)
- grammY already supports `createForumTopic` in its API

## Comments


## Links

- None detected yet
