---
number: 7131
title: "Mark Node as local when running on same device as Gateway to prevent permission issues"
author: Sandboxcn
created: 2026-02-02T12:41:35Z
updated: 2026-02-02T12:42:51Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7131
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Problem

When Gateway and Node run on the same device, the agent may mistakenly use Node to execute commands, leading to permission issues.

### Reproduction Steps

1. Gateway runs on Mac mini
2. OpenClaw App also runs on the same Mac mini (connects as a Node)
3. System prompt shows "Remote macOS node available (yanbo's Mac mini)"
4. Agent tries to run `icalBuddy` via Node to query calendar
5. Node returns "No calendars" (permission denied)
6. However, local `exec` has the permission and works fine

### Root Cause

- Agent cannot determine if Node and Gateway are on the same machine
- System prompt says "Remote macOS node", misleading agent to use Node instead of local exec
- Node and Gateway have separate permissions; Node may lack certain system permissions

### Suggested Solutions

1. **Detect co-located deployment**: Add `isLocal: true` flag to node info when Node and Gateway are on the same device

2. **Improve system prompt**:
   - If Gateway itself runs on macOS, don't suggest "Run macOS-only skills via nodes.run"
   - Or distinguish between "local macOS" and "remote macOS node"

3. **Node naming hint**: Label co-located Node as "Mac mini (local)"

### Environment

- OpenClaw: 2026.2.1
- Platform: macOS

## Comments


## Links

- None detected yet
