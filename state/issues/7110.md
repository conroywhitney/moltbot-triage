---
number: 7110
title: "[Bug] Slack file upload fails with missing title parameter"
author: shuans
created: 2026-02-02T11:57:58Z
updated: 2026-02-02T15:20:40Z
labels: []
assignees: []
comments_count: 2
reactions_total: 1
url: https://github.com/openclaw/openclaw/issues/7110
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug Description

**Severity:** Medium

**Component:** Slack file upload (dist/slack/send.js)

**Environment:** OpenClaw 2026.1.30

---

## Summary

Slack file upload fails with `invalid_arguments` error when using the `message` tool with `media` parameter. The issue is caused by two missing required parameters in the `uploadSlackFile` function.

---

## Root Cause

### Issue 1: Missing `title` parameter

The Slack `files.uploadV2` API requires a `title` parameter, but the `uploadSlackFile` function in `dist/slack/send.js` did not include it.

### Issue 2: Channel ID not resolved for file uploads

When using channel names like `#ems` instead of channel IDs like `C0AAPHZMFAB`, file uploads fail because the `uploadSlackFile` function directly passes the channel name to Slack API, which requires the format `^[CGDZ][A-Z0-9]{8,}$`.

---

## Steps to Reproduce

1. Use the `message` tool with `media` parameter:
```json
{
  "action": "send",
  "channel": "slack",
  "media": "/path/to/file.zip",
  "message": "Test file",
  "target": "#ems"
}
```

2. Error received:
```
[ERROR] web-api:WebClient: input must match regex pattern: ^[CGDZ][A-Z0-9]{8,}$ [json-pointer:/channel_id]
An API error occurred: invalid_arguments
```

---

## Suggested Fix

**File:** `dist/slack/send.js`

1. Add `title` parameter in `uploadSlackFile` function
2. Add `resolveChannelIdForUpload` helper function to resolve channel names to IDs
3. Use resolved channel ID when calling `uploadSlackFile`

---

## Impact

- File uploads to Slack channels by name (e.g., `#ems`) fail
- Agent tools cannot properly upload generated reports/files to Slack

## Comments

### @Yeom-JinHo (2026-02-02)

@shuans 
I addressed this issue in PR #7162 
If you have some time, I’d really appreciate it if you could take a look.

### @shuans (2026-02-02)

## Update

Checked PR #7162 diff - it only addresses the channel ID resolution issue:

**Files Modified**:
- `src/slack/resolve-channels.ts` - Added `resolveChannelIdForUpload` function
- `src/slack/send.ts` - Modified `resolveChannelId` to use new function
- `src/slack/resolve-channels.test.ts` - Added unit tests

**Conclusion**:
- ✅ PR #7162 fixes channel name → ID resolution
- ❌ PR #7162 does NOT fix the `title` parameter issue

The `title` parameter needs to be added to `uploadSlackFile` function, which is not part of this PR.


## Links

- None detected yet
