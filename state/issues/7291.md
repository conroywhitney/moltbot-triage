---
number: 7291
title: "[Feature]: Slack: Support per-agent identity posting (username + icon_emoji)"
author: TaylorFacen
created: 2026-02-02T17:04:17Z
updated: 2026-02-02T17:04:17Z
labels: ["enhancement"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7291
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Problem
â€‹
When using multiple agents with different identities (name + emoji), all Slack messages appear under the same bot name with no emoji, making it impossible to visually distinguish which agent is speaking.
â€‹
**Current behavior:**
- All agents post as "Chief" (or the default bot name)
- No emoji shown in messages
- Agent identity config (`identity.name` and `identity.emoji`) is ignored
â€‹
**Expected behavior:**
- Agent messages should post with `username` set to `identity.name`
- Agent messages should post with `icon_emoji` set to `identity.emoji`
- Each agent appears distinct in Slack threads
â€‹
## Use Case
â€‹
Multi-agent setups where different agents have different roles:
- **Chief** (COO) - coordination, execution
- **Penny** (CFO) - financial reports, payroll
- **Doc** (Head of CS) - support responses
â€‹
Users should be able to identify which agent is speaking at a glance.
â€‹
## Current Configuration
â€‹
Agent identities are configured but not used by Slack:
â€‹
```json5
{
  "agents": {
    "list": [
      {
        "id": "main",
        "name": "Chief",
        "identity": {
          "name": "Chief",
          "emoji": "ðŸŽ¯"
        }
      },
      {
        "id": "penny",
        "name": "Penny",
        "identity": {
          "name": "Penny",
          "emoji": "ðŸ’°"
        }
      },
      {
        "id": "doc",
        "name": "Doc",
        "identity": {
          "name": "Doc",
          "emoji": "ðŸ©º"
        }
      }
    ]
  }
}
```
â€‹
## Technical Details
â€‹
### Code locations to update:
â€‹
1. **`/openclaw/dist/channels/plugins/outbound/slack.js`**
   - Update `sendText` and `sendMedia` to accept agent identity params
   - Pass identity to `sendMessageSlack()`
â€‹
2. **`/openclaw/dist/slack/send.js`**
   - Add `username` and `icon_emoji` to `sendMessageSlack()` options
   - Include in `client.chat.postMessage()` call
â€‹
3. **Delivery pipeline**
   - Pass agent context (identity) through the outbound delivery system
â€‹
### Slack API support
â€‹
The Slack API already supports this via `chat.postMessage`:
- `username`: string (bot display name)
- `icon_emoji`: string (emoji like `:dart:` or `:moneybag:`)
â€‹
Reference: https://api.slack.com/methods/chat.postMessage
â€‹
### Proposed implementation
â€‹
```typescript
// In send.js
async function sendMessageSlack(to, message, opts = {}) {
  // ... existing code ...
  
  const postMessagePayload = {
    channel: channelId,
    text: chunk,
    thread_ts: opts.threadTs,
    // NEW: Add identity if provided
    ...(opts.identity?.name && { username: opts.identity.name }),
    ...(opts.identity?.emoji && { icon_emoji: opts.identity.emoji }),
  };
  
  const response = await client.chat.postMessage(postMessagePayload);
  // ... existing code ...
}
```
â€‹
```typescript
// In outbound/slack.js
sendText: async ({ to, text, accountId, deps, replyToId, threadId, agentIdentity }) => {
  const send = deps?.sendSlack ?? sendMessageSlack;
  const threadTs = replyToId ?? (threadId != null ? String(threadId) : undefined);
  
  const result = await send(to, text, {
    threadTs,
    accountId: accountId ?? undefined,
    // NEW: Pass identity
    identity: agentIdentity,
  });
  
  return { channel: "slack", ...result };
},
```
â€‹
## Emoji format note
â€‹
Slack expects emoji in `:name:` format (e.g., `:dart:` not ðŸŽ¯). The implementation should either:
1. Convert Unicode emoji to Slack emoji names (e.g., ï¿½ï¿½ â†’ `:dart:`)
2. Store Slack-compatible emoji format in `identity.emoji`
3. Support both formats with auto-conversion
â€‹
Emoji name mapping reference: https://github.com/iamcal/emoji-data
â€‹
## Additional considerations
â€‹
- Should this be opt-in via a config flag (e.g., `channels.slack.useAgentIdentity: true`)?
- How should this interact with Slack's `as_user` parameter?
- Should we fall back to bot default if identity is not configured?

## Comments


## Links

- None detected yet
