---
number: 5243
title: "[Bug]: Voice Call - RealtimeSTT fails with \"Missing required parameter: 'session'\""
author: Kri8tivemike
created: 2026-01-31T07:27:12Z
updated: 2026-02-01T17:13:56Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/5243
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

# Bug Report: Voice Call - RealtimeSTT fails with "Missing required parameter: 'session'"

## Description

During voice calls in conversation mode, the OpenAI Realtime STT (Speech-to-Text) fails to initialize properly. The user can hear Clawdbot speak, but Clawdbot cannot hear or respond to user speech.

The error occurs intermittently - sometimes the transcription session creates successfully but still fails to process speech, other times it fails immediately with a "missing required parameter: session" error.

## Environment

- **Clawdbot version:** 2026.1.24-3
- **OS:** macOS 15 (Darwin 25.2.0, arm64)
- **Voice-call provider:** Twilio
- **Streaming:** enabled
- **TTS:** ElevenLabs (working)
- **Response Model:** xai/grok-4-1-fast-reasoning

## Error

```
[RealtimeSTT] Event received: error {
  "type": "error",
  "event_id": "event_D3xofGBR0vhKTzvwGA4Hp",
  "error": {
    "type": "invalid_request_error",
    "code": "missing_required_parameter",
    "message": "Missing required parameter: 'session'.",
    "param": "session"
  }
}
```

## Voice-Call Config

```json
{
  "provider": "twilio",
  "twilio": {
    "accountSid": "ACxxx",
    "authToken": "xxx"
  },
  "fromNumber": "+1267XXXXXXX",
  "inboundPolicy": "open",
  "inboundGreeting": "Hello, this is Clawdbot. I'm here to help you today.",
  "skipSignatureVerification": true,
  "maxConcurrentCalls": 20,
  "publicUrl": "https://xxx.tail0b12a7.ts.net/voice/webhook",
  "tunnel": {
    "provider": "none"
  },
  "outbound": {
    "defaultMode": "conversation",
    "notifyHangupDelaySec": 3
  },
  "streaming": {
    "enabled": true,
    "streamPath": "/voice/stream",
    "openaiApiKey": "sk-proj-xxx"
  },
  "responseModel": "xai/grok-4-1-fast-reasoning",
  "responseTimeoutMs": 20000,
  "tts": {
    "provider": "elevenlabs",
    "elevenlabs": {
      "apiKey": "xxx",
      "voiceId": "54noaetjxv80HAvkIbfQ",
      "modelId": "eleven_turbo_v2_5"
    }
  }
}
```

## Steps to Reproduce

1. Configure voice-call plugin with Twilio and streaming enabled
2. Initiate a voice call in conversation mode: `clawdbot voicecall call --to "+1XXXXXXXXXX" --message "Hello"`
3. Wait for Clawdbot to speak the initial message
4. Try to speak/respond during the call
5. Observe that Clawdbot does not hear or respond to speech

## Logs

### Call Sequence (with error)

```
[voice-call] Starting max duration timer (300s) for call 891c82e8-4b18-4598-a201-d98f29d29999
[MediaStream] Twilio connected
[MediaStream] Stream started: MZ14f521743ab21085336fbe850acfda25 (call: CA449bf02ba1a6a60b0fef769e6f51da26)
[voice-call] Speaking initial message for call 891c82e8-4b18-4598-a201-d98f29d29999 (mode: conversation)
[RealtimeSTT] WebSocket connected
[RealtimeSTT] Event received: transcription_session.created {...}
[RealtimeSTT] transcription_session.created
[RealtimeSTT] Event received: error {"type":"error","error":{"type":"invalid_request_error","code":"missing_required_parameter","message":"Missing required parameter: 'session'.","param":"session"}}
[MediaStream] Stream stopped: MZ14f521743ab21085336fbe850acfda25
[RealtimeSTT] WebSocket closed (code: 1005, reason: none)
```

### Call Sequence (session created but no transcription output)

```
[voice-call] Starting max duration timer (300s) for call 2420c9d3-7512-4b91-a45f-7c44851ad1e9
[MediaStream] Twilio connected
[MediaStream] Stream started: MZ54ad3d8a99feadd9cfa27c6fa366e02b
[voice-call] Speaking initial message for call 2420c9d3-7512-4b91-a45f-7c44851ad1e9 (mode: conversation)
[RealtimeSTT] WebSocket connected
[RealtimeSTT] transcription_session.created
[RealtimeSTT] transcription_session.updated
[RealtimeSTT] Speech started
[MediaStream] Stream stopped: MZ54ad3d8a99feadd9cfa27c6fa366e02b
[RealtimeSTT] WebSocket closed (code: 1005, reason: none)
```

In the second case, "Speech started" was detected but no transcription result was processed before the stream closed.

## Expected Behavior

- RealtimeSTT should initialize without errors
- User speech should be transcribed
- Clawdbot should respond to transcribed speech during conversation mode calls

## Actual Behavior

- TTS (Clawdbot speaking) works correctly
- STT (Clawdbot hearing) fails with session parameter error OR initializes but doesn't produce transcription results
- Two-way conversation is not functional

## Workaround Attempted

Disabling streaming (`streaming.enabled: false`) - this prevents the error but also disables STT entirely, making conversation mode non-functional.

## Additional Context

- The OpenAI API key is valid and works for other API calls
- The error appears to be in how the RealtimeSTT client sends requests to OpenAI's Realtime API
- The session is created (`transcription_session.created`) but subsequent requests fail because they don't include the session reference

## Possible Cause

Looking at the error, it seems like after `transcription_session.created`, the client sends audio data without including the `session` parameter that OpenAI's Realtime API now requires. This could be due to:

1. An OpenAI API change that added the session parameter requirement
2. A bug in the RealtimeSTT client implementation
3. Missing session ID propagation after session creation

## Comments

### @Kri8tivemike (2026-02-01)

## Update: Bug persists in v2026.1.30

Just upgraded from v2026.1.24-3 to **v2026.1.30** and tested voice calls again. The issue is **not fixed**.

### Test Environment
- **OpenClaw version:** 2026.1.30
- **OS:** macOS Darwin 25.2.0 (arm64)
- **Voice provider:** Twilio
- **TTS:** ElevenLabs (working)
- **Webhook:** Tailscale Funnel (reachable, verified)

### Test Results

| Test | Result |
|------|--------|
| Streaming disabled | Application error on answer |
| Streaming enabled | Same application error |
| Twilio call status | `completed` (no Twilio-side error) |
| ElevenLabs TTS | Working (HTTP 200) |
| Webhook reachability | Confirmed (returns 405 on test POST) |

### Behavior
1. Call initiated successfully via `openclaw agent` or `openclaw voicecall call`
2. Phone rings, user answers
3. Immediately hears: *"We are sorry, an application error has occurred. Goodbye."*
4. Call ends

### Logs
Gateway logs show call initiated but no error details captured:
```
[voice-call] Media streaming initialized
[voice-call] Webhook server listening on http://127.0.0.1:3334/voice/webhook
[voice-call] Media stream WebSocket on ws://127.0.0.1:3334/voice/stream
[gateway] [voice-call] Webhook URL: https://xxx.ts.net/voice/webhook
```

No RealtimeSTT errors visible in logs after the upgrade, but the behavior matches the original bug report exactly.

### Request
Could a maintainer please look into this? The voice call feature is completely broken for conversation mode. Happy to provide additional logs or test specific fixes.

---
*Tested on 2026-02-01*


## Links

- None detected yet
