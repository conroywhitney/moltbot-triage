---
number: 5275
title: "[Bug]:"
author: yanncarlier
created: 2026-01-31T08:20:45Z
updated: 2026-02-01T08:59:21Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 1
url: https://github.com/openclaw/openclaw/issues/5275
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary
What went wrong?

## Steps to reproduce
1.  git clone https://github.com/openclaw/openclaw.git
2. cd openclaw

3. pnpm install
4. pnpm ui:build # auto-installs UI deps on first run

## Expected behavior
What did you expect to happen?
auto-installs UI deps on first run

## Actual behavior
What actually happened?

A2UI bundling failed. Re-run with: pnpm canvas:a2ui:bundle
If this persists, verify pnpm deps and try again.
 ELIFECYCLE  Command failed with exit code 254.
 ELIFECYCLE  Command failed with exit code 254.

## Environment
- Clawdbot version:  openclaw 2026.1.29
- OS: Ubuntu 24.04.3 LTS
- Install method: pnpm install

## Logs or screenshots
Paste relevant logs or add screenshots (redact secrets).
pnpm build

> openclaw@2026.1.29 build /home/y/openclaw
> pnpm canvas:a2ui:bundle && tsdown && node --import tsx scripts/canvas-a2ui-copy.ts && node --import tsx scripts/copy-hook-metadata.ts && node --import tsx scripts/write-build-info.ts


> openclaw@2026.1.29 canvas:a2ui:bundle /home/y/openclaw
> bash scripts/bundle-a2ui.sh

A2UI bundling failed. Re-run with: pnpm canvas:a2ui:bundle
If this persists, verify pnpm deps and try again.
 ELIFECYCLE  Command failed with exit code 254.
 ELIFECYCLE  Command failed with exit code 254.

pnpm canvas:a2ui:bundle

> openclaw@2026.1.29 canvas:a2ui:bundle /home/y/openclaw
> bash scripts/bundle-a2ui.sh

A2UI bundling failed. Re-run with: pnpm canvas:a2ui:bundle
If this persists, verify pnpm deps and try again.
 ELIFECYCLE  Command failed with exit code 254.

## Comments

### @Temila (2026-02-01)

Successfully fix this issue with opencode:

### Root Cause Analysis
The pnpm build command failed during the A2UI bundling step with exit code 254. This was caused by three issues:

 - Missing npm dependencies in vendor/a2ui/renderers/lit/ directory
 - Incorrect TypeScript invocation: The pnpm -s exec tsc command in the script was running from the root directory, but tsc was only available in the vendor directory's node_modules (not in the root workspace)
 - Missing pnpm exec for rolldown: The script was calling rolldown directly instead of using pnpm exec rolldown

### Fix Applied
**Step 1: Install npm dependencies in vendor directory**

```bash
cd vendor/a2ui/renderers/lit
npm install
```

**Step 2: Update scripts/bundle-a2ui.sh (lines 84-85)**

Before:

```bash
pnpm -s exec tsc -p "$A2UI_RENDERER_DIR/tsconfig.json"
rolldown -c "$A2UI_APP_DIR/rolldown.config.mjs"
```
After:

```bash
cd "$A2UI_RENDERER_DIR" && npx tsc -p tsconfig.json && cd "$ROOT_DIR"
pnpm -s exec rolldown -c "$A2UI_APP_DIR/rolldown.config.mjs"
```

**This change ensures:**
- TypeScript compiler is invoked from the correct directory where it's installed
- Rolldown is called via pnpm exec for proper package resolution
- The script returns to the root directory after compilation

**Verification**
The build now completes successfully:
pnpm build  # ✓ Success
pnpm lint   # ✓ No errors found



## Links

- None detected yet
