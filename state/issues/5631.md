---
number: 5631
title: "bug: state dir migration leaves hardcoded .clawdbot paths in sessions.json"
author: regalstreak
created: 2026-01-31T19:09:54Z
updated: 2026-02-02T00:18:27Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 1
url: https://github.com/openclaw/openclaw/issues/5631
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

The state directory migration from `~/.clawdbot` to `~/.openclaw` doesn't update hardcoded paths in `sessions.json`, causing the old directory to be recreated on every message.

## Steps to Reproduce

1. Migrate from old clawdbot installation to openclaw
2. Delete `~/.clawdbot` directory
3. Send a message to trigger session write
4. `~/.clawdbot/agents/main/sessions/` is recreated with new session files

## Root Cause

`~/.openclaw/agents/main/sessions/sessions.json` contains hardcoded `sessionFile` paths:

```json
{
  "agent:main:main": {
    "sessionFile": "/Users/username/.clawdbot/agents/main/sessions/xxx.jsonl",
    ...
  }
}
```

The migration moves the file itself but doesn't rewrite the paths inside.

## Expected Behavior

Migration should:
1. Copy/move `sessions.json` to new location ✅ (already works)
2. Rewrite all `sessionFile` paths to point to `~/.openclaw` ❌ (missing)
3. Copy/move session JSONL files to new location

## Workaround

```bash
# Backup
cp ~/.openclaw/agents/main/sessions/sessions.json ~/.openclaw/agents/main/sessions/sessions.json.backup

# Fix paths
sed 's|~/.clawdbot/|~/.openclaw/|g' ~/.openclaw/agents/main/sessions/sessions.json > /tmp/sessions_fixed.json
mv /tmp/sessions_fixed.json ~/.openclaw/agents/main/sessions/sessions.json

# Move session files
mv ~/.clawdbot/agents/main/sessions/*.jsonl* ~/.openclaw/agents/main/sessions/

# Clean up
rm -rf ~/.clawdbot
```

## Impact

- Users repeatedly delete `.clawdbot` thinking migration is incomplete
- Session files split across two directories
- Confusing when troubleshooting

## Suggested Fix

Add path rewriting to the migration logic in `openclaw doctor` or initial migration:

```typescript
// Pseudo-code
const sessionsJson = readJson(newSessionsPath);
for (const [key, session] of Object.entries(sessionsJson)) {
  if (session.sessionFile?.includes('/.clawdbot/')) {
    session.sessionFile = session.sessionFile.replace('/.clawdbot/', '/.openclaw/');
  }
}
writeJson(newSessionsPath, sessionsJson);
```

## Environment

- OS: macOS 15.2 (arm64)
- OpenClaw version: 2026.1.30
- Migrated from: clawdbot (legacy)

## Comments

### @iwahbe (2026-02-01)

I recently hit the same issue moving my bot to a different system user. I'd rather that `sessions.json` contained relative paths, that way you could just rename session directories and have it "just work".


## Links

- None detected yet
