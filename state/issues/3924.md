---
number: 3924
title: "[Feature]: Moonshot API: Support for China mainland endpoint (api.moonshot.cn)"
author: shangyaqi
created: 2026-01-29T11:02:50Z
updated: 2026-01-30T08:22:48Z
labels: ["enhancement"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/3924
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

### Problem
The current implementation hardcodes Moonshot API base URL as `https://api.moonshot.ai/v1`, which is the international version. However, Moonshot provides two different API endpoints:

- **International**: `https://api.moonshot.ai/v1` 
- **China Mainland**: `https://api.moonshot.cn/v1`

Users in China mainland cannot access the `.ai` domain and must use the `.cn` endpoint. Currently, this causes authentication failures (401 Invalid Authentication) even with valid API keys.

### Affected Files
The base URL is hardcoded in:
- `dist/commands/onboard-auth.models.js`
- `dist/agents/models-config.providers.js`

javascript
// Current hardcoded value
export const MOONSHOT_BASE_URL = "https://api.moonshot.ai/v1";

### Proposed Solution

**Option 1: Configuration-based** (Recommended)
Allow users to configure the base URL in `auth-profiles.json`:
json
{
 "profiles": {
   "moonshot:default": {
     "type": "api_key",
     "provider": "moonshot",
     "key": "sk-xxx",
     "baseUrl": "https://api.moonshot.cn/v1"
   }
 }
}

**Option 2: Environment Variable**
Support `MOONSHOT_BASE_URL` environment variable to override the default.

**Option 3: Auto-detection**
Detect user's region and automatically select the appropriate endpoint.

### Workaround
Users can manually modify the source files:
bash
sed -i 's/api\.moonshot\.ai/api.moonshot.cn/g' ~/.npm-global/lib/node_modules/clawdbot/dist/commands/onboard-auth.models.js
sed -i 's/api\.moonshot\.ai/api.moonshot.cn/g' ~/.npm-global/lib/node_modules/clawdbot/dist/agents/models-config.providers.js

### Environment
- Clawdbot version: 2026.1.24-3
- Region: China mainland
- Issue: API calls fail with 401 when using `.ai` endpoint

## Comments

### @pbxie (2026-01-30)

<img width="1199" height="541" alt="Image" src="https://github.com/user-attachments/assets/39b56f2e-963e-47bb-b7eb-0c61b43ffd8b" />
在Control ui这里改为中文的即可


## Links

- None detected yet
