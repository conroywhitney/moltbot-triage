---
number: 5780
title: "[Bug]: Installing extensions from NPM always fails"
author: joshuafhiggins
created: 2026-01-31T23:46:57Z
updated: 2026-02-01T17:23:29Z
labels: ["bug"]
assignees: []
comments_count: 4
reactions_total: 3
url: https://github.com/openclaw/openclaw/issues/5780
duplicate_of: null
related_issues: [1839,5292]
blocks: []
blocked_by: []
---

## Description

## Summary

Trying to install extensions like Discord and Matrix will always fail when picking the `@openclaw/matrix` option to download from NPM. `npm install` for the extensions fails because of the dev dependency workspace. `pnpm install` also won't work because it has no path back to the whole repo, since the extension was downloaded separately.

The work around is to manually remove the dev dependency entry and run `npm i`

I've tried git bisecting but no release since 2026.1.24 has worked with this extension install method.

Probable cause of #5292 and #1839 

## Steps to reproduce

1. Run the initial onboarding
2. Try to install a channel/plugin like Discord or Matrix
3. Pick the download from NPM option

## Expected behavior

The extension to install correctly

## Actual behavior

Fails to install dependencies

## Environment

- Clawdbot version: 2026.1.24 - 2026.1.30 (and main)
- OS: Tested on Ubuntu 24.04, Docker, and macOS
- Install method (pnpm/npx/docker/etc): pnpm and Docker

## Logs or screenshots

```
◇  Select a channel
│  Matrix (plugin)
│
◇  Install Matrix plugin?
│  Download from npm (@openclaw/matrix)
Downloading @openclaw/matrix…
Extracting /tmp/openclaw-npm-pack-yYve44/openclaw-matrix-2026.1.29.tgz…
Installing to /home/node/.openclaw/extensions/matrix…
Installing plugin dependencies…
│
◇  Plugin install ──────────────────────────────────────────╮
│                                                           │
│  Failed to install @openclaw/matrix: npm install failed:  │
│                                                           │
├───────────────────────────────────────────────────────────╯
Plugin install failed: npm install failed:
```

## Comments

### @PinguIntel (2026-02-01)

Getting the same issue. Running on 24.04 in a VM.

### @BLACK4585 (2026-02-01)

@joshuafhiggins Are you using over (P)NPM or GIT?
> The work around is to manually remove the dev dependency entry and run npm i

Which dependency and where?

### @Anas099X (2026-02-01)

same issue here too but for installing openclaw in general

### @joshuafhiggins (2026-02-01)

> [@joshuafhiggins](https://github.com/joshuafhiggins) Are you using over (P)NPM or GIT?
> 
> > The work around is to manually remove the dev dependency entry and run npm i
> 
> Which dependency and where?

NPM. Inside of `extensions/matrix/package.json` (or any of the extensions) there is: 
```
"devDependencies": {
  "openclaw": "workspace:*"
}
```

`npm` can't parse it but `pnpm` does and also fails because it can't find the root of the monorepo it refers to. Running with `--omit=dev` also doesn't fix this because `npm` and `pnpm` parse to make sure the `package.json` is valid regardless.


## Links

- None detected yet
