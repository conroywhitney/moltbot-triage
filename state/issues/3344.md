---
number: 3344
title: "[Bug]: Gemini outputs fake tool call text instead of executing tools"
author: tonydehnke
created: 2026-01-28T13:31:34Z
updated: 2026-02-02T05:21:34Z
labels: ["bug"]
assignees: []
comments_count: 6
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/3344
duplicate_of: null
related_issues: [1391,1789,2215]
blocks: []
blocked_by: []
---

## Description

## Summary

When using Gemini models (tested with `gemini-3-pro-high` via `google-antigravity`), the model outputs text that *describes* a tool call instead of actually executing the tool. This results in users seeing raw tool call syntax in their chat.

## Observed Behavior

**Issue 1: Fake tool call output instead of execution**

The model outputs this text to the user instead of calling the `read` tool:

```
[Historical context: a different model called tool "read" with arguments: {
  "path": "/home/node/.clawdbot/media/inbound/<uuid>.md"
}. Do not mimic this format - use proper function calling.]
```

The `stopReason` in the session log is `"stop"` (not `"tool_use"`), confirming the tool was never called.

This happened 3 times consecutively in the same session.

**Issue 2: Wrong parameters for message tool**

The model also used a display name instead of the chat ID when trying to reply via Telegram:

```
[tools] message failed: Unknown target "Tony D" for Telegram. Hint: <chatId>
```

Expected: Model should use the chat ID from the incoming message context (e.g., `telegram:123456789`)
Actual: Model used the display name "Tony D"

## Expected Behavior

1. Model should execute the `read` tool via proper function calling, not output fake tool syntax as text
2. Model should use the correct chat ID from message context for replies

## Session Log Excerpts

```json
{"type":"message","id":"4c34ca8e","timestamp":"2026-01-28T13:00:46.662Z","message":{"role":"assistant","content":[{"type":"text","text":"[Historical context: a different model called tool \"read\" with arguments: {\n  \"path\": \"/home/node/.clawdbot/media/inbound/<uuid>.md\"\n}. Do not mimic this format - use proper function calling.]"}],"api":"google-gemini-cli","provider":"google-antigravity","model":"gemini-3-pro-high","stopReason":"stop"}}
```

```
2026-01-28T13:25:11.317Z [tools] message failed: Unknown target "Tony D" for Telegram. Hint: <chatId>
```

## Environment

- Moltbot version: 2026.1.27-beta.1
- Model: `gemini-3-pro-high` via `google-antigravity` provider
- Channel: Telegram
- OS: Linux (Ubuntu)

## Related Issues

- #1391 - Gemini outputs command text in chat (similar but tool *does* execute)
- #1789 - Gemini requires explicit tool call patterns
- #2215 - Gemini fails to manage CronJobs via Tool Use

This appears to be a more severe variant where the tool is never executed at all, just hallucinated as text output.

## Comments

### @tonydehnke (2026-01-28)

## Additional Issue: Gemini Pro silently hangs (no response, no error)

After switching to `gemini-3-pro-high`, the next user message caused the agent to hang indefinitely with no response and no error logged.

**Timeline:**
```
13:26:27 UTC - Model switched to gemini-3-pro-high
13:27:32 UTC - User message received ("Can you read .md files if I send one to you?")
13:27:32 UTC - [agent/embedded] google tool schema snapshot (processing started)
13:29:31 UTC - typing TTL reached (2m); stopping typing indicator
```

**Observations:**
- No error was logged
- No response was ever returned from the Gemini API
- Rate limits are NOT the issue (Gemini 3 Pro High shows 100% available with 167h remaining)
- The API call simply never completed

**Log excerpt:**
```
2026-01-28T13:27:32.174Z [agent/embedded] google tool schema snapshot
2026-01-28T13:29:31.866Z typing TTL reached (2m); stopping typing indicator
```

This appears to be a silent failure in the Gemini Pro API integration - the request was sent but no response (success or error) was ever received.

### @yjgoo (2026-01-28)

> ## Additional Issue: Gemini Pro silently hangs (no response, no error)
> After switching to `gemini-3-pro-high`, the next user message caused the agent to hang indefinitely with no response and no error logged.
> 
> **Timeline:**
> 
> ```
> 13:26:27 UTC - Model switched to gemini-3-pro-high
> 13:27:32 UTC - User message received ("Can you read .md files if I send one to you?")
> 13:27:32 UTC - [agent/embedded] google tool schema snapshot (processing started)
> 13:29:31 UTC - typing TTL reached (2m); stopping typing indicator
> ```
> 
> **Observations:**
> 
> * No error was logged
> * No response was ever returned from the Gemini API
> * Rate limits are NOT the issue (Gemini 3 Pro High shows 100% available with 167h remaining)
> * The API call simply never completed
> 
> **Log excerpt:**
> 
> ```
> 2026-01-28T13:27:32.174Z [agent/embedded] google tool schema snapshot
> 2026-01-28T13:29:31.866Z typing TTL reached (2m); stopping typing indicator
> ```
> 
> This appears to be a silent failure in the Gemini Pro API integration - the request was sent but no response (success or error) was ever received.

I have the same question, Is there a solution?

### @steffanjensen (2026-01-30)

Why havent this been fixed ? Started again with latest update. 

I fixed it. I got openclawd to fix it for me. Sometime wirh Tool.md

### @azalio (2026-02-01)

> Why havent this been fixed ? Started again with latest update.
> 
> I fixed it. I got openclawd to fix it for me. Sometime wirh Tool.md

How you fixed it?

### @steffanjensen (2026-02-02)

@azalio I added this to TOOLS.md (its in your working folder)

## Model Quirks & Fixes

### Gemini `exec` Tool Pattern
Gemini models (e.g., google-antigravity/gemini-3-pro-high) may struggle to call shell scripts correctly. Always explicitly use this JSON pattern:

```json
{
  "tool": "exec",
  "arguments": { "command": "/path/to/script.sh ..." }
}
```

### CRITICAL ANTI-PATTERNS
- **No Historical Mimicry**: NEVER output text starting with `[Historical context:`. This is a system prompt artifact. Outputting it confuses the user interface. Just call the tool directly.
- **Native Tool Calls**: Do not "narrate" the tool call in JSON unless explicitly required by a quirk. Use the model's native function calling capability.

### @mickey9801 (2026-02-02)

@steffanjensen I am suffering this "Historical context" problem since yesterday. When I ask openclaw to fix it, it just try to compress history, but the problem still happen.

I have this problem on calling tools "gateway", "web_search" and "edit". Can you explain more detail about this fix?


## Links

- None detected yet
