---
number: 4320
title: "Feature: Auto-append chat messages to rolling log file"
author: micheldegeofroy
created: 2026-01-30T02:22:12Z
updated: 2026-01-30T02:22:12Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/4320
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Problem

Agents lose context when messages fall out of the context window. When a user replies to an old message, the agent can't see what was originally said — leading to confusion and the agent asking users to explain their own conversations.

## Proposed Solution

Add a configurable hook that auto-appends each incoming/outgoing message to a rolling log file (e.g., `memory/chathistory.md`).

### Format
```
[2026-01-30 05:16 id:1535] Michel: How can we resolve it...
[2026-01-30 05:18 id:1537] Zero: A few options...
```

### Features
- **Auto-rotation**: Delete entries older than N days (configurable, default 7)
- **Per-channel or unified**: Option to have one file per channel or one combined log
- **Include message IDs**: So agents can reference specific messages
- **Both directions**: Log user messages AND agent responses

### Config Example
```yaml
memory:
  chatLog:
    enabled: true
    path: memory/chathistory.md
    retentionDays: 7
    format: markdown  # or json
```

## Workaround

Currently doing this manually — agent appends to the file at end of conversations. Works but easy to forget, and doesn't capture everything.

## Why This Matters

This gives agents a "scroll" ability — they can read the log file when they need context on older messages, similar to how humans scroll up in chat.

## Comments


## Links

- None detected yet
