---
number: 2464
title: "macOS webchat: Messages flicker/blank on refresh due to unstable SwiftUI IDs"
author: kennyklee
created: 2026-01-27T00:28:16Z
updated: 2026-01-28T06:01:31Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/2464
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Problem
When the webchat refreshes message history (after sending a message, receiving a response, etc.), the entire message list briefly goes blank before reappearing. This happens because:

1. `ClawdbotChatMessage` generates a new random UUID on every decode
2. When history is refreshed, all messages get new UUIDs
3. SwiftUI's `ForEach` sees completely different items (different IDs)
4. This causes a full remove-all/add-all instead of in-place updates

## Impact
- Poor user experience with flickering/blank messages
- Scroll position can be lost (scroll position binding points to non-existent ID)
- Performance overhead from full re-renders

## Solution
Generate deterministic UUIDs based on message content (`role|timestamp|content`) using SHA256 hash. Same message = same ID across refreshes.

## Files affected
- `apps/shared/ClawdbotKit/Sources/ClawdbotChatUI/ChatModels.swift`

## Comments


## Links

- None detected yet
