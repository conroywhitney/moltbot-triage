---
number: 2528
title: "WhatsApp voice messages download as 0 bytes in self-chat mode"
author: imbkr
created: 2026-01-27T02:59:42Z
updated: 2026-01-28T06:00:31Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/2528
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Description
WhatsApp voice notes (audio/ogg; codecs=opus) download as 0-byte files when sent in self-chat mode. Images and documents download correctly.

## Environment
- Clawdbot version: 2026.1.24-3
- OS: Amazon Linux (ARM64)
- Node: v22.22.0

## Steps to Reproduce
1. Enable self-chat mode (`selfChatMode: true` + own number in `allowFrom`)
2. Send a voice note to yourself on WhatsApp
3. Check the downloaded file in `~/.clawdbot/media/inbound/`

## Expected Behavior
Voice note should download with actual audio content.

## Actual Behavior
File is created but is 0 bytes:
```
-rw-r--r--. 1 ec2-user ec2-user 0 Jan 27 02:38 1f20f62b-b5b1-4cc5-96aa-5176bddb2a0b.ogg
```

Meanwhile, images and docs download fine:
```
-rw-r--r--. 1 ec2-user ec2-user 72329 Jan 26 23:46 ab14baaa-d2e8-422b-90c1-a2b2d9c4a978.jpg
-rw-r--r--. 1 ec2-user ec2-user 2899517 Jan 27 02:12 b57b83d1-2e92-488e-ab75-b2dbc9f4a9e0.docx
```

## Logs
The media download triggers successfully but Baileys returns an empty buffer:
```json
{"module":"web-inbound",
 "from":"+12262429696","to":"+12262429696",
 "body":"<media:audio>",
 "mediaPath":"/home/ec2-user/.clawdbot/media/inbound/1f20f62b-b5b1-4cc5-96aa-5176bddb2a0b.ogg",
 "mediaType":"audio/ogg; codecs=opus"}
```

## Notes
- Likely a Baileys issue with `downloadMediaMessage` for self-chat audio
- Non-self-chat voice messages not yet tested
- Audio transcription (whisper) is configured and working, but can't process empty files

## Comments


## Links

- None detected yet
