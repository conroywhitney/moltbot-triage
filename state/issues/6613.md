---
number: 6613
title: "Feature: Add tool:before / exec:before hook event for pre-execution interception"
author: aaroneden
created: 2026-02-01T21:40:48Z
updated: 2026-02-02T00:16:32Z
labels: ["enhancement"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6613
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

Add a `tool:before` or `exec:before` hook event that fires **before** a tool executes, allowing hooks to intercept, modify, or block tool calls.

## Use Case

I want to block specific dangerous commands (like `gog gmail send`, `gog gmail delete`) while allowing everything else to run freely. Currently:

- The exec-approvals system only supports **allowlist** mode (no denylist)
- The `tool_result_persist` hook fires **after** execution (too late to block)
- There's no way to intercept commands before they run

## Proposed Solution

Add a new hook event:

```typescript
// Event structure
{
  type: 'tool',
  action: 'before',
  toolName: string,        // e.g., 'exec', 'read', 'write'
  toolArgs: object,        // tool arguments
  command?: string,        // for exec: the command being run
  sessionKey: string,
  timestamp: Date,
  // Hook can set this to block execution
  blocked?: boolean,
  blockReason?: string
}
```

### Example Handler

```typescript
const handler: HookHandler = async (event) => {
  if (event.type !== 'tool' || event.action !== 'before') return;
  
  if (event.toolName === 'exec' && event.command?.match(/gog gmail (send|delete)/)) {
    event.blocked = true;
    event.blockReason = 'Email send/delete requires manual approval';
  }
};
```

## Alternatives Considered

1. **Wrapper scripts** - Works but fragile, requires PATH manipulation
2. **Allowlist mode** - Requires maintaining a huge allowlist of "safe" commands
3. **Agent guardrails** - Soft guidance only, not enforced

## Environment

- OpenClaw 2026.1.30
- macOS

## Comments


## Links

- None detected yet
