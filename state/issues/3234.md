---
number: 3234
title: "Sub-agent announce messages display as \\"User\\" in webchat"
author: fmangot
created: 2026-01-28T08:49:18Z
updated: 2026-01-28T15:08:10Z
labels: ["bug", "app: web-ui"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/3234
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Description

When a sub-agent spawned via `sessions_spawn` announces its result back to the requester chat, the webchat UI displays the announce message with the "U" (User) badge.

This is confusing because:
1. The announce message originates from a sub-agent, not the user
2. The announce includes internal prompt content (e.g., "Summarize this naturally for the user...") that wasn't written by the user
3. The main agent then responds to summarize, creating what looks like duplicate messages

## Current behavior

```
[U] Task complete. Here are the findings... [announce text including internal prompt]
[A] Here's what I found... [agent's summary]
```

## Expected behavior

- Sub-agent announce messages should display with a distinct identifier (e.g., "S" for sub-agent, or a different badge)
- If the sub-agent was spawned with a `label` (e.g., `sessions_spawn({ label: "research" })`), that label should be shown

## Feature request

Add a configuration option to suppress sub-agent announce messages from the chat UI entirely, showing only the main agent's response.

```yaml
webchat:
  showSubagentAnnounces: false  # default true for backward compat
```

## Reproduction Steps

1. Open webchat UI
2. Have the main agent spawn a sub-agent:
   ```javascript
   sessions_spawn({
     task: "Reply with: Test complete. The answer is 42.",
     label: "test-announce",
     model: "anthropic/claude-haiku-4-5",
     runTimeoutSeconds: 30
   })
   ```
3. Wait for sub-agent to complete (~2-5 seconds)
4. Observe the announce message in webchat

**Expected:** Announce displays with sub-agent identifier (e.g., "S" badge or label)
**Actual:** Announce displays with "U" (User) badge, including internal prompt text

## Environment

- Channel: webchat
- Moltbot version: latest (2026.1.26)

## Comments


## Links

- None detected yet
