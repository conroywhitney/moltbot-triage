---
number: 7151
title: "DeepSeek model fails with \"Message ordering conflict\" error"
author: gamerapper
created: 2026-02-02T13:05:37Z
updated: 2026-02-03T00:36:29Z
labels: []
assignees: []
comments_count: 3
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7151
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Description
DeepSeek model consistently fails with "Message ordering conflict" error after ~590ms, preventing any successful completions. The DeepSeek API itself works correctly when tested directly, but Clawdbot cannot complete requests through this provider.

## Environment
- **Clawdbot version:** Latest (node v24.13.0)
- **OS:** macOS (Darwin 21.6.0)
- **Channel:** WhatsApp
- **Default model:** anthropic/claude-opus-4-5

## Configuration
DeepSeek provider in `clawdbot.json`:
```json
{
  "models": {
    "providers": {
      "deepseek": {
        "baseURL": "https://api.deepseek.com",
        "apiKey": "sk-***",
        "models": [
          {
            "id": "deepseek-chat",
            "contextWindow": 125000,
            "maxTokens": 8000
          },
          {
            "id": "deepseek-coder",
            "contextWindow": 16000,
            "maxTokens": 8000
          }
        ]
      }
    }
  }
}
```

## Steps to Reproduce
1. Configure DeepSeek provider as shown above
2. Verify model is registered: `clawdbot models` shows `deepseek/deepseek-chat`
3. Switch to DeepSeek: `/model deepseek/deepseek-chat`
4. Send any message to trigger agent run
5. Observe immediate failure with "Message ordering conflict" error

## Expected Behavior
DeepSeek model should process the message and return a response, just like other providers (Anthropic, OpenAI, etc.)

## Actual Behavior
- Agent run starts with `provider=deepseek model=deepseek-chat`
- Run terminates after ~590ms
- Error message: "Message ordering conflict - please try again. If this persists, use /new to start a fresh session."
- **No response from DeepSeek model**
- DeepSeek becomes unusable

## Log Evidence
From `/tmp/clawdbot/clawdbot-2026-02-02.log`:

```json
// 12:53:50.380 - DeepSeek run starts
{"subsystem":"agent/embedded","message":"embedded run start: runId=13bac0d5-cfd8-4675-a127-b463d9b46cfa sessionId=e10f3aa9-47fd-4478-9d16-25c95df865fb provider=deepseek model=deepseek-chat thinking=low messageChannel=whatsapp","date":"2026-02-02T12:53:50.380Z"}

// 12:53:50.411 - Agent starts
{"subsystem":"agent/embedded","message":"embedded run agent start: runId=13bac0d5-cfd8-4675-a127-b463d9b46cfa","date":"2026-02-02T12:53:50.411Z"}

// 12:53:50.991 - Agent ends (only 580ms later)
{"subsystem":"agent/embedded","message":"embedded run agent end: runId=13bac0d5-cfd8-4675-a127-b463d9b46cfa","date":"2026-02-02T12:53:50.991Z"}

// 12:53:50.995 - Run completes with very short duration
{"subsystem":"agent/embedded","message":"embedded run prompt end: runId=13bac0d5-cfd8-4675-a127-b463d9b46cfa sessionId=e10f3aa9-47fd-4478-9d16-25c95df865fb durationMs=590","date":"2026-02-02T12:53:50.995Z"}

// 12:53:51.074 - Error message sent to user
{"module":"web-auto-reply","message":"auto-reply sent (text)","text":"[clawdbot] Message ordering conflict - please try again. If this persists, use /new to start a fresh session.","date":"2026-02-02T12:53:51.074Z"}
```

## Additional Context
- **DeepSeek API works:** Direct `curl` test returns valid responses
- **Other models work fine:** Anthropic Claude models work without issues
- **No API errors in logs:** No HTTP errors, authentication failures, or timeout messages
- **Clean test environment:** No other messages in queue, fresh session state
- **Issue is 100% reproducible:** Happens every time with DeepSeek

## Analysis
This is an internal Clawdbot issue, not a DeepSeek API compatibility problem:
1. DeepSeek provider initializes successfully
2. Agent run starts normally
3. Something triggers "message ordering conflict" internally
4. Run is aborted before completing (590ms is too short for an LLM API call)

The 590ms duration suggests the error occurs **before** the actual API call to DeepSeek, likely during message/session preparation.

## Workaround
**None.** DeepSeek is completely unusable. Using `/new` doesn't help - the issue persists.

## Impact
DeepSeek is a popular and cost-effective model provider. This bug makes it impossible to use with Clawdbot.

## Comments

### @vivganes (2026-02-02)

@gamerapper  Can you provide the output to this command **(after hiding any sensitive information)**:

```
cat ~/.openclaw/sessions/e10f3aa9-47fd-4478-9d16-25c95df865fb.jsonl | tail -20
```

### @gamerapper (2026-02-02)

Thanks for looking into this! 

The session ID `e10f3aa9-47fd-4478-9d16-25c95df865fb` from my original report is no longer available. However, I can reproduce the issue and provide fresh logs.

A few questions to help me provide the right information:

1. **Session file location**: Where should I find the `.jsonl` session files? I checked `~/.openclaw/sessions/` and `~/.clawdbot/sessions/` but they don't exist on my system.

2. **Alternative diagnostics**: Would any of these help instead?
   - Full `clawdbot.json` configuration (with API keys redacted)
   - Complete log output from `/tmp/clawdbot/clawdbot-YYYY-MM-DD.log` during a failed DeepSeek run
   - Output of `clawdbot status` and `clawdbot models`

3. **Reproduce on demand**: I can trigger the error anytime by switching to DeepSeek. Should I do a fresh test run and capture specific logs?

The issue is 100% reproducible - every DeepSeek attempt fails with "Message ordering conflict" after ~590ms, while other providers (Anthropic, OpenAI) work fine.

Let me know what diagnostic info would be most helpful!

---
*Note: This reply was composed and posted by Clawdbot (my AI assistant) on my behalf, as I asked it to help respond to this issue.*

### @vivganes (2026-02-03)

@gamerapper  This is what worked in my local setup 

List sessions:

```
~/.openclaw/agents/main/sessions
```

You can lookup all sessions here.


Get log for a specific session (lookup the session id for your agent from the above json):

```
 ~/.openclaw/agents/main/sessions/<session-id-from-above-json-for-your-agent>.jsonl
```

I guess, in your setup, you need to look for `clawdbot` instead of `openclaw`


## Links

- None detected yet
