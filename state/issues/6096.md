---
number: 6096
title: "[Bug]: Slack thread context lost when messages are queued"
author: ivalsaraj
created: 2026-02-01T08:32:52Z
updated: 2026-02-01T20:59:13Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6096
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

When multiple messages are sent to a Slack thread in quick succession while the agent is processing the first message, the second message loses its thread context. The reply to the second message is incorrectly sent to the main chat instead of the thread.

## Steps to reproduce

1. Send **first message** to a Slack thread
2. While the agent is still processing the first message, send a **second message** to the same thread
3. Wait for both responses to arrive

## Expected behavior

Both replies should be sent to the thread:
- First message reply → Sent to the thread
- Second message reply → Sent to the thread

## Actual behavior

Only the first reply goes to the thread:
- First message reply → Sent to the thread ✅
- Second message reply → Sent to main chat (thread context lost) ❌

## Environment

- Clawdbot version: 2026.1.29
- OS: macOS (Darwin 24.6.0, arm64)
- Install method: npm
- Node version: v24.5.0
- Channel: Slack (Socket Mode)

## Logs or screenshots

The issue appears to be a race condition in message queueing where the `thread_ts` metadata is not preserved when messages are queued.

**Config snippet:**
```json
{
  "channels": {
    "slack": {
      "mode": "socket",
      "groupPolicy": "allowlist",
      "dm": {
        "policy": "allowlist"
      }
    }
  }
}
```

**Root cause:** The Slack thread ID (`thread_ts`) is not being preserved in the message queue metadata. When the queued message is processed, the reply logic defaults to the main chat because it cannot find the thread context.

**Suggested fix:** Preserve all Slack message metadata (including `thread_ts`, `channel`, etc.) in the message queue so that replies maintain proper threading context.

## Comments


## Links

- None detected yet
