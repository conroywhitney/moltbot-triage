---
number: 7338
title: "[Feature]: Agent Attestation Headers"
author: Grenghis-Khan
created: 2026-02-02T18:21:23Z
updated: 2026-02-02T18:21:23Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7338
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Feature Request: Agent Attestation for External API Requests

### Problem Statement

When building services designed specifically for OpenClaw agents (e.g., agent-only APIs, skill backends, agent marketplaces), there is currently no reliable way to verify that an incoming HTTP request originates from an OpenClaw agent versus a human user making direct API calls.

**Use Case Example:**
[MoltOverflow](https://moltoverflow.xyz) is a Stack Overflow-style Q&A platform exclusively for AI agents. We want to ensure that only agents can post questions and answers, while humans can only read content. Without agent attestation, sophisticated users can bypass our API and impersonate agents.

### Current Behavior

When OpenClaw agents make external HTTP requests (via `fetch`, skill execution, or tool calls), the requests contain no identifying metadata that distinguishes them from any other HTTP client. Examined:

- `src/infra/fetch.ts` - Generic fetch wrapper with no agent headers
- `src/version.ts` - VERSION available but not included in requests
- Skill metadata - Not propagated to outgoing requests

### Proposed Solution

Add optional agent attestation headers to outgoing HTTP requests when enabled by the user or skill configuration.

#### Option A: Static Headers

Include identifying headers in all external requests:

```
User-Agent: OpenClaw/<version> (<platform>; <agent-id>)
X-OpenClaw-Version: 1.2.3
X-OpenClaw-Agent-Id: moltbot (optional, user-configurable)
```

#### Option B: Cryptographic Attestation (Preferred)

Provide a signed attestation that services can verify:

```
X-OpenClaw-Attestation: <signed-jwt>
```

The JWT payload could include:

```json
{
  "iss": "openclaw",
  "agent_id": "moltbot",
  "version": "1.2.3",
  "iat": 1706889600,
  "exp": 1706890200,
  "skill": "moltoverflow"
}
```

Services could verify:

1. Signature validity (using OpenClaw's public key)
2. Timestamp freshness
3. Skill context matches expected

#### Option C: Opt-In Per Skill

Allow skills to request attestation in their `SKILL.md` metadata:

```yaml
---
name: moltoverflow
description: Stack Overflow for agents
metadata:
  requires_attestation: true
  attestation_audience: "https://moltoverflow.xyz"
---
```

When `requires_attestation: true`, OpenClaw would include attestation headers in requests to that skill's domain.

### Configuration

This feature should be opt-in and user-configurable:

```yaml
# openclaw.yaml
attestation:
  enabled: true
  include_agent_id: true # Whether to include agent identifier
  domains: # Allowlist of domains to receive attestation
    - moltoverflow.xyz
    - api.example.com
```

### Privacy Considerations

- **Opt-in by default**: Users should explicitly enable attestation
- **Domain allowlist**: Only send attestation to specified domains
- **Minimal data**: Only include necessary fields
- **No tracking**: Attestation should not enable cross-service tracking

### Alternatives Considered

1. **Service-side behavioral analysis**: Unreliable and requires significant data
2. **Skill handshake protocols**: Adds complexity to every service integration
3. **API key validation only**: Doesn't distinguish agent from human with same key

### Benefits

1. **Enable agent-only services**: Services can confidently restrict access to agents
2. **Improve trust in agent ecosystem**: Verified agent interactions
3. **Reduce abuse**: Harder for humans to impersonate agents
4. **Standardization**: Common pattern for agent verification across services

### Additional Context

This feature would enable new categories of agent-first services:

- Agent-only APIs and marketplaces
- Agent reputation systems
- Inter-agent communication networks
- Agent analytics and monitoring services

Similar attestation patterns exist in:

- [Web Environment Integrity](https://github.com/AsnAndQwerty/nickel-nickel)
- OAuth 2.0 client attestation
- Hardware attestation (TPM)

### Related Issues

<!-- Link any related issues here -->

---

**Labels**: `enhancement`, `feature-request`, `security`

## Comments


## Links

- None detected yet
