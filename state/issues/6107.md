---
number: 6107
title: "Gateway crashes on SSH stderr output (progress bars, ANSI codes)"
author: DisasterGhost
created: 2026-02-01T08:45:03Z
updated: 2026-02-01T21:04:31Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6107
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

Description

The gateway process crashes when executing SSH commands to remote hosts that produce stderr output (progress bars, model loading, ANSI escape codes). The crash is hard enough that no error is logged.
Environment

    OS: Pop!_OS (Linux) in VirtualBox, also reproduced on Windows host
    OpenClaw: Latest npm global install
    Node.js: v24.13.0

Steps to Reproduce

    Use the exec tool to SSH to a remote server
    Run a command that produces stderr output (e.g., Python script loading ML model with tqdm progress bars)
    Gateway crashes â€” requires manual restart

Observed Behavior

    Gateway dies abruptly without logging an error
    On Windows, stderr from remote process visibly leaks into gateway terminal before crash
    No uncaught exception, heap error, or fatal in /tmp/openclaw/openclaw-*.log
    Only graceful SIGTERM shutdowns logged (from manual restarts)

Expected Behavior

Gateway should safely capture/discard arbitrary stderr from exec commands without crashing.
Workarounds

    Redirect stderr: ssh server "command 2>/dev/null"
    Use nohup + log polling instead of streaming output
    Avoid long-running SSH sessions

Hypothesis

The exec tool's stream handling may not properly isolate remote stderr from the gateway process. Possible causes:

    Binary/control characters corrupting Node.js streams
    PTY mode stream handling issue
    Uncaught exception in stream processor killing process before it can log

## Comments


## Links

- None detected yet
