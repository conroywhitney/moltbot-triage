---
number: 3143
title: "[Feature]: Option to strip message metadata when sending to providers (content-only mode)"
author: brendongl
created: 2026-01-28T04:58:52Z
updated: 2026-01-28T05:54:28Z
labels: ["enhancement"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/3143
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

### Problem

When messages arrive from Discord (and possibly other channels), they're wrapped in a metadata structure before being sent to the LLM provider:

```json
{
  "message": {
    "authorId": "Username",
    "content": "hi, tell me what ai model you are"
  },
  "channel": null,
  "guild_id": null,
  "user_id": null,
  "id": 1465745998952530211
}
```

For sophisticated models (Claude, GPT-4), this is fineâ€”they parse it easily. But simpler models like Ollama/local LLMs often struggle with this structure and may respond to the JSON literally or get confused by the metadata.

### Proposed Solution

Add a config option to send only the message content to providers. Two possible approaches:

**Option A: Channel-level setting**
```json5
{
  channels: {
    discord: {
      messageFormat: "content-only"  // or "full" (default)
    }
  }
}
```

**Option B: Provider-level setting**
```json5
{
  models: {
    providers: {
      ollama: {
        simplifyMessages: true
      }
    }
  }
}
```

Option B might be more flexible since the issue is provider capability, not channel behavior.

### Use Case

Running local models via Ollama that work better with plain text input rather than structured JSON metadata.

### Alternatives Considered

- Instructing the model via system prompt to extract `content` from JSON (hacky, wastes tokens)
- External proxy to transform messages (adds complexity)

## Comments


## Links

- None detected yet
