---
number: 6147
title: "Gateway crashes on recoverable network errors (TypeError: fetch failed)"
author: david-sosoka-ai
created: 2026-02-01T10:03:45Z
updated: 2026-02-01T21:04:27Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6147
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

The unhandled rejection handler exits on any rejection, including recoverable network errors like transient fetch failures. This causes unnecessary gateway crashes when the network temporarily hiccups.

**Version:** v2026.1.24-3

## Evidence

```
Unhandled promise rejection: TypeError: fetch failed
Main process exited, code=exited, status=1/FAILURE
```

**Impact:** We're seeing 9 crashes per 12 hours from this on our gateway.

## Proposed Fix

Recognize network errors as non-fatal in the unhandled rejection handler:

```javascript
registerUnhandledRejectionHandler((reason) => {
    if (reason?.message === 'fetch failed' || 
        reason?.cause?.code === 'ECONNREFUSED') {
        logWarn('Network error (non-fatal):', reason.message);
        return true;
    }
    return false;
});
```

This allows the gateway to continue running and retry operations rather than crashing on recoverable errors.

## Comments

### @jakesalive86 (2026-02-01)

Confirming this on our twin-bot setup (v2026.1.24-3, Node v22.22.0, Linux x64 VPS + Windows Surface Pro).

Our crash chain today:
1. CLI tool (`gog gmail list`) failed with bad argument parsing on PowerShell
2. Downstream `fetch()` call failed (likely provider API or Telegram send)
3. Unhandled rejection → `process.exit(1)` → gateway dead

The proposed fix in this issue is exactly right. Network errors (`TypeError: fetch failed`, `ECONNREFUSED`, `ETIMEDOUT`) should be non-fatal. The current fail-fast behavior makes sense for truly unexpected errors, but crashing the gateway on a network timeout is like crashing your car because the radio lost signal.

For anyone hitting this now: wrapping risky tool calls in try/catch at the script/cron level prevents the trigger, but the core handler should still be more resilient.

+1 for the `registerUnhandledRejectionHandler` approach.


## Links

- None detected yet
