---
number: 3432
title: "Feature: Agent routing in webhook mappings (agentId field)"
author: wko
created: 2026-01-28T15:56:52Z
updated: 2026-01-28T15:56:52Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/3432
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Problem

Webhook mappings (`hooks.mappings`) support `action: "wake" | "agent"`, but there is no way to specify the target agent. All webhook-triggered agent runs always go to the **default agent**.

This makes it impossible to use webhooks in multi-agent setups â€” e.g., routing incoming emails to a dedicated "email-agent" with its own tools, workspace, and persona.

## Proposed Solution

Add an optional `agentId` field to `hooks.mappings[*]`:

```json5
{
  hooks: {
    mappings: [
      {
        match: { path: "/email" },
        action: "agent",
        agentId: "email-handler",  // <-- NEW
        messageTemplate: "New email from {{from}}: {{subject}}",
        deliver: true,
        channel: "telegram",
        to: "123456789"
      }
    ]
  }
}
```

## Semantics

- `agentId` optional (default: default agent)
- Must exist in `agents.list[].id`
- Agent run uses workspace, tools, and model config of the target agent
- Session key is scoped under the target agent (`agent:<agentId>:hook:...`)

## Use Cases

1. **Email processing**: Dedicated agent with restricted tools (no shell access, only email reply capabilities)
2. **GitHub webhooks**: CI/CD agent with repo access, isolated from personal assistant
3. **Support inbox**: Separate agent per webhook source with different personas/system prompts

## Alternative (less elegant)

If `agentId` in mappings is too complex: A separate endpoint `/hooks/agent/:agentId` that takes the agent from the URL path.

## Comments


## Links

- None detected yet
