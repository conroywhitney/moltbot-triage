---
number: 3604
title: "Auth profile cooldown doesn't auto-expire"
author: bergcb322-clawd
created: 2026-01-28T22:14:16Z
updated: 2026-01-31T02:37:17Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/3604
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

# Auth profile cooldown doesn't auto-expire

## Bug Description
Auth profiles get stuck in cooldown state even after the `cooldownUntil` timestamp has expired, preventing the agent from making API calls.

## Evidence
- Cooldown set to: `1769633531559` (Jan 28 20:52:11 UTC)
- Current time when stuck: `1769634806000` (Jan 28 21:13:26 UTC) 
- Time difference: **-1274 seconds** (20+ minutes past expiry)
- Profile remained marked as unavailable despite expired cooldown

## Expected Behavior
When `Date.now() > cooldownUntil`, the cooldown should automatically clear and the profile should become available again.

## Actual Behavior
The profile stays in cooldown indefinitely until manually cleared by removing the `cooldownUntil` field from the auth profile JSON.

## Impact
- Agent cannot make API calls after hitting rate limit, even after cooldown expires
- Requires manual intervention or gateway restart
- Blocks autonomous operation

## Workaround
Manual deletion of the `cooldownUntil` field:
```bash
jq 'del(.usageStats."openrouter:default".cooldownUntil)' auth-profiles.json > temp.json
mv temp.json auth-profiles.json
```

## Suggested Fix
Add cooldown expiry check in the auth profile resolution logic:
```javascript
if (profile.cooldownUntil && Date.now() > profile.cooldownUntil) {
  delete profile.cooldownUntil;
  // Also reset error counts if appropriate
}
```

## Related Files
- `auth-profiles.json` structure
- Auth profile resolution logic (likely in `agents/model-auth.js` or similar)

## Environment
- Clawdbot version: 2026.1.24-3
- OS: Ubuntu 24.04.3 LTS (Linux 6.8.0-90-generic)
- Provider: OpenRouter

## Comments

### @Glucksberg (2026-01-29)

ðŸ”— **Related:** PR #3607 implements auto-expiry for auth profile cooldowns.


## Links

- None detected yet
