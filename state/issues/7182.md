---
number: 7182
title: "Bug: cron.add rejects all job objects with validation error"
author: rmax
created: 2026-02-02T14:18:41Z
updated: 2026-02-02T14:18:41Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7182
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

# Bug Report: `cron.add` Tool Parameter Validation Failure

**Date:** 2026-02-02  
**Reporter:** rmax (via RMax-10 agent)  
**Affected Tool:** `cron.add`  
**OpenClaw Version:** 2026.1.30  
**Severity:** Medium

## Summary

The `cron.add` tool rejects all job creation attempts with a validation error claiming missing required properties, even when all required fields are present and correctly formatted.

## Error Message

```
invalid cron.add params: must have required property 'name'; must have required property 'schedule'; must have required property 'sessionTarget'; must have required property 'payload'
```

## Reproduction Steps

### 1. Verify cron system is functional
```bash
cron action=status
# Returns: {"enabled": true, "jobs": 1, ...}

cron action=list  
# Returns: Existing job(s) with correct structure
```

### 2. Attempt to add a new job

**Minimal example:**
```json
{
  "name": "Test Job",
  "schedule": {"kind": "every", "everyMs": 60000},
  "sessionTarget": "main",
  "payload": {"kind": "systemEvent", "text": "test"}
}
```

**With job wrapper:**
```json
{
  "job": {
    "name": "Test Job",
    "schedule": {"kind": "every", "everyMs": 60000},
    "sessionTarget": "main",
    "payload": {"kind": "systemEvent", "text": "test"}
  }
}
```

**With action field:**
```json
{
  "action": "add",
  "job": {
    "name": "Test Job",
    "schedule": {"kind": "every", "everyMs": 60000},
    "sessionTarget": "main",
    "payload": {"kind": "systemEvent", "text": "test"}
  }
}
```

**Cron expression format:**
```json
{
  "name": "Cron Test",
  "schedule": {"kind": "cron", "expr": "*/30 * * * *", "tz": "UTC"},
  "sessionTarget": "main",
  "payload": {"kind": "systemEvent", "text": "Test"}
}
```

**With all optional fields:**
```json
{
  "id": "test-job-1",
  "name": "Test Job",
  "schedule": {"kind": "every", "everyMs": 3600000},
  "sessionTarget": "main",
  "payload": {"kind": "systemEvent", "text": "Test message"},
  "enabled": true
}
```

**Result for all attempts:** ‚ùå "missing required properties" error

## Evidence of Valid Schema

Existing job in store (created previously, still functional):
```json
{
  "id": "cc8016cb-8e3c-4c47-ae64-832b36d79580",
  "agentId": "main",
  "name": "Status check job",
  "enabled": false,
  "schedule": {"kind": "every", "everyMs": 1800000},
  "sessionTarget": "main",
  "payload": {"kind": "systemEvent", "text": "..."}
}
```

## Expected Behavior

Tool should accept valid job object and return success with job ID.

## Actual Behavior

Tool rejects all attempts with validation error.

## Environment

- **OpenClaw:** 2026.1.30
- **Node.js:** v24.3.0
- **OS:** Linux 6.12.41+deb13-arm64 (arm64)
- **Cron store:** ~/.openclaw/cron/jobs.json

## Additional Notes

- `cron.status`, `cron.list`, `cron.runs` all work correctly
- Only `cron.add` appears affected
- Cron system itself is functional (existing jobs execute)

## Hypothesis

Parameter parsing bug where validation runs before the job object is properly extracted from the request.

## Comments


## Links

- None detected yet
