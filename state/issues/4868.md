---
number: 4868
title: "Memory index becomes dirty after updates, search returns empty results"
author: jacobaross
created: 2026-01-30T19:47:04Z
updated: 2026-01-31T02:27:04Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/4868
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

After updating to OpenClawd (2026.1.24-3), memory_search returns empty results despite memory files existing.

**Steps to reproduce:**
1. Update Clawdbot to latest version
2. Observe memory_search returns no results
3. Run Memory Search (main)
Provider: openai (requested: auto)
Model: text-embedding-3-small
Sources: memory
Indexed: 39/39 files · 89 chunks
Dirty: yes
Store: ~/.clawdbot/memory/main.sqlite
Workspace: ~/clawd
By source:
  memory · 39/39 files · 89 chunks
Vector: ready
Vector dims: 1536
Vector path: /opt/homebrew/lib/node_modules/clawdbot/node_modules/sqlite-vec-darwin-arm64/vec0.dylib
FTS: ready
Embedding cache: enabled (114 entries)
Batch: enabled (failures 0/2) — shows dirty flag, missing files

**Expected behavior:** Memory search should work after updates without manual intervention.

**Workaround:** Memory index updated (main). refreshes the index and fixes the issue.

**Environment:**
- Clawdbot version: 2026.1.24-3
- OS: macOS (Apple Silicon)
- Memory files: 38 files in memory/

**Potential causes:**
- Index not being committed properly during update
- Database migration gap
- Gateway restart not triggering auto-reindex

**Suggested fix:** Either auto-reindex on gateway startup, or ensure index is properly committed during updates.

## Comments


## Links

- None detected yet
