---
number: 3271
title: "Git repository bloat from accidentally committed files"
author: ariel-frischer
created: 2026-01-28T10:24:22Z
updated: 2026-01-28T10:24:22Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/3271
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Problem

The git repository is bloated with ~150MB+ of files that were accidentally committed and later removed. These files remain in git history and slow down clones/fetches significantly.

## Affected files

| Size | File | Commit |
|------|------|--------|
| **87 MB** | `.serena/cache/typescript/document_symbols.pkl` | 18cb665b (Doug von Kohorn) |
| **27 MB** | `.serena/cache/typescript/raw_document_symbols.pkl` | 18cb665b |
| ~10 MB each | `apps/shared/ClawdisKit/.build/*.pcm` (AppKit, Foundation, Darwin) | ef35868b (Peter Steinberger) |
| ~5.5 MB Ã— many versions | `apps/macos/Sources/Clawdis/Resources/WebChat/webchat.bundle.js` | 875cf9a0 |

Total estimated bloat: **150-200 MB**

## Current state

- Files are properly `.gitignore`d now (line 73: `.serena/`)
- Files are no longer tracked in HEAD
- Files remain in git history, causing slow clones

## Proposed solution

Rewrite git history to remove these paths using `git-filter-repo`:

```bash
# Install git-filter-repo if needed
# pip install git-filter-repo

# Remove the bloated paths from history
git filter-repo \
  --path .serena/ \
  --path apps/shared/ClawdisKit/.build/ \
  --path apps/macos/Sources/Clawdis/Resources/WebChat/webchat.bundle.js \
  --invert-paths
```

### Considerations

1. **Breaking change**: All existing clones will need to be re-cloned or reset
2. **Force push required**: `git push --force` to all remotes
3. **Coordination needed**: Notify contributors before rewriting history
4. **Backup first**: Create a backup branch/tag before rewriting

### Alternative: BFG Repo Cleaner

```bash
# Faster alternative for large repos
bfg --delete-files '*.pkl' --delete-folders '.serena'
bfg --delete-files 'webchat.bundle.js'
bfg --delete-folders '.build'
git reflog expire --expire=now --all && git gc --prune=now --aggressive
```

## Verification commands

```bash
# Find largest files in git history
git rev-list --objects --all | \
  git cat-file --batch-check='%(objecttype) %(objectname) %(objectsize) %(rest)' | \
  awk '/^blob/ {print $3, $4}' | sort -rn | head -20

# Check repo size before/after
du -sh .git

## Comments


## Links

- None detected yet
