---
number: 6682
title: "Session transcript corruption after API rate limit errors causes false 'missing tool result' errors"
author: fatherkam
created: 2026-02-01T23:12:53Z
updated: 2026-02-02T06:50:07Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6682
duplicate_of: null
related_issues: [1577]
blocks: []
blocked_by: []
---

## Description

## Description

After receiving multiple 429 rate limit errors from the Anthropic API, subsequent tool calls fail immediately with `[openclaw] missing tool result in session history; inserted synthetic error result for transcript repair.` — even though the tool call was just made milliseconds earlier.

This is **not a timeout issue**. The synthetic error is inserted within 16-44ms of the tool call, indicating transcript corruption rather than an actual missing result.

## Environment

- **OpenClaw Version:** 2026.1.30
- **Platform:** macOS (Darwin 25.3.0)
- **Model:** claude-opus-4-5

## Steps to Reproduce

1. Use OpenClaw with a session that approaches or exceeds the Anthropic API rate limit (30,000 input tokens/min)
2. Trigger multiple API calls that result in 429 rate limit errors
3. After the rate limit errors, the agent makes a successful API call with a tool call
4. The tool call immediately fails with "missing tool result" error

## Session Transcript Evidence

```
22:46:28 → 429 rate_limit_error (Anthropic API)
22:46:34 → 429 rate_limit_error (Anthropic API)
22:47:37.043 → Agent makes tool call (read SKILL.md)
22:47:37.087 → "missing tool result" synthetic error (44ms later)
```

Second occurrence:
```
22:49:28 → 429 rate_limit_error
22:49:32 → 429 rate_limit_error  
22:49:41 → 429 rate_limit_error
22:50:46.198 → Agent makes tool call (exec remindctl today --json)
22:50:46.214 → "missing tool result" synthetic error (16ms later)
```

## Analysis

The 16-44ms timing proves this is not a timeout. The issue appears to be:

1. Anthropic API returns 429 rate limit errors
2. OpenClaw's retry logic records tool calls in the transcript but something goes wrong during error handling
3. When the next successful API response includes a tool call, OpenClaw's transcript validation detects an inconsistency (possibly a tool call from a failed retry that never got a result)
4. It inserts a synthetic error to "repair" the transcript, but this breaks the current valid tool call

## Expected Behavior

Tool calls made after rate limit errors should execute normally once the API responds successfully.

## Actual Behavior

Tool calls fail immediately with synthetic "missing tool result" error due to transcript corruption from previous rate limit errors.

## Workaround

Retrying the tool call sometimes works after waiting for rate limits to reset, but this is unreliable.

## Related Issues

This is distinct from #1577 (long-running command timeouts) — that issue is about actual timeouts, while this is about transcript corruption after API errors.

## Comments

### @astral-duck (2026-02-02)

<html>
<body>
<!--StartFragment--><h2 dir="auto" node="[object Object]" style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); font-size: 0.9375rem; font-weight: 600; margin: 1rem 0px 0.25rem; color: rgb(212, 212, 212); line-height: 1.4; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn; font-family: &quot;Segoe WPC&quot;, &quot;Segoe UI&quot;, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(37, 37, 38); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;">Root Cause Confirme</span><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;">d</span></h2><p dir="auto" class="!mb-0 mt-0" node="[object Object]" style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); margin: 0px 0px 0.75rem; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn; display: block; line-height: 1.6; color: rgb(204, 204, 204); font-family: &quot;Segoe WPC&quot;, &quot;Segoe UI&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(37, 37, 38); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><strong style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); font-weight: 600; color: inherit; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;">This is an OpenClaw application-level issue</strong><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;">, not your</span><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;"><span> </span>configuration</span><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;">:</span></p><ol style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); list-style: outside decimal; margin: 6px 0px 8px; padding: 0px; padding-inline-start: 1.57143em; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn; display: flex; flex-direction: column; gap: 0.25rem; line-height: 1.6; color: rgb(204, 204, 204); font-family: &quot;Segoe WPC&quot;, &quot;Segoe UI&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(37, 37, 38); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><li dir="auto" node="[object Object]" class="leading-[1.5] [&amp;>p]:inline" style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); margin-top: 0px; margin-bottom: 0px; padding-inline-start: 0.428571em; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn; line-height: 1.5;"><p dir="auto" class="!mb-0 mt-0" node="[object Object]" style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); margin: 0px 0px 0.75rem; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn; display: inline; line-height: 1.6; color: rgb(204, 204, 204);"><strong style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); font-weight: 600; color: inherit; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;">OpenClaw hardcodes Venice model discovery</strong><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;"><span> </span>-</span><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;"><span> </span>Every request</span><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;"><span> </span>triggers</span><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;"><span> </span>a</span><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;"><span> </span>Venice API call regardless of your</span><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;"><span> </span>config</span></p></li><li dir="auto" node="[object Object]" class="leading-[1.5] [&amp;>p]:inline" style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); margin-top: 0px; margin-bottom: 0px; padding-inline-start: 0.428571em; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn; line-height: 1.5;"><p dir="auto" class="!mb-0 mt-0" node="[object Object]" style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); margin: 0px 0px 0.75rem; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn; display: inline; line-height: 1.6; color: rgb(204, 204, 204);"><strong style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); font-weight: 600; color: inherit; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;">Known bug #5159</strong><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;"><span> </span>- OpenClaw doesn</span><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;">'t implement</span><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;"><span> </span>proper expon</span><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;">ential backoff on</span><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;"><span> </span>429 errors</span></p></li><li dir="auto" node="[object Object]" class="leading-[1.5] [&amp;>p]:inline" style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); margin-top: 0px; margin-bottom: 0px; padding-inline-start: 0.428571em; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn; line-height: 1.5;"><p dir="auto" class="!mb-0 mt-0" node="[object Object]" style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); margin: 0px 0px 0.75rem; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn; display: inline; line-height: 1.6; color: rgb(204, 204, 204);"><strong style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); font-weight: 600; color: inherit; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;">Your Venice account hit usage limit 2056</strong><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;"><span> </span>- This</span><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;"><span> </span>is a persistent limit</span><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;">,</span><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;"><span> </span>not a temporary rate limit</span></p></li></ol><h2 dir="auto" node="[object Object]" style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); font-size: 0.9375rem; font-weight: 600; margin: 1rem 0px 0.25rem; color: rgb(212, 212, 212); line-height: 1.4; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn; font-family: &quot;Segoe WPC&quot;, &quot;Segoe UI&quot;, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(37, 37, 38); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;">What</span><span style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn;"><span> </span>We've Done</span></h2><div class="group/hscroll relative flex min-w-0 flex-1 flex-col" style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); --tw-translate-x: 0; --tw-translate-y: 0; --tw-rotate: 0; --tw-skew-x: 0; --tw-skew-y: 0; --tw-scale-x: 1; --tw-scale-y: 1; margin-top: 0px; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn; position: relative; display: flex; min-width: 0px; flex: 1 1 0%; flex-direction: column; color: rgb(204, 204, 204); font-family: &quot;Segoe WPC&quot;, &quot;Segoe UI&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(37, 37, 38); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><div class="min-w-0 flex-1" style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); --tw-translate-x: 0; --tw-translate-y: 0; --tw-rotate: 0; --tw-skew-x: 0; --tw-skew-y: 0; --tw-scale-x: 1; --tw-scale-y: 1; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn; min-width: 0px; flex: 1 1 0%; overflow-x: auto; scrollbar-width: none;"><div class="min-w-fit" style="box-sizing: border-box; border-width: 0px; border-style: solid; border-color: rgb(192, 193, 198); --tw-translate-x: 0; --tw-translate-y: 0; --tw-rotate: 0; --tw-skew-x: 0; --tw-skew-y: 0; --tw-scale-x: 1; --tw-scale-y: 1; animation: 0ms ease-in-out 0s 1 normal none running ft-fadeIn; min-width: fit-content;">
Action | Result
-- | --
Removed Venice from openclaw.json | ✅ Done - still hits rate limit
Cleaned all auth-profiles.json files | ✅ Done - still hits rate limit
Cleared Venice auth order | ✅ Done - still hits rate limit
Backed up your API keys | ✅ Done - config/openclaw-backup-2026-02-02/
Set MiniMax as default model | ✅ Done - config is correct

</div></div></div><!--EndFragment-->
</body>
</html>


## Links

- None detected yet
