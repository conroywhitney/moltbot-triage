---
number: 5741
title: "bug: audio transcription not triggered for some voice messages"
author: regalstreak
created: 2026-01-31T22:43:15Z
updated: 2026-02-02T00:17:55Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/5741
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Description

OpenClaw is inconsistently triggering audio transcription for Telegram voice messages. Some messages get transcribed automatically, others are silently ignored with no log entries.

## Steps to Reproduce

1. Configure audio transcription with whisper.cpp:
```json
{
  "tools": {
    "media": {
      "audio": {
        "enabled": true,
        "models": [{
          "type": "cli",
          "command": "/path/to/whisper-transcribe",
          "args": ["{{MediaPath}}"],
          "timeoutSeconds": 30
        }]
      }
    }
  }
}
```

2. Send multiple voice messages via Telegram
3. Some get transcribed, others don't

## Expected Behavior

All voice messages should be transcribed (or show error logs if transcription fails).

## Actual Behavior

Some voice messages are saved to `~/.openclaw/media/inbound/` but never transcribed. No log entries show transcription attempt or errors.

## Evidence

**File exists but not transcribed:**
```
-rw-------  1 user  staff   638K Feb  1 04:04 file_31---a7f2677c-1795-4d54-a5d4-05051faf3de5.ogg
```

**No logs for this file:**
```bash
grep -i "file_31\|transcrib\|audio" ~/.openclaw/logs/gateway.log
# No results for this message
```

**Manual transcription works fine:**
```bash
time whisper-transcribe file_31---a7f2677c-1795-4d54-a5d4-05051faf3de5.ogg
# Output: [transcription text]
# real    0m0.730s
```

## Environment

- OpenClaw version: latest (as of 2026-02-01)
- Channel: Telegram
- Audio tool: whisper.cpp via custom wrapper script
- OS: macOS (Darwin 25.2.0 arm64)

## Notes

- Earlier test messages in the same session WERE transcribed successfully
- The transcription tool itself works perfectly when invoked manually
- No errors or warnings in gateway.log for the missing transcription
- This suggests the issue is in the detection/triggering logic, not the transcription itself

## Comments


## Links

- None detected yet
