---
number: 3851
title: "[Bug]:"
author: Shuimo03
created: 2026-01-29T07:44:55Z
updated: 2026-01-29T07:53:14Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/3851
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

Two test failures in the test suite:

1. **Windows CI**: Test tries to create a file with `<>` characters in the filename, which Windows disallows
2. **macOS/Linux**: Test isolation issue - module-level Python path cache gets polluted by other tests

## Steps to reproduce

### Issue 1: Windows filename error
1. Run `pnpm test` on Windows CI
2. Test `src/media-understanding/apply.test.ts` fails at line 557
3. Error: `ENOENT: no such file or directory, open '...\file<test>.txt'`

### Issue 2: Python cache pollution
1. Run `pnpm test` locally on macOS
2. Test `src/hooks/gmail-setup-utils.test.ts` fails at line 39
3. Expected mocked Python path, received system Python path

## Expected behavior

Both tests should pass on all platforms (Windows, macOS, Linux).

## Actual behavior

### Issue 1
Windows rejects `<` and `>` in filenames, causing `fs.writeFile` to fail with `ENOENT`.

### Issue 2
The `cachedPythonPath` module-level variable in `gmail-setup-utils.ts` (line 9) gets populated by other tests (e.g., via `gmail-watcher.test.ts` importing the module) before the isolated test runs, breaking test expectations.

## Environment

- Clawdbot version: 2026.1.27-beta.1
- OS: Windows (GitHub Actions) / macOS
- Install method: pnpm

## Logs or screenshots

### Windows CI error

## Comments

### @Terrorizer-AI (2026-01-29)

can assigned me i want to fix this . @Shuimo03 



## Links

- None detected yet
