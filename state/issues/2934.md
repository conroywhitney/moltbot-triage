---
number: 2934
title: "Gmail watcher crashes gateway on restart (unhandled AbortError)"
author: nathanviaproductions
created: 2026-01-27T19:51:06Z
updated: 2026-01-28T05:57:39Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/2934
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Description

When the gateway restarts (e.g., via `config.patch` or SIGUSR1), the gmail watcher teardown triggers an unhandled promise rejection that crashes the process.

## Error

```
[gmail-watcher] gmail watcher stopped
[clawdbot] Unhandled promise rejection: AbortError: This operation was aborted
    at node:internal/deps/undici/undici:14902:13
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
```

## Steps to Reproduce

1. Enable gmail watcher (hooks.presets includes "gmail", or gmail hook config present)
2. Trigger a gateway restart (config.patch, SIGUSR1, etc.)
3. Gateway crashes with unhandled AbortError during gmail watcher shutdown

## Expected Behavior

Gateway should gracefully stop the gmail watcher and restart without crashing.

## Workaround

Set `CLAWDBOT_SKIP_GMAIL_WATCHER=1` env var to prevent the watcher from starting. Email can still be checked on-demand via `gog gmail search`.

## Environment

- Clawdbot: 2026.1.24-3
- Node: v22.22.0
- OS: Linux 6.8.0-71-generic (x64)
- Gmail watcher config: tailscale funnel mode, push via Google Pub/Sub

## Comments


## Links

- None detected yet
