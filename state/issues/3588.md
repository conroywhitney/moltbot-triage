---
number: 3588
title: "Status line model display shows stale config after gateway restart"
author: balazsbohonyi
created: 2026-01-28T21:47:06Z
updated: 2026-01-28T21:49:24Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/3588
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug Description

After restarting the gateway with a new model configuration via `gateway config.patch`, the session status line continues to display the old model instead of the newly configured one. More critically, the session continues to **use** the old model as well, not just display it incorrectly.

## Steps to Reproduce

1. Check current model in runtime status line and verify API usage (e.g., `model=openrouter/anthropic/claude-haiku-4.5`)
2. Apply a config patch to change the primary model: `gateway config.patch`
3. Gateway restarts successfully (confirmed via restart event and `gateway config.get` showing new model)
4. Session status line still shows the old model
5. API calls from this session continue to use the old model (verified via OpenRouter API dashboard)

## Expected Behavior

After a gateway restart triggered by a config change, **new sessions** should automatically use the newly configured model. Ideally, **existing sessions** should also respect the new configuration.

## Actual Behavior

- Gateway config is updated correctly (verified via `gateway config.get`)
- New session status line still shows old model
- API calls continue to use the old model
- Sessions appear to be "locked in" to their model at creation time and don't update when gateway config changes

## Root Cause Analysis

Sessions are bound to a specific model at creation time and do not dynamically reload the model configuration. When the gateway restarts with a new config:
- The gateway itself loads the new config correctly
- But existing sessions remain bound to their original model
- Only new sessions will use the newly configured model

## Impact

- Users expecting config changes to take effect immediately will be confused
- Running code/queries will silently continue using the old model
- Misleading status line compounds the issue
- Critical for workflows where users need to switch models mid-session

## Possible Solutions

1. **Hot-reload sessions:** When gateway config changes, update the model for existing sessions
2. **Session-aware config:** Make sessions query the gateway for the current model on each request instead of caching it
3. **Clear notification:** Inform users that they need to start a new session for config changes to take effect
4. **Combination:** Update display immediately + document that new sessions are needed for model changes

## Workaround

Start a new session to pick up the newly configured model.

## Environment

- Moltbot version: 2026.1.26
- Gateway mode: local
- Config method: `gateway config.patch`
- Verified: Config change works, but existing sessions don't pick it up

## Comments


## Links

- None detected yet
