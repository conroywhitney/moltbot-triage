---
number: 2927
title: "Control UI: chat.send fails silently - missing idempotencyKey"
author: TheOnlyDustin
created: 2026-01-27T19:32:27Z
updated: 2026-01-28T05:57:46Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/2927
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Description

The Control UI chat fails to send messages (including `/new` from the "New Session" button). Messages appear to submit but nothing happens - no response, no error shown to user.

## Root Cause

The UI is sending `chat.send` RPC calls **without the required `idempotencyKey` parameter**, causing the gateway to reject them silently.

Gateway log shows:
```
[ws] ⇄ res ✗ chat.send 1ms errorCode=INVALID_REQUEST errorMessage=invalid chat.send params: must have required property 'idempotencyKey'
```

## Reproduction

1. Open Control UI at `http://127.0.0.1:18789/chat`
2. Type any message and press Enter (or click "New Session")
3. Message appears to send but nothing happens
4. Gateway logs show the idempotencyKey error

## Workaround

Manually send via console:
```javascript
const app = document.querySelector('clawdbot-app');
app.client.request('chat.send', {
  sessionKey: app.sessionKey,
  message: '/new',
  deliver: false,
  idempotencyKey: crypto.randomUUID()
}).then(console.log).catch(console.error);
```

This works, confirming `crypto.randomUUID()` is available in the browser context.

## Environment

- Clawdbot version: 2026.1.24-3
- Browser: Chrome (also reproduced in Incognito)
- OS: macOS
- Access URL: `http://127.0.0.1:18789/`

## Notes

- `crypto.randomUUID` is available and works when called directly
- WebSocket is connected (`app.connected === true`)
- `chat.history` RPC calls work fine
- Only `chat.send` is affected
- DevTools Issues tab showed CSP warning about eval being blocked - possibly related?

## Comments


## Links

- None detected yet
