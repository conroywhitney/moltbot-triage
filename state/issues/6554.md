---
number: 6554
title: "[Bug]: Audio attachments sometimes inlined as <file> text (binary .ogg dumped, mislabeled as text/tsv), causing context loss and dashboard freeze"
author: ebdeleeuw
created: 2026-02-01T19:48:22Z
updated: 2026-02-01T19:48:22Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6554
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

Summary
When sending Telegram voice notes (audio) with transcription enabled, OpenClaw sometimes inlines the raw .ogg attachment bytes into the model input/session log as a `<file …>` block, mislabeled as `mime="text/tab-separated-values"`. This can massively inflate the prompt/session size, trigger context_length_exceeded, and can freeze/blank the dashboard when opening the affected session.

Environment
OpenClaw version: 2026.1.29
Channel: Telegram DM
Model: openai-codex/gpt-5.2 (400k ctx)
Audio transcription: enabled via faster-whisper script (tools.media.audio configured to run faster_whisper_transcribe.py)
What happened (Actual)
Some Telegram voice messages were stored / forwarded containing a block like:

`<file name=\"... .ogg\" mime=\"text/tab-separated-values\"> ... (gibberish/binary-looking text) ... </file>`

This appears to be raw audio bytes (Ogg) being treated as “text-like” and included as a file-text attachment.

Impact:

Context gets truncated / previous message not available despite being recent
At least one run hit context_length_exceeded
Dashboard becomes very slow or blanks/freeze when selecting that session (likely due to rendering huge messages)
Expected
Audio attachments should never be embedded as <file …> text blocks. Audio should be handled only via transcription (and possibly saved as media on disk), not inlined into prompt/session as extracted “file text.”

Evidence
A saved session transcript contained 13 occurrences of .ogg being inlined as <file> blocks, with individual JSONL lines >200KB; max line observed ~401KB.

Example excerpt (redacted/shortened):

`<file name=\"file_1---… .ogg\" mime=\"text/tab-separated-values\"> 杏卧Ȁ ... </file>`
Hypothesis / likely root cause
In media understanding file-block extraction, audio attachments can be incorrectly treated as text-like and passed through the file text extraction path, which then formats them into <file …> blocks.

Workaround / local patch
I locally patched media-understanding/apply to never inline audio attachments as file blocks (skip kind === "audio" unless the attachment is explicitly a text file via extension). After patch + clearing the corrupted session transcript, the dashboard no longer freezes and subsequent turns preserve context normally.

Reproduction (approx)
Enable Telegram channel.
Enable audio transcription (e.g., faster-whisper via CLI).
Send multiple Telegram voice notes.
Observe that some turns include <file … .ogg …> blocks and session size balloons; eventually context truncation / dashboard freeze can occur.

## Comments


## Links

- None detected yet
