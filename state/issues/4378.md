---
number: 4378
title: "Browser: Support Browserless.io session persistence via Browserless.reconnect"
author: tonydehnke
created: 2026-01-30T04:53:49Z
updated: 2026-01-30T06:05:21Z
labels: []
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/4378
duplicate_of: null
related_issues: [9]
blocks: []
blocked_by: []
---

## Description

## Summary

When using a Browserless.io remote CDP profile, each CLI command creates a new browser session. After the command completes and disconnects, the browser instance is destroyed. This makes multi-step browser workflows impossible with Browserless.

## Current Behavior

1. Configure a Browserless profile:
```json
{
  "browser": {
    "profiles": {
      "browserless": {
        "cdpUrl": "https://production-sfo.browserless.io?token=<token>",
        "color": "#9B59B6"
      }
    }
  }
}
```

2. Run `moltbot browser --browser-profile browserless open https://example.com` → ✅ Works
3. Run `moltbot browser --browser-profile browserless snapshot` → ❌ Fails with "Remote CDP not reachable"

The second command fails because the browser instance from step 2 was destroyed when the connection closed.

## Expected Behavior

Browser sessions with Browserless should persist across commands, allowing multi-step workflows like:
- Open a page
- Take a screenshot
- Fill a form
- Submit and capture results

## Suggested Implementation

Browserless provides a `Browserless.reconnect` CDP command for session persistence:

1. Before disconnecting, call `cdp.send("Browserless.reconnect", { timeout: 60000 })` to get a reconnection endpoint
2. Store the reconnection endpoint with the profile state
3. On next command, use the stored endpoint instead of creating a new session
4. Handle reconnection timeouts (varies by Browserless plan: 10s free, 1min starter, 5min scale)

Reference: Browserless session management docs describe this flow.

## Workarounds

- Use the local container browser for multi-step workflows
- Use Jina Reader skill for content extraction
- Use Firecrawl for anti-bot static page fetching

## Environment

- Moltbot: 2026.1.27-beta.1
- Platform: Docker on Linux (Hetzner VPS)
- Browserless: production-sfo endpoint

## Comments

### @tonydehnke (2026-01-30)

## Update: Workaround Found

After more testing, I've confirmed the issue and found a workaround.

### Root Cause
The browser tool's multi-step workflow fails because each tool call creates a new CDP connection:
1. `open` action → creates session, opens page → **session destroyed when tool call completes**
2. `snapshot` action → tries to reconnect → **fails because session is gone**

The agent correctly uses `profile="browserless"`, but Browserless sessions are ephemeral per-connection.

### Workaround: Use Browserless REST API

Instead of the browser tool, use the Browserless REST API directly via `exec`/curl:

```bash
curl -s -X POST "https://production-sfo.browserless.io/content?token=YOUR_TOKEN" \
  -H 'Content-Type: application/json' \
  -d '{"url": "https://example.com"}'
```

This completes in a single request, avoiding the session persistence issue.

### Available REST Endpoints
- `/content` - Get fully rendered HTML
- `/screenshot` - Capture PNG screenshot
- `/scrape` - Extract structured data with selectors

### What Would Fix This Properly
Implementing `Browserless.reconnect` CDP command support, which allows keeping sessions alive between disconnections (up to 10s on free tier, longer on paid plans).

For now, the REST API workaround works well for content extraction use cases.


## Links

- None detected yet
