---
number: 4607
title: "imageModel fallback not used when primary model falls back to non-vision provider"
author: iamnick-e
created: 2026-01-30T11:23:21Z
updated: 2026-01-30T11:23:21Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/4607
duplicate_of: null
related_issues: [1747]
blocks: []
blocked_by: []
---

## Description

## Bug Description

When the primary model (e.g. `anthropic/claude-opus-4-5`) falls back to a non-vision-capable model (e.g. `github-copilot/claude-opus-4.5`) due to rate limiting or token exhaustion, images in the conversation context cause a 400 error:

```
400 model "claude-opus-4.5" not supported for vision
```

The `imageModel` config (e.g. `google/gemini-2.5-flash`) is not used to handle images in this scenario.

## Expected Behavior

When the current model (after fallback) doesn't support vision, Clawdbot should either:
1. Route image understanding to `imageModel` automatically, or
2. Strip images from conversation context before sending to non-vision models

## Current Behavior

- Images remain in conversation context
- Non-vision fallback model receives the images
- API returns 400 error
- Only workaround is `/new` to reset the session

## Steps to Reproduce

1. Configure `anthropic/claude-opus-4-5` as primary model
2. Configure `github-copilot/claude-opus-4.5` in fallbacks
3. Configure `imageModel` to a vision-capable model
4. Send an image or have an image enter context (e.g. email attachment)
5. Exhaust Anthropic tokens / trigger rate limit
6. Model falls back to GitHub Copilot
7. Next message fails with vision not supported error

## Environment

- Version: 2026.1.24-3
- OS: Linux (CasaOS)
- Channel: Telegram

## Workaround

Reorder fallbacks to prioritize vision-capable models (e.g. `google/gemini-3-pro-preview`) before non-vision models.

## Related

PR #1747 added logic to skip image understanding when the primary model supports vision, but the inverse case (fallback to non-vision) isn't handled.

## Comments


## Links

- None detected yet
