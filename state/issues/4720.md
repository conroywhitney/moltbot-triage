---
number: 4720
title: "CLI UX: plain (non-TUI) google-antigravity onboard/refresh + copyable URL"
author: jg-nd
created: 2026-01-30T15:19:09Z
updated: 2026-01-30T15:19:33Z
labels: []
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/4720
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

### Problem\n\nWhen (re)authing  from the CLI, the current onboarding flow is interactive and prints URLs inside box-drawing UI. This is hard to copy/paste in terminals and slows down operational recovery when tokens expire.\n\nIn practice, tokens can expire regularly; users want a reliable way to:\n- re-auth quickly (or refresh if a refresh token exists)\n- get a *plain URL* (no bounding boxes) that copies cleanly\n- avoid navigating menus when they already know they’re reauthing google-antigravity\n\n### Requested CLI features\n\nAdd a non-interactive / plain UX path for antigravity OAuth:\n\n1) \n   - prints a single clean OAuth URL\n   - optional  (xdg-open)\n   - optional \n\n2)  (or similar)\n   - if a refresh token is present, refresh access token without user interaction\n   - exit non-zero with clear guidance if refresh token is revoked/absent\n\n3) Optional:  mode that *only* prints the URL and exits (for headless flows).\n\n### Notes\n\nOpenClaw already vendors logic that can refresh antigravity tokens using the stored refresh token (Google OAuth token endpoint). The UX gap is mostly in exposing this as first-class CLI subcommands/flags and avoiding TUI formatting.\n\n### Why this matters\n\n- Makes operational recovery faster + less error-prone\n- Enables safe automation (systemd timer refresh + failure-only alerts)\n- Improves copy/paste ergonomics across SSH/tmux\n\nHappy to submit a PR after guidance on preferred command names/flags.

## Comments

### @jg-nd (2026-01-30)

Quick follow-up: my original issue body got mangled by shell backtick substitution when creating it from zsh. Here's the intended content in full (with code formatting):

### Problem

When (re)authing `google-antigravity` from the CLI, the current onboarding flow is interactive and prints URLs inside box-drawing UI. This is hard to copy/paste in terminals and slows down operational recovery when tokens expire.

In practice, tokens can expire regularly; users want a reliable way to:
- re-auth quickly (or refresh if a refresh token exists)
- get a *plain URL* (no bounding boxes) that copies cleanly
- avoid navigating menus when they already know they’re reauthing `google-antigravity`

### Requested CLI features

Add a non-interactive / plain UX path for antigravity OAuth:

1) `clawdbot onboard --profile google-antigravity:<email> --plain`
   - prints a single clean OAuth URL
   - optional `--open` (xdg-open)
   - optional `--copy-url`

2) `clawdbot oauth refresh --profile google-antigravity:<email>` (name tbd)
   - if a refresh token is present, refresh access token without user interaction
   - exit non-zero with clear guidance if refresh token is revoked/absent

3) Optional: `--print-url` mode that *only* prints the URL and exits (for headless flows).

### Notes

OpenClaw already vendors logic that can refresh antigravity tokens using the stored refresh token (Google OAuth token endpoint). The UX gap is mostly in exposing this as first-class CLI subcommands/flags and avoiding TUI formatting.

### Why this matters

- Makes operational recovery faster + less error-prone
- Enables safe automation (systemd timer refresh + failure-only alerts)
- Improves copy/paste ergonomics across SSH/tmux



## Links

- None detected yet
