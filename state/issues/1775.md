---
number: 1775
title: "[Bug] Token mismatch on WebSocket connection in Clawdbot web interface"
author: tzhxgdsfhj-coder
created: 2026-01-25T10:50:30Z
updated: 2026-01-28T06:03:59Z
labels: ["bug"]
assignees: []
comments_count: 4
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/1775
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

Bonjour,\n\nJe rencontre un problème d'authentification avec la passerelle Clawdbot :\n- Le serveur attend un token fixe (gateway.auth.token), mais le client Web génère un token aléatoire différent à chaque connexion WebSocket, ce qui provoque une erreur 'unauthorized: gateway token mismatch'.\n- J'utilise la dernière version Clawdbot téléchargée récemment, avec une configuration correcte de gateway.auth.token et gateway.remote.token dans config.json.\n- Le problème est présent sur plusieurs navigateurs (Firefox, Safari).\n\nPeut-on avoir une option pour forcer le client à utiliser le token configuré ou un correctif ?\n\nMerci d'avance.

## Comments

### @tzhxgdsfhj-coder (2026-01-25)

Bonjour,\n\nLe problème que j’avais signalé concernant le token d’authentification sur la passerelle Clawdbot est désormais résolu de mon côté.\nLe souci venait d’une mauvaise gestion du fichier de configuration centralisé.\n\nMerci de prendre en compte la clôture de ce ticket.\n\nCordialement.

### @podaddy (2026-01-25)

Ran into this same issue on Windows with Clawdbot running as a Scheduled Task.

**Root cause:** The wizard () sets  but doesn't auto-populate . When tools/sessions try to connect, they use  which is empty, causing the mismatch.

**Fix:** Add  to your config with matching token:
```json
"gateway": {
  "auth": { "token": "your-token" },
  "remote": { "token": "your-token" }  // must match auth.token
}
```

**Suggestion:** The wizard should auto-set  to match  to avoid this config gap.

### @cgf120 (2026-01-28)

> 我在 Windows 系统上也遇到了同样的问题，Clawdbot 是以计划任务的形式运行的。
> 
> **根本原因：**向导（）设置了参数，但没有自动填充。当工具/会话尝试连接时，它们使用了一个空的参数，导致不匹配。
> 
> **解决方法：**在配置中添加匹配的令牌：
> 
> "gateway": {
>   "auth": { "token": "your-token" },
>   "remote": { "token": "your-token" }  // must match auth.token
> }
> **建议：**向导应该自动设置为匹配，以避免这种配置差距。

我按照你的这种添加了 还是不行 

<img width="1220" height="486" alt="Image" src="https://github.com/user-attachments/assets/208c6d00-0dc0-4c64-a206-4f8accdc58f9" /> 

### @cgf120 (2026-01-28)

<img width="4448" height="682" alt="Image" src="https://github.com/user-attachments/assets/9af030d6-6bdd-4c27-babd-059d6c70e6c3" />


## Links

- None detected yet
