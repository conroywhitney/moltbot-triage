---
number: 3609
title: "feat(telegram): inject pinned messages as persistent context"
author: tylerdiaz
created: 2026-01-28T22:26:30Z
updated: 2026-01-28T22:31:58Z
labels: []
assignees: []
comments_count: 1
reactions_total: 1
url: https://github.com/moltbot/moltbot/issues/3609
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

Pinned messages in Telegram groups/topics are often used for:
- Project briefs and goals
- Standing instructions  
- Reference info that shouldn't get lost

Currently these fall out of context when history compacts. They should persist.

## Proposed Solution

1. **Fetch pins** on session start + on pin/unpin events + periodically
2. **Inject** as persistent context (system prompt section or dedicated slot)
3. **Config** to control behavior:

```yaml
channels:
  telegram:
    pinnedContext:
      enabled: true
      injection: "system"  # or "history" / "memory"
      maxChars: 2000
      scope: "topic"  # per-topic in forum supergroups
```

## Implementation Notes

- Use `getChat` API to fetch latest pinned message
- Listen for `message:pinned_message` events for updates
- Scope to topic in forum supergroups
- Truncate large pins with configurable `maxChars`

## Example Context Output

```
[üìå Pinned in Dev]
Project X - v2 Launch
Goal: Ship new dashboard by Feb 15
Key APIs: /api/v2/metrics, /api/v2/export

---
[Recent messages...]
```

## Use Case

User pins project context in a topic ‚Üí agent always has that context even after long conversations compact older messages.

---

Full spec: https://github.com/tylerdiaz/moltbot/blob/td/telegram-forum-topics/pinned-context-spec.md

## Comments

### @khadija-kallamu (2026-01-28)

I really like how the config is laid out here  it‚Äôs easy to follow.

One small thought: it might help to briefly explain the difference between the injection modes (‚Äúsystem‚Äù, ‚Äúhistory‚Äù, ‚Äúmemory‚Äù) with a simple example, so users can quickly understand when to use each option.



## Links

- None detected yet
