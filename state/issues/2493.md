---
number: 2493
title: "TUI shows no output for chat.send runs (chat events not emitted)"
author: 1EchA
created: 2026-01-27T01:33:10Z
updated: 2026-01-29T14:54:31Z
labels: ["bug"]
assignees: []
comments_count: 7
reactions_total: 2
url: https://github.com/moltbot/moltbot/issues/2493
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

### Summary
TUI connects and `chat.send` returns started, but no assistant output is shown in the TUI. CLI or agent runs complete and logs show replies.

### Repro
1. Start gateway.
2. Run `clawdbot tui --url ws://127.0.0.1:18789 --session main --message \"hi\"`.
3. Observe no assistant output in TUI even though the run completes.

### Expected
TUI receives chat delta or final events and renders assistant output.

### Actual
No chat events are emitted, so TUI stays blank.

### Cause
`chat.send` never registers the run context or chat run mapping. `createAgentEventHandler` cannot resolve sessionKey for the runId, so it does not emit chat events for that run.

### Proposed Fix
In `src/gateway/server-methods/chat.ts`, when starting a `chat.send` run:
- `registerAgentRunContext(clientRunId, { sessionKey: p.sessionKey })`
- `context.addChatRun(clientRunId, { sessionKey: p.sessionKey, clientRunId })`

This mirrors behavior used in other chat entrypoints and restores chat event routing for TUI.

## Comments

### @1EchA (2026-01-27)

Additional context:
- Version: Clawdbot 2026.1.24-3 (885167d)
- OS: macOS (Apple Silicon)
- TUI: `clawdbot tui --url ws://127.0.0.1:18789 --session main --message "hi"`
- Non-TUI works: `clawdbot agent --session-id main --message "你好"` returns output in CLI
- Gateway logs show runs complete, but TUI stays blank until this fix.


### @lucasverra (2026-01-28)

<img width="1215" height="263" alt="Image" src="https://github.com/user-attachments/assets/65b6a855-30b2-4750-85de-71a1055c2c85" />

### @1EchA (2026-01-29)




> <img alt="Image" width="586.4000244140625" height="126.92500305175781" src="https://private-user-images.githubusercontent.com/11323803/541795598-65b6a855-30b2-4750-85de-71a1055c2c85.png?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3Njk2OTAwOTUsIm5iZiI6MTc2OTY4OTc5NSwicGF0aCI6Ii8xMTMyMzgwMy81NDE3OTU1OTgtNjViNmE4NTUtMzBiMi00NzUwLTg1ZGUtNzFhMTA1NWMyYzg1LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNjAxMjklMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjYwMTI5VDEyMjk1NVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTk4YTBmNzU4MzcxYWI2NDhmYTQyMDIzM2I2ODRiNzFmMTY1ZTI2NGJkZmIwNzE5OGFlOTFkYTliYWUyZmIxMTgmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.x3IvLbGypFopZ1cbHoQ-aqVRBlon_WHwmx_ChSqK3mM">

sometimes u will see (no output) ,wait a sec then u will see the reply

### @xiuxiuxius (2026-01-29)

I also encountered the same problem

<img width="1270" height="648" alt="Image" src="https://github.com/user-attachments/assets/ceee2a85-2097-4bdf-a299-8a6f7e992b93" />

### @xiuxiuxius (2026-01-29)

> I also encountered the same problem
> 
> <img alt="Image" width="1270" height="648" src="https://private-user-images.githubusercontent.com/89114157/542208028-ceee2a85-2097-4bdf-a299-8a6f7e992b93.png?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3Njk2OTQ4NTAsIm5iZiI6MTc2OTY5NDU1MCwicGF0aCI6Ii84OTExNDE1Ny81NDIyMDgwMjgtY2VlZTJhODUtMjA5Ny00YmRmLWEyOTktOGE2ZjdlOTkyYjkzLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNjAxMjklMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjYwMTI5VDEzNDkxMFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTg0ZDBmYjQ5MWIwZTYwODAyYzAyN2QzOGMwZmIzYTJjOGY3OGYxZWEwMGMwNjZkMTk3MTkzODVmMWM4ODBmZDAmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.gWXXEXbV7qG3qqV0LWvklISkjMxBOGge8MYgXFlQdlg">

After switching to qwen, the terminal is normal

<img width="1558" height="634" alt="Image" src="https://github.com/user-attachments/assets/bed2cbef-c11f-42c6-8cb8-ced800d4511c" />

### @anajuliabit (2026-01-29)

same here 

### @User17745 (2026-01-29)

Facing the same issue. 

Did the setup using the bash script method:
`curl -fsSL https://molt.bot/install.sh | bash`

<img width="808" height="511" alt="Image" src="https://github.com/user-attachments/assets/a7b77f54-eb14-45b8-9e59-165f6a89d464" />

Thought it had to do with the LLM provider, so tried clean installs with both Gemini and GPT, but it didn't help.

Also, after exiting, tried running `moltbot -v`, but it turns out that the `moltbot` command is not recognized within the VM.

So I tried installing using the npm method as mentioned on the `https://www.molt.bot/` landing page, but it seems to still have the old `clawdbot` commands (or maybe they are just yet to rename those, I'm not sure), but it also seems to set up a separate instance of the clawdbot instead of replacing the moltbot instance that I have already supposidly installed.

Overall, I think the recent rebrand from clawdbot to moltbot may have introduced refactoring issues, resulting in the breaking of the setup script. OR, it could just be that we are all doing something wrong that we don't realize yet.


## Links

- None detected yet
