---
number: 5225
title: "[Bug]: openclaw.mjs references non-existent dist/entry.js after tsdown migration; dynamic import causes silent failure"
author: jeades
created: 2026-01-31T06:56:15Z
updated: 2026-01-31T17:52:43Z
labels: ["bug"]
assignees: []
comments_count: 6
reactions_total: 2
url: https://github.com/openclaw/openclaw/issues/5225
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

Summary                                                                                                                                                                               
                                                                                                                                                                                        
  After commit 67945e8d6 ("chore: Switch from TypeScript to build with tsdown"), the CLI fails to run because:                                                                          
                                                                                                                                                                                        
  1. openclaw.mjs imports ./dist/entry.js which doesn't exist (build produces dist/index.mjs)                                                                                           
  2. Even after fixing the import path, the dynamic await import() in openclaw.mjs causes the CLI to produce no output                                                                  
                                                                                                                                                                                        
  Steps to reproduce                                                                                                                                                                    
                                                                                                                                                                                        
  1. Fresh install using curl -fsSL https://openclaw.ai/install.sh | bash -s -- --install-method git                                                                                    
  2. cd ~/openclaw && pnpm install && pnpm build                                                                                                                                        
  3. Run openclaw --help                                                                                                                                                                
                                                                                                                                                                                        
  Expected behavior                                                                                                                                                                     
                                                                                                                                                                                        
  CLI displays help text and version information.                                                                                                                                       
                                                                                                                                                                                        
  Actual behavior                                                                                                                                                                       
                                                                                                                                                                                        
  Issue 1: Module not found error:                                                                                                                                                      
  Error [ERR_MODULE_NOT_FOUND]: Cannot find module '/home/user/openclaw/dist/entry.js' imported from /home/user/openclaw/openclaw.mjs                                                   
                                                                                                                                                                                        
  Issue 2: After manually fixing openclaw.mjs to import ./dist/index.mjs, the command runs but produces no output:                                                                      
  $ node ~/openclaw/openclaw.mjs --help                                                                                                                                                 
  # (no output, exits with code 0)                                                                                                                                                      
                                                                                                                                                                                        
  However, running dist/index.mjs directly works:                                                                                                                                       
  $ node ~/openclaw/dist/index.mjs --help                                                                                                                                               
  ðŸ¦ž OpenClaw 2026.1.29 ...                                                                                                                                                             
                                                                                                                                                                                        
  Environment                                                                                                                                                                           
                                                                                                                                                                                        
  - OpenClaw version: 2026.1.29 (commit 72ea3eedc)                                                                                                                                      
  - OS: Raspberry Pi OS Lite (Debian Trixie), 64-bit ARM                                                                                                                                
  - Node.js: v22.22.0                                                                                                                                                                   
  - Install method: --install-method git      
                                                                                                                                           
  Logs or screenshots                                                                                                                                                                   
                                                                                                                                                                                        
  Build output shows .mjs files, not .js:                                                                                                                                               
  â„¹ dist/index.mjs                             229.07 kB                                                                                                                                
  â„¹ dist/reply-CxbzLerE.mjs                   2173.79 kB                                                                                                                                
  ...                                                                                                                                                                                   
                                                                                                                                                                                        
  openclaw.mjs still references .js:                                                                                                                                                    
  await import("./dist/entry.js");                                                                                                                                                      
                                                                                                                                                                                        
  package.json was updated but openclaw.mjs was not:                                                                                                                                    
  # In commit 67945e8d6:                                                                                                                                                                
  - "main": "dist/index.js"                                                                                                                                                             
  + "main": "dist/index.mjs"                                                                                                                                                            
                                                                                                                                                                                        
  Workaround                                                                                                                                                                            
                                                                                                                                                                                        
  Update the wrapper script to call dist/index.mjs directly instead of going through openclaw.mjs:                                                                                      
                                                                                                                                                                                        
  # ~/.local/bin/openclaw                                                                                                                                                               
  #!/usr/bin/env bash                                                                                                                                                                   
  set -euo pipefail                                                                                                                                                                     
  exec node "$HOME/openclaw/dist/index.mjs" "$@"                                                                                                                                        
                                                                                                                                                                                        
  Suggested Fix                                                                                                                                                                         
                                                                                                                                                                                        
  Update openclaw.mjs line 14:                                                                                                                                                          
  - await import("./dist/entry.js");                                                                                                                                                    
  + await import("./dist/index.mjs");                                                                                                                                                   
                                                                                                                                                                                        
  Additionally, investigate why the dynamic import causes silent output loss (possibly related to module.enableCompileCache() or ESM resolution with the .mjs extension).               

## Comments

### @ipty (2026-01-31)

same here after:
curl -fsSL https://openclaw.ai/install.sh | bash -s -- --install-method git --no-onboard

----
[...]
openclaw@2026.1.29 canvas:a2ui:bundle /home/xxxx/openclaw
bash scripts/bundle-a2ui.sh

A2UI bundling failed. Re-run with: pnpm canvas:a2ui:bundle
If this persists, verify pnpm deps and try again.
â€‰ELIFECYCLEâ€‰ Command failed with exit code 254.
â€‰ELIFECYCLEâ€‰ Command failed with exit code 254.


### @eniyiweb (2026-01-31)

The same situation exists in Docker:

Error: Cannot find module '/app/dist/index.mjs'
at Function._resolveFilename (node:internal/modules/cjs/loader:1383:15)
at defaultResolveImpl (node:internal/modules/cjs/loader:1025:19)
at resolveForCJSWithHooks (node:internal/modules/cjs/loader:1030:22)
at Function._load (node:internal/modules/cjs/loader:1192:37)
at TracingChannel.traceSync (node:diagnostics_channel:328:14)
at wrapModuleLoad (node:internal/modules/cjs/loader:237:24)
at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:171:5)
at node:internal/main/run_main_module:36:49 {
code: 'MODULE_NOT_FOUND',
requireStack: []
}
Node.js v22.22.0

### @glow1128 (2026-01-31)

same here

> openclaw-control-ui@ build /Users/mark/Workspace/code/openclaw/ui
> vite build

vite v7.3.1 building client environment for production...
âœ“ 119 modules transformed.
../dist/control-ui/index.html                   0.69 kB â”‚ gzip:  0.37 kB
../dist/control-ui/assets/index-BKPyesll.css   74.85 kB â”‚ gzip: 13.15 kB
../dist/control-ui/assets/index-BP_AMK79.js   356.50 kB â”‚ gzip: 94.60 kB â”‚ map: 1,006.06 kB
âœ“ built in 515ms

> openclaw@2026.1.29 build /Users/mark/Workspace/code/openclaw
> pnpm canvas:a2ui:bundle && tsdown && node --import tsx scripts/canvas-a2ui-copy.ts && node --import tsx scripts/copy-hook-metadata.ts && node --import tsx scripts/write-build-info.ts


> openclaw@2026.1.29 canvas:a2ui:bundle /Users/mark/Workspace/code/openclaw
> bash scripts/bundle-a2ui.sh

A2UI bundling failed. Re-run with: pnpm canvas:a2ui:bundle
If this persists, verify pnpm deps and try again.
â€‰ELIFECYCLEâ€‰ Command failed with exit code 254.
â€‰ELIFECYCLEâ€‰ Command failed with exit code 254.

### @ipty (2026-01-31)

@marijus  the original error seems to be fixed, but it seems that there is still an entry.js issue

[copy-hook-metadata] Copied boot-md/HOOK.md
[copy-hook-metadata] Copied command-logger/HOOK.md
[copy-hook-metadata] Copied session-memory/HOOK.md
[copy-hook-metadata] Copied soul-evil/HOOK.md
[copy-hook-metadata] Done
âœ“ OpenClaw wrapper installed to $HOME/.local/bin/openclaw
```
i This checkout uses pnpm. For deps, run: pnpm install (avoid npm install in the repo).
â†’ Running doctor to migrate settings...
node:internal/modules/cjs/loader:1386
  throw err;
  ^

Error: Cannot find module '/home/xxx/openclaw/dist/entry.js'
    at Function._resolveFilename (node:internal/modules/cjs/loader:1383:15)
    at defaultResolveImpl (node:internal/modules/cjs/loader:1025:19)
    at resolveForCJSWithHooks (node:internal/modules/cjs/loader:1030:22)
    at Function._load (node:internal/modules/cjs/loader:1192:37)
    at TracingChannel.traceSync (node:diagnostics_channel:328:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:237:24)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:171:5)
    at node:internal/main/run_main_module:36:49 {
  code: 'MODULE_NOT_FOUND',
  requireStack: []
}
````
Node.js v22.22.0
âœ“ Migration complete

ðŸ¦ž OpenClaw installed successfully!
Update complete. I learned some new tricks while I was out.

Source checkout: /home/xxx/openclaw
Wrapper: $HOME/.local/bin/openclaw
Installed from source. To update later, run: openclaw update --restart
Switch to global install later: curl -fsSL --proto '=https' --tlsv1.2 https://openclaw.ai/install.sh | bash -s -- --install-method npm

kind regards

### @sfo2001 (2026-01-31)

I propose to close. This was fixed in commit 76361ae3a (revert to tsc).

If you installed via git, run:
```bash
cd ~/openclaw && git pull && pnpm install && pnpm build
```

If you installed via npm, run:                                                                                                                                                                                                              
```bash
npm install -g openclaw@latest
```

### @ipty (2026-01-31)

i can confirm:
curl -fsSL https://openclaw.ai/install.sh | bash -s -- --install-method git --no-onboard
runs with no issues


## Links

- None detected yet
