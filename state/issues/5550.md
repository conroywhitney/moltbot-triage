---
number: 5550
title: "[Bug]: ISSUE WITH TELEGRAM"
author: TheDreamer01
created: 2026-01-31T16:35:27Z
updated: 2026-01-31T16:56:50Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 1
url: https://github.com/openclaw/openclaw/issues/5550
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

# Bug Report: Telegram Channel - fetch failed (IPv6 DNS Resolution)

## Environment
- **OS:** Linux 6.17.0-8-generic (x64)
- **Node:** v22.22.0
- **OpenClaw:** 2026.1.29
- **Gateway:** ws://127.0.0.1:18789

## Issue Summary
Telegram channel fails to send messages with `fetch failed` error. API calls via curl work fine.

## Root Cause Analysis
1. DNS resolution for `api.telegram.org` returns both IPv4 and IPv6 addresses:
   - IPv4: 149.154.166.110
   - IPv6: 2001:67c:4e8:f004::9

2. The gateway's HTTP client (undici) prefers IPv6, which fails to connect in this environment

3. Evidence:
   - `curl -4` works (IPv4)
   - `curl -6` fails (IPv6)
   - Gateway logs show: `TypeError: fetch failed` and `SYN-SENT` connections to IPv6 address

4. Attempted fix: `NODE_OPTIONS="--dns-result-order=ipv4first"` — not effective as the HTTP library (undici) uses its own DNS resolver

## Expected Behavior
Telegram messages should be sent successfully using IPv4 fallback.

## Workaround
Use direct API calls via curl:
```bash
./telegram-send.sh <chat_id> "<message>"
```

## Suggested Fixes
1. Add `family: 4` option to undici fetch calls in telegram plugin
2. Add explicit DNS resolution preference in gateway config
3. Add a `--force-ipv4` flag to gateway startup

## Logs
```
2026-01-31T16:16:40.689Z warn [openclaw] Non-fatal unhandled rejection (continuing): TypeError: fetch failed
2026-01-31T16:16:40.694Z error telegram/api telegram sendChatAction failed: Network request for 'sendChatAction' failed!
2026-01-31T16:16:40.698Z error gateway/channels/telegram telegram sendMessage failed: Network request for 'sendMessage' failed!
```

## Contact
Report by: Alessandro (alexdec007)

## Comments

### @TheDreamer01 (2026-01-31)

Related Issue #5531

Same symptoms reported here: https://github.com/openclaw/openclaw/issues/5531

Both issues show:

Telegram messages are received ✅
Automatic replies fail to deliver to Telegram ❌
Message tool with explicit targeting works ✅
This suggests the problem may not be IPv6/DNS specific, but rather a reply routing bug when multiple channels are active. Please merge or link these issues.


## Links

- None detected yet
