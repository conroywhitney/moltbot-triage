---
number: 7511
title: "Teltelegram provider crashes gateway on startup (unhandled fetch rejection + setMyCommands failure) + OpenAI key not loading after OAuth success"
author: jacobthedreamarchitect
created: 2026-02-02T22:23:24Z
updated: 2026-02-02T22:23:24Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7511
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

**Describe the bug**
Clawdbot gateway crashes repeatedly when enabling Telegram, usually during provider startup. Logs show repeated "setMyCommands failed" and "Unhandled promise rejection: TypeError: fetch failed" (network request to Telegram API fails). This kills the entire gateway process (1006 abnormal closure, zombie PID, port 18789 not listening).

Additionally, OpenAI API key is not loading into the agent even after successful OAuth login in the wizard ("Authentication successful"). Agent fails with "No API key found for provider 'openai-codex'". Config get commands return "path not found" on multiple attempted paths.

**To Reproduce**
1. Fresh install or recovery of Clawdbot 2026.1.24-3
2. Run `clawdbot onboard` → complete wizard with OpenAI OAuth (successful login)
3. Enable Telegram:
   clawdbot config set channels.telegram.enabled true
   clawdbot config set channels.telegram.dmPolicy "pairing"
   clawdbot gateway restart
4. Gateway crashes (stopped/spawn scheduled, probe fails)
5. Logs show fetch/setMyCommands failure
6. Try to set OpenAI key manually → "Unrecognized key" on paths like agent.apiKey, models.openai-codex.apiKey, etc.
7. Agent still fails with "No API key found" even though OAuth succeeded

**Expected behavior**
- Telegram enables without crashing gateway
- Polling starts, bot replies to messages
- OpenAI key (or OAuth token) is loaded and used for replies in dashboard/channels

**Actual behavior**
- Gateway crashes on Telegram startup
- No replies in dashboard, Telegram, or other channels
- Key/auth not visible to agent

**Environment**
- OS: macOS 13.7.8 (x64)
- Node: 22.22.0
- Clawdbot version: 2026.1.24-3
- Installation method: npm -g clawdbot
- Network: tried home Wi-Fi, cellular hotspot (rules out firewall)

**Additional context / things tried**
- Recovery loop: stop → pkill → install --force → start (works to revive gateway, but crash recurs on enable)
- IPv4 DNS force: export NODE_OPTIONS="--dns-result-order=ipv4first"
- Manual config edit: tried adding "setMyCommands": false (rejected as unrecognized key)
- OAuth login: successful, but agent still can't see auth
- Pairing: no pending requests
- Logs show repeated unhandled rejections on fetch to api.telegram.org

**Desired outcome**
- Stable gateway with Telegram enabled and polling
- OpenAI model replying in dashboard and channels

Happy to provide full logs, config file (redacted), or any other info.

## Comments


## Links

- None detected yet
