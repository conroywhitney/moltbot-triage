---
number: 3934
title: "Feature: Inline buttons for exec approval messages in Telegram"
author: zebrosha-max
created: 2026-01-29T11:33:41Z
updated: 2026-01-29T12:59:38Z
labels: []
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/3934
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

When exec approval requests are forwarded to Telegram via `approvals.exec.targets`, they arrive as text-only messages with instructions to reply `/approve <id> allow-once|allow-always|deny`.

**Request**: Add inline keyboard buttons to approval messages for a better UX.

## Current behavior

```
üîí Exec approval required
ID: a2a6dc6d-049a-43ae-af46-77a810fe1a58
Command: cat /etc/hostname
CWD: /home/deploy/clawd
Host: gateway
Agent: main
Security: allowlist
Ask: on-miss
Expires in: 120s
Reply with: /approve <id> allow-once|allow-always|deny
```

## Proposed behavior

Same message but with inline buttons:
- ‚úÖ Allow once
- ‚ôæ Always allow  
- ‚ùå Deny

Clicking a button would trigger the corresponding `/approve` command.

## Why this matters

1. **Faster approvals** - One tap vs typing/copying a long UUID
2. **Mobile-friendly** - Buttons are much easier on phones
3. **Fewer timeout errors** - 120s timeout is tight when manually copying UUIDs

## Additional context

- Telegram channel already supports `inlineButtons` capability
- The `message` tool can send buttons via `buttons` parameter
- Callback data can contain slash commands which Moltbot processes

## Workaround attempted

Tried to build a workaround where the agent sends buttons after receiving approval request, but:
- `exec` tool returns only short ID (e.g., `a2a6dc6d`)
- `/approve` requires full UUID (`a2a6dc6d-049a-43ae-af46-77a810fe1a58`)
- No API to get pending approvals with full IDs

**Alternative request**: If buttons are complex to implement, returning full UUID from exec tool would enable user-space workarounds.

## Comments

### @TechWizard9999 (2026-01-29)

Hi @zebrosha-max ,
I've submitted a PR to address this: #3972 

The implementation adds three inline buttons (Allow once, Always allow, Deny) to Telegram exec approval messages. When clicked, the approval is resolved via the gateway and the message updates to show the result.

Let me know if you'd like any changes!


## Links

- None detected yet
