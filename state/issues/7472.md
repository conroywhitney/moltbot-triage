---
number: 7472
title: "Telegram Message Routing Bug - Messages Misclassified as Webchat"
author: official-iris
created: 2026-02-02T21:27:38Z
updated: 2026-02-02T22:05:09Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7472
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

# Telegram Message Routing Bug - Messages Misclassified as Webchat

## Summary
Telegram messages are being incorrectly routed to webchat sessions instead of generating dedicated Telegram responses. Messages originating from Telegram are being misclassified with `"provider": "webchat"` in the session data.

## Environment
- **OpenClaw Version**: 2026.2.1 (updated from 2026.1.30 - issue persists)
- **Platform**: Linux 6.8.0-94-generic (x64) · node 22.22.0
- **Telegram Mode**: Polling (default)
- **Channel Status**: Enabled, configured, running

## Expected Behavior
According to the [official documentation](https://docs.openclaw.ai/concepts/channel-routing), Telegram messages should:
- Maintain `"provider": "telegram"` in session data
- Generate dedicated Telegram responses
- Use proper session routing back to Telegram

## Actual Behavior
Telegram messages are being misclassified and routed incorrectly:

### Evidence from Session Data
```json
"deliveryContext": {
  "channel": "webchat"
},
"lastChannel": "webchat",
"origin": {
  "provider": "webchat",  // ❌ Should be "telegram"
  "surface": "webchat",   // ❌ Should be "telegram"
  "chatType": "direct",
  "label": "telegram:5084374070",
  "from": "telegram:5084374070",
  "to": "telegram:5084374070"
}
```

### Configuration Evidence
Telegram channel properly configured with:
- Bot token configured and validated
- DM policy: allowlist with correct user ID
- Channel enabled and running in polling mode
- Basic connectivity established

### Status Evidence
```
Telegram default: enabled, configured, running, out:1m ago, mode:polling, token:config
```

## Steps to Reproduce
1. Configure Telegram channel with valid bot token
2. Send message to bot from Telegram
3. Observe that message appears in webchat session instead of generating Telegram response
4. Check session data - shows `"provider": "webchat"` instead of `"telegram"`

## Impact
- Telegram messages don't receive dedicated Telegram responses
- All Telegram communication gets routed through webchat interface
- Breaks expected channel-specific behavior
- Affects user experience for Telegram-only interactions

## What Works
- ✅ Telegram bot receives messages (polling functional)
- ✅ Outgoing messages to Telegram work fine
- ✅ Configuration is valid and recognized
- ✅ Basic connectivity established

## What's Broken
- ❌ Message routing classification
- ❌ Channel-specific response generation
- ❌ Session provider attribution

## Additional Notes
- Issue persists after updating from 2026.1.30 to 2026.2.1
- Problem appears to be in core gateway routing logic
- Configuration follows official documentation exactly
- No custom routing or binding configurations present

## Environment Details
- **Node Version**: v22.22.0
- **Gateway Mode**: local
- **Session Management**: Default configuration
- **No custom bindings or routing rules**

This appears to be a core bug in the OpenClaw gateway message routing system rather than a configuration issue.

## Comments


## Links

- None detected yet
