---
number: 3298
title: "Compaction fails for providers with authHeader: false"
author: OSA-0XA40
created: 2026-01-28T11:26:48Z
updated: 2026-01-28T15:07:55Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/3298
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug Description
Compaction fails with "No API key found for provider" even when the provider has `authHeader: false` configured.

## Steps to Reproduce
1. Configure Ollama as primary model with `authHeader: false`
2. Run `/compact` command
3. Error: `No API key found for provider 'ollama'`

## Expected Behavior
Compaction should work without requiring auth for providers that have `authHeader: false` set.

## Workaround
Add a dummy auth profile to `auth-profiles.json`:
```json
"ollama:local": {
  "type": "api-key",
  "provider": "ollama",
  "key": "not-needed-local"
}
```

## Environment
- Clawdbot version: 2026.1.24-3
- OS: Windows 10
- Provider: Ollama (local)

## Comments


## Links

- None detected yet
