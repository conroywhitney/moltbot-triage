---
number: 2784
title: "web_search sends wrong model name to Perplexity API"
author: luizfilipeschaeffer
created: 2026-01-27T14:10:01Z
updated: 2026-01-28T05:58:52Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 1
url: https://github.com/moltbot/moltbot/issues/2784
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary
When using `web_search` with the Perplexity provider, Clawdbot prefixes the model name with `perplexity/`, sending `perplexity/sonar-pro` instead of `sonar-pro`. The Perplexity API rejects this with a 400 error.

## Steps to reproduce
1. Configure Perplexity as the web search provider with a valid API key
2. Set `tools.web.search.perplexity.model` to `sonar-pro` (or leave default)
3. Run a `web_search` query

## Expected behavior
The API request should use the model name exactly as configured (e.g., `sonar-pro`), matching Perplexity's expected format.

## Actual behavior
Clawdbot sends `perplexity/sonar-pro` to the API, which returns:
```
Invalid model 'perplexity/sonar-pro'. Permitted models can be found in the documentation at https://docs.perplexity.ai/getting-started/models.
```

## Environment
- Clawdbot version: 2026.1.24-3
- OS: Windows_NT 10.0.26200 (x64)
- Install method: npm (`npm install -g clawdbot`)

## Logs or screenshots
```json
{
  "status": "error",
  "tool": "web_search",
  "error": "Perplexity API error (400): {\"error\":{\"message\":\"Invalid model 'perplexity/sonar-pro'. Permitted models can be found in the documentation at https://docs.perplexity.ai/getting-started/models.\",\"type\":\"invalid_model\",\"code\":400}}"
}
```

**Config used:**
```json
{
  "tools": {
    "web": {
      "search": {
        "provider": "perplexity",
        "perplexity": {
          "apiKey": "pplx-***",
          "model": "sonar-pro"
        }
      }
    }
  }
}
```

**Workaround:** After `npm update -g clawdbot` and restart, changing to `model: "sonar"` worked. The update may have fixed the prefix issue, but `sonar-pro` still failed before the update.

## Comments


## Links

- None detected yet
