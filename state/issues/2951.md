---
number: 2951
title: "WhatsApp: Long audio downloads fail with TypeError terminated"
author: UXINFRA-OPS
created: 2026-01-27T20:46:41Z
updated: 2026-01-28T05:57:29Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/2951
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug Description

When receiving long WhatsApp voice notes (tested with ~6 minutes), the media download fails with:

\\\
TypeError: terminated
    at Fetch.onAborted (node:internal/deps/undici/undici:13083:53)
\\\

## Environment
- Clawdbot version: 2026.1.24-3
- OS: Windows 10
- Node: v22.20.0

## Expected Behavior
Voice notes of any reasonable length should download successfully. The \mediaMaxMb\ setting defaults to 50MB which should be plenty for a 6-minute audio (~900KB).

## Actual Behavior
The undici HTTP client terminates the fetch request mid-download, causing the file to never be saved. Shorter voice notes (~2-3 minutes) download fine.

## Suggested Fix
- Add configurable download timeout for WhatsApp media (currently seems to use undici defaults)
- Or implement retry logic for large media downloads
- Or switch to streaming download with timeout per chunk rather than whole file

## Workaround
Currently users must manually save the voice note from their phone and provide the file path.

## Comments


## Links

- None detected yet
