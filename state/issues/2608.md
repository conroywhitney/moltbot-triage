---
number: 2608
title: "[Slack] Thread context: auto-fetch thread history when replying in a thread"
author: naoto13
created: 2026-01-27T06:17:15Z
updated: 2026-01-30T03:04:31Z
labels: ["bug"]
assignees: []
comments_count: 2
reactions_total: 5
url: https://github.com/openclaw/openclaw/issues/2608
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Feature Request

### Problem
When a user replies to a message in a Slack thread, Clawdbot currently does not receive the thread context. This means the agent cannot see the previous conversation in the thread and loses important context.

### Current Behavior
- User replies in a Slack thread
- Clawdbot only receives the single reply message
- No `thread_ts` or thread history is passed to the agent

### Expected Behavior
When a message comes from a Slack thread reply:
1. The Slack channel plugin should detect `thread_ts` in the incoming event
2. Automatically fetch thread history using `conversations.replies` API
3. Include the thread context in the agent's input (similar to how session history works)

### Proposed Solution
In the Slack channel plugin:
```javascript
// When processing incoming message
if (event.thread_ts) {
  const threadHistory = await slack.conversations.replies({
    channel: event.channel,
    ts: event.thread_ts,
    limit: 20  // configurable
  });
  // Inject thread context into agent input
}
```

### Configuration Options (optional)
- `slack.threadContext.enabled`: boolean (default: true)
- `slack.threadContext.maxMessages`: number (default: 20)

### Additional Context
- The `message action=read` tool already supports reading threads via `threadId` parameter
- Bot token permissions should already include `conversations.replies` scope
- This would significantly improve UX for threaded conversations

### Environment
- Clawdbot version: latest
- Channel: Slack

## Comments

### @jarredkenny (2026-01-27)

I've been trying to figure out a way to enforce that every slack thread be its own session in Clawdbot. That has tradeoffs but would also be a nice way to solve this. 

### @naoto13 (2026-01-30)

## Additional Evidence (2026-01-30)

### Confirmed Issue
Tested today: when replying in a Slack thread, the agent context does **not** include `thread_ts`.

### Test Case
1. User posts in channel → starts thread
2. User replies in thread with a question
3. Agent receives message with only:
   - `message_id: 1769742095.615449`
   - `channel: C0AARCJ5PAN`
   - **No `thread_ts` present**

### Screenshot Evidence
The message was clearly sent from within a thread (visible in Slack UI), but the agent had no way to detect this.

### Workaround (temporary)
Added to AGENTS.md:
```markdown
## Slack スレッド対応
- When receiving a Slack thread link, manually extract thread_ts
- Use `message read --threadId <thread_ts>` to fetch context
```

This requires users to manually paste thread links, which is not ideal.

### Priority
This significantly impacts UX for any threaded conversation. The agent appears to "forget" context when users reply in threads.

+1 for implementing `slack.threadContext.enabled` as proposed.


## Links

- None detected yet
