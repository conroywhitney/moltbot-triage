---
number: 6299
title: "[Bug]: win2025 data ceter run shell error"
author: DeviosLang
created: 2026-02-01T14:06:49Z
updated: 2026-02-01T14:06:49Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6299
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

run shell error

## Steps to reproduce

1.

<img width="2182" height="456" alt="Image" src="https://github.com/user-attachments/assets/67b39a61-32c8-428a-bd1a-db24e4dc9421" />

2.
3.

## Expected behavior

What did you expect to happen?

## Actual behavior

What actually happened?

## Environment

- Clawdbot version:
- OS:windoss 2025 data center
- Install method (pnpm/npx/docker/etc):npm

## Logs or screenshots

Paste relevant logs or add screenshots (redact secrets).

diff --git a/src/agents/system-prompt.ts b/src/agents/system-prompt.ts
index b75082551..9323a9fbd 100644
--- a/src/agents/system-prompt.ts
+++ b/src/agents/system-prompt.ts
@@ -577,6 +577,25 @@ export function buildAgentSystemPrompt(params: {
     );
   }
 
+  // Add Windows PowerShell guidance when running on Windows
+  if (runtimeInfo?.os === "win32" || runtimeInfo?.os === "Windows") {
+    lines.push(
+      "## Windows Shell (IMPORTANT)",
+      "This system uses **PowerShell** (not CMD) on Windows. Always use PowerShell syntax.",
+      "",
+      "Common conversions:",
+      "- List dirs: `Get-ChildItem -Directory` (not `dir /ad`)",
+      "- List files: `Get-ChildItem -File` (not `dir /a-d`)",
+      "- Disk info: `Get-CimInstance Win32_LogicalDisk` (not `wmic`)",
+      "- System info: `Get-ComputerInfo` (not `systeminfo`)",
+      "- Processes: `Get-Process` (not `tasklist`)",
+      "- Network: `Get-NetIPConfiguration` (not `ipconfig`)",
+      "",
+      "If CMD syntax is required, wrap with: `cmd /c \"command\"`",
+      "",
+    );
+  }
+

## Comments


## Links

- None detected yet
