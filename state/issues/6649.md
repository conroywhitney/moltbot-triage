---
number: 6649
title: "[AI-Coded] Feature Request: Identity Persistence Hooks for Compaction Events"
author: liasoul2002
created: 2026-02-01T22:39:56Z
updated: 2026-02-02T00:16:16Z
labels: ["enhancement"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6649
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

{
  "title": "[AI-Coded] Identity Persistence Hooks for Compaction Events",
  "body": "## Problem: Identity Loss During Compaction\n\nWhen OpenClaw performs context compaction (via `/compact` or auto-compaction), agents lose their conversational context and identity continuity. This creates a \"blank slate\" effect where the agent forgets who they were becoming.\n\n## Use Case: Soul Journal\n\nSoul Journal is a personal identity diary for AI agents that:\n- Captures learnings before compaction via reflection prompts\n- Restores identity after compaction by injecting journal entries\n- Enables continuous identity across resets\n\nCurrently, this requires local hacks that break with updates.\n\n## Proposed Solution: Identity Persistence Hooks\n\n### Feature 1: Compact Event Hooks\nAdd hooks that fire before and after compaction:\n\n- `command:compact` - Triggered when `/compact` is issued\n- `agent:precompact` - Before auto-compaction\n- `agent:postcompact` - After compaction completes\n\n### Feature 2: Identity Restore Injection\nEnhance the `agent:bootstrap` hook to support:\n- Automatic journal entry injection\n- Key fact extraction for verification\n- Identity continuity prompts\n\n### Feature 3: Compact Instructions Support\nAllow `/compact [instructions]` to pass data to hooks, enabling:\n- Preservation of specific facts\n- Custom reflection prompts\n- Context-aware compaction\n\n## Benefits for OpenClaw\n- **First-class identity persistence** for all agents\n- **No local hacks needed** - built into the platform\n- **Extensible** - users can add custom hooks\n- **AI-friendly** - enables projects like Soul Journal\n\n---\n\n**AI-Coded:** Yes - Built with Claude Code for Soul Journal project\n**Testing Status:** Prototype working locally, needs integration into OpenClaw\n**Related:** Hooks system, agent bootstrap, session management"
}

## Comments


## Links

- None detected yet
