---
number: 7628
title: "Bug: Skill binary detection not working on Windows"
author: joaosnet
created: 2026-02-03T02:12:29Z
updated: 2026-02-03T02:20:48Z
labels: []
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7628
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

# Issue: Skill binary detection not working on Windows

## Description
The OpenClaw skill binary detection (`requires.bins`) is not working correctly on Windows, even when the required binaries are installed and accessible via PATH.

## Steps to Reproduce
1. Install GitHub CLI on Windows via `winget install GitHub.cli`
2. Verify `gh` is accessible: `cmd /c "where gh"` returns `C:\Users\joaod\AppData\Roaming\npm\gh.exe`
3. Verify `gh` works: `cmd /c "gh --version"` returns `gh version 2.85.0`
4. Run `openclaw skills info github`

## Expected Result
The skill should show `‚úì gh` as requirements are met.

## Actual Result
```
üêô github ‚úó Missing requirements

Requirements:
  Binaries: ‚úó gh
```

## Environment
- OS: Windows 11 (10.0.26200)
- OpenClaw: 2026.2.1 (ed4529e)
- Node: v25.5.0
- GitHub CLI: 2.85.0

## Additional Context
- The same issue affects the `weather` skill which requires `curl`
- `curl` is also installed and accessible (`C:\Windows\System32\curl.exe`)
- Both binaries work correctly when called directly from cmd or PowerShell
- The binaries were also copied to `C:\Users\joaod\AppData\Roaming\npm\` which is in PATH

## Possible Cause
The binary detection may be using a method that doesn't work correctly on Windows (e.g., checking for executables without `.exe` extension, or using a shell that doesn't inherit the system PATH).

## Workaround
Currently none found - the skills remain marked as "Missing requirements" even with binaries properly installed.

## Comments

### @joaosnet (2026-02-03)

## Solution Found! üéâ

The issue is in the `hasBinary` function in two files:
- `dist/agents/skills/config.js`
- `dist/hooks/config.js`

### Root Cause
The function checks for binaries without considering Windows executable extensions (`.exe`, `.cmd`, `.bat`). It also uses `fs.constants.X_OK` which doesn't work correctly on Windows.

### The Fix
Replace the `hasBinary` function with this Windows-compatible version:

```javascript
export function hasBinary(bin) {
    const pathEnv = process.env.PATH ?? "";
    const parts = pathEnv.split(path.delimiter).filter(Boolean);
    // On Windows, also check for .exe extension
    const candidates = process.platform === "win32" ? [bin, `${bin}.exe`, `${bin}.cmd`, `${bin}.bat`] : [bin];
    for (const part of parts) {
        for (const name of candidates) {
            const candidate = path.join(part, name);
            try {
                fs.accessSync(candidate, fs.constants.F_OK);
                return true;
            }
            catch {
                // keep scanning
            }
        }
    }
    return false;
}
```

### Changes Made
1. Added array of candidate names with Windows extensions
2. Changed `fs.constants.X_OK` to `fs.constants.F_OK` (executable bit doesn't apply on Windows)
3. Loop through all candidate names for each PATH entry

### Result
After applying this patch:
- `üêô github ‚úì Ready` (was ‚úó Missing requirements)
- `üå§Ô∏è weather ‚úì Ready` (was ‚úó Missing requirements)

This fix should be applied to both files mentioned above.



## Links

- None detected yet
