---
number: 7440
title: "WebChat UI shows internal system messages (compaction flush, session reset prompts)"
author: itaibiton
created: 2026-02-02T20:45:40Z
updated: 2026-02-02T20:45:40Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7440
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Description

The WebChat UI renders **internal system messages** that should be hidden from users. These include:

- **Pre-compaction memory flush prompts** — e.g. `Pre-compaction memory flush. Store durable memories now (use memory/YYYY-MM-DD.md; create memory/ if needed). If nothing to store, reply with NO_REPLY.`
- **Session reset prompts** — e.g. `A new session was started via /new or /reset. Greet the user in your configured persona...`

These messages are injected by the Gateway for internal housekeeping (memory flush before compaction, session initialization) and are not intended for the user to see. The agent handles them silently (responds with `NO_REPLY`), but the **prompt itself** still appears in the chat as a visible "user" message.

## Expected behavior

Internal/system-injected messages (compaction flush prompts, session reset directives, etc.) should be **filtered out or hidden** from the WebChat message history display. They should only exist in the transcript for the agent, not be rendered in the UI.

## Current behavior

All messages in the transcript are rendered in the WebChat, including internal housekeeping messages. This creates a confusing experience where the user sees raw system prompts mixed in with their conversation.

## Screenshots / Example

What the user sees in WebChat:

```
Pre-compaction memory flush. Store durable memories now...
You 10:39 PM

A new session was started via /new or /reset. Greet the user...
You 10:39 PM

Pre-compaction memory flush. Store durable memories now...
You 10:39 PM
```

## Possible solutions

1. Tag internal/housekeeping messages with a metadata flag (e.g. `internal: true` or `hidden: true`) in the transcript JSONL
2. Have the WebChat UI filter out messages matching known system prompt patterns
3. Use the existing `custom_message` type (which the docs say "can be hidden from UI") for these injected messages

## Environment

- OpenClaw version: 2026.2.1
- Channel: WebChat (Gateway WebSocket UI)
- Compaction mode: safeguard with memoryFlush enabled

## Comments


## Links

- None detected yet
