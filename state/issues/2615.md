---
number: 2615
title: "macOS menubar app fails device pairing when using transport: \"direct\" to remote gateway in k3s"
author: seanb4t
created: 2026-01-27T06:35:08Z
updated: 2026-01-28T06:00:02Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/2615
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Environment
Gateway: Clawdbot 2026.1.24-1, running in k3s (Docker), gateway.bind: "lan"
Mac client: Clawdbot 2026.1.24-3 (macOS, Apple Silicon)
Network: Gateway exposed via Tailscale Operator LoadBalancer (k3s Service → Tailscale IP)
Mac config: gateway.mode: "remote", transport: "direct", url: "ws://<tailscale-hostname>:18789" + auth token

## What works
curl http://<tailscale-hostname>:18789/health → 200 OK ✅
clawdbot health (CLI) → connects, shows channels ok, agents listed ✅

## What doesn't work
Menubar app shows "disconnected" and "Cannot reach gateway at localhost:18789..."
Gateway devices/pending.json shows a pending device pairing request from the app (platform: darwin, role: operator)
The CLI and menubar app have separate device identities — CLI pairs fine, app does not
App appears to still probe localhost:18789 in some code paths even when transport: "direct" and remote.url are set

## Logs
Gateway receives the pairing request correctly (remoteIp is the k3s pod network IP from the LoadBalancer)
Mac app logs show repeated gateway connect failed: Error: pairing required (close code 1008)
clawdbot doctor on Mac shows Probe target: ws://127.0.0.1:18789 and Loopback-only gateway — suggests some code paths ignore the remote URL config

## Expected behavior
The menubar app should complete the device pairing handshake the same way the CLI does when using transport: "direct".

## Workaround
CLI works fine. Web dashboard at the gateway URL also works. Only the menubar app is affected.

## Comments


## Links

- None detected yet
