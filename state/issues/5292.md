---
number: 5292
title: "[Bug]: Matrix plugin non-functional"
author: nyxtutt
created: 2026-01-31T08:47:46Z
updated: 2026-02-02T20:22:39Z
labels: ["bug"]
assignees: []
comments_count: 6
reactions_total: 4
url: https://github.com/openclaw/openclaw/issues/5292
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary
What went wrong?
The Matrix plugin does not work.

## Steps to reproduce
1. Install the Matrix plugin as described as the docs
2. Run `MATRIX_ACCESS_TOKEN=[...] MATRIX_HOMESERVER=https://[...] openclaw gateway`
3. Observe the logs being spammed with a warning and more importantly this:
```
08:41:52 [gateway] [plugins] failed to load plugin: Error: Cannot find module '@vector-im/matrix-bot-sdk'
Require stack:
- /home/nyx/.openclaw/extensions/matrix/src/matrix/client/config.ts (plugin=matrix, source=/home/nyx/.openclaw/extensions/matrix/index.ts)
```

## Expected behavior
What did you expect to happen?
Matrix plugin to work properly

## Actual behavior
What actually happened?
Does not connect to matrix (the admin api says it has no devices)

## Environment
- Clawdbot version: `2026.1.29`
- OS: Arch Linux
- Install method (pnpm/npx/docker/etc): `npm`

## Logs or screenshots
Paste relevant logs or add screenshots (redact secrets).
```
Config warnings:\n- plugins.entries.matrix: plugin matrix: duplicate plugin id detected; later plugin may be overridden (/usr/lib/node_modules/openclaw/extensions/matrix/index.ts)
Config warnings:\n- plugins.entries.matrix: plugin matrix: duplicate plugin id detected; later plugin may be overridden (/usr/lib/node_modules/openclaw/extensions/matrix/index.ts)
Config warnings:\n- plugins.entries.matrix: plugin matrix: duplicate plugin id detected; later plugin may be overridden (/usr/lib/node_modules/openclaw/extensions/matrix/index.ts)
Config warnings:\n- plugins.entries.matrix: plugin matrix: duplicate plugin id detected; later plugin may be overridden (/usr/lib/node_modules/openclaw/extensions/matrix/index.ts)
Config warnings:\n- plugins.entries.matrix: plugin matrix: duplicate plugin id detected; later plugin may be overridden (/usr/lib/node_modules/openclaw/extensions/matrix/index.ts)
Config warnings:\n- plugins.entries.matrix: plugin matrix: duplicate plugin id detected; later plugin may be overridden (/usr/lib/node_modules/openclaw/extensions/matrix/index.ts)
Config warnings:\n- plugins.entries.matrix: plugin matrix: duplicate plugin id detected; later plugin may be overridden (/usr/lib/node_modules/openclaw/extensions/matrix/index.ts)
Config warnings:\n- plugins.entries.matrix: plugin matrix: duplicate plugin id detected; later plugin may be overridden (/usr/lib/node_modules/openclaw/extensions/matrix/index.ts)
08:46:50 [plugins] matrix failed to load from /home/nyx/.openclaw/extensions/matrix/index.ts: Error: Cannot find module '@vector-im/matrix-bot-sdk'
Require stack:
- /home/nyx/.openclaw/extensions/matrix/src/matrix/client/config.ts

ðŸ¦ž OpenClaw 2026.1.29 (a5b4d22) â€” The only crab in your contacts you actually want to hear from. ðŸ¦ž

(node:98783) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
â”‚
â—‡  Config warnings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                           â”‚
â”‚  - plugins.entries.matrix: plugin matrix: duplicate plugin id detected; later plugin may  â”‚
â”‚    be overridden (/usr/lib/node_modules/openclaw/extensions/matrix/index.ts)              â”‚
â”‚                                                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
08:46:50 [gateway] [plugins] duplicate plugin id detected; later plugin may be overridden (/usr/lib/node_modules/openclaw/extensions/matrix/index.ts) (plugin=matrix, source=/usr/lib/node_modules/openclaw/extensions/matrix/index.ts)
08:46:50 [gateway] [plugins] failed to load plugin: Error: Cannot find module '@vector-im/matrix-bot-sdk'
Require stack:
- /home/nyx/.openclaw/extensions/matrix/src/matrix/client/config.ts (plugin=matrix, source=/home/nyx/.openclaw/extensions/matrix/index.ts)
```

## Comments

### @Deep-27 (2026-01-31)

I investigated this locally in detail.

The Matrix extension already declares `@vector-im/matrix-bot-sdk` in
`extensions/matrix/package.json` and installs correctly when using `pnpm`.
So this is not a missing dependency issue.

The failure appears to be environment-related:

- OpenClaw requires **Node.js >= 22.12.0**, but this is not enforced at runtime.
- Running with Node 21.x (or without pnpm) causes the Matrix plugin to fail
  to load, which matches the behavior described in this issue.
- The error message does not clearly indicate that the Node version / pnpm
  requirement is the root cause.

I suggest either:
- documenting the Node.js (>= 22.12.0) and pnpm requirements more clearly for
  Matrix users, or
- adding a startup guard that fails fast with a clear error message when the
  environment is unsupported.

Happy to open a small PR for docs or a runtime check if that helps.


### @joshuafhiggins (2026-01-31)

> * OpenClaw requires **Node.js >= 22.12.0**

I have the same issue when running the Docker container, when using the image versions `node:22-bookworm` and `node:23-bookworm` both still fail to install the matrix plugin when trying to install dependencies. The same error original report is given when using the local path bundled in the image at `/app/extensions/matrix`

I don't think the node version is causing this issue.

### @stutteringp0et (2026-02-02)

I got the matrix plugin working by manually adding the channel config into openclaw.json

```
  "channels": {
    "matrix": {
      "enabled": true,
      "homeserver": "https://matrix.myserver.whatever",
      "accessToken": "syt_yougetthisfromacurlcommandinthedocs",
      "encryption": true,
      "dm": {
        "policy": "pairing"
      }
    }
  },
```

It sill throws the duplicate plugin error - but it works...sort of.  With encryption enabled - the docs say it's supposed to send a verification request - but it never does....  If you're not using an encrypted room - it should work.  I haven't tried that yet because I want it encrypted.


### @djmaze (2026-02-02)

The `duplicate plugin id detected` occurs because you are running from a git checkout of openclaw, which already has the extensions included. You just need to do `plugin enable matrix` instead of `plugin install`. 

### @tuxthepenguin84 (2026-02-02)

I've run into `duplicate plugin id detected` from running the one liner installer `curl -fsSL https://openclaw.ai/install.sh | bash`. Which isn't the git checkout of openclaw from my understanding.

### @djmaze (2026-02-02)

At least in my docker setup I fixed the problem by running `pnpm install` once after enabling the matrix plugin inside the gateway container and then restarting the gateway.


## Links

- None detected yet
