---
number: 5131
title: "Voice call plugin accepts calls but never generates/serves TTS audio"
author: bradlind1
created: 2026-01-31T03:21:23Z
updated: 2026-02-02T19:29:16Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/5131
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

# Voice Call Plugin Bug Report

**Date:** 2026-01-30  
**Clawdbot Version:** 2026.1.24-3  
**Plugin:** voice-call  
**Provider:** Twilio + ElevenLabs TTS

## Issue Summary

The voice-call plugin accepts incoming and outgoing calls successfully, validates phone numbers against the allowlist, and creates call records — but **never generates or serves TTS audio**. Calls ring but no audio is played, resulting in silent calls that eventually timeout.

## Reproduction Steps

### Inbound Calls
1. Call the configured Twilio number: +1 (929) 547-4175
2. Call is accepted by plugin (logs confirm)
3. **Expected:** Hear AI voice greeting
4. **Actual:** Complete silence, call eventually times out

### Outbound Calls
1. Use `voice_call` tool: `initiate_call(to="+19292615401", message="Test")`
2. Call connects
3. **Expected:** Hear TTS audio with the message
4. **Actual:** Complete silence

## Evidence from Logs

### Call Acceptance (Working ✅)
```
[voice-call] Inbound call accepted: +19292615401 is in allowlist
[voice-call] Created inbound call record: 04622a26-38f3-4569-9fcc-b02f183acf80 from +19292615401
```

### TTS Generation (Missing ❌)
**No logs showing:**
- ElevenLabs API calls
- TTS audio generation
- TwiML response generation
- Audio file serving

The plugin stops after creating the call record and never proceeds to generate/serve audio.

## Configuration

```json
{
  "provider": "twilio",
  "twilio": {
    "accountSid": "[REDACTED_TWILIO_SID]",
    "authToken": "[REDACTED]"
  },
  "inboundPolicy": "allowlist",
  "allowFrom": ["+61407708565", "+19292615401"],
  "fromNumber": "+19295474175",
  "serve": {
    "port": 18790,
    "bind": "127.0.0.1",
    "path": "/voice"
  },
  "tunnel": {
    "provider": "ngrok",
    "allowNgrokFreeTier": true,
    "ngrokAuthToken": "[REDACTED]"
  },
  "tts": {
    "provider": "elevenlabs",
    "elevenlabs": {
      "apiKey": "[REDACTED]",
      "voiceId": "pNInz6obpgDQGcFmaJgB",
      "modelId": "eleven_multilingual_v2"
    }
  },
  "maxDurationSeconds": 600,
  "silenceTimeoutMs": 5000,
  "transcriptTimeoutMs": 3000
}
```

## Verification Tests

### ElevenLabs TTS (Works Standalone ✅)
```bash
curl -X POST "https://api.elevenlabs.io/v1/text-to-speech/pNInz6obpgDQGcFmaJgB" \
  -H "Accept: audio/mpeg" \
  -H "Content-Type: application/json" \
  -H "xi-api-key: [KEY]" \
  -d '{"text":"Test","model_id":"eleven_multilingual_v2"}' \
  --output /tmp/test-tts.mp3

# Result: Successfully generated 17KB MP3 file
```

### Webhook URL (Configured Correctly ✅)
- Ngrok tunnel: `https://nonseclusively-unairable-page.ngrok-free.dev/voice`
- Twilio voice URL: `https://nonseclusively-unairable-page.ngrok-free.dev/voice`
- URLs match and ngrok is active

### Phone Number Validation (Working ✅)
- Allowlist properly configured
- Logs show successful validation
- Call records created correctly

## Twilio Call Status

```json
{
  "from": "+19292615401",
  "to": "+19295474175",
  "status": "busy"
}
```

Status shows "busy" because the webhook doesn't return proper TwiML.

## Expected Behavior

When a call is accepted (inbound or outbound), the plugin should:
1. Generate TTS audio via ElevenLabs for the greeting/message
2. Create a TwiML response with `<Play>` verb pointing to the audio
3. Return the TwiML to Twilio
4. Serve the audio file when Twilio requests it
5. Listen for user speech and continue the conversation

## Actual Behavior

The plugin:
1. ✅ Receives webhook from Twilio
2. ✅ Validates caller against allowlist
3. ✅ Creates call record
4. ❌ **Never generates TTS audio**
5. ❌ **Never returns TwiML response**
6. ❌ **Call hangs in silence**

## System Environment

- **OS:** macOS (Darwin 24.6.0 arm64)
- **Node:** v25.4.0
- **Clawdbot:** 2026.1.24-3 (latest)
- **Runtime:** Local gateway with ngrok tunnel
- **Elevated:** Yes

## Additional Notes

- This appears to be a regression or incomplete implementation in the audio generation/serving flow
- The infrastructure (Twilio, ElevenLabs, webhooks, ngrok) all work correctly in isolation
- The issue is specifically in the plugin's integration between call handling and TTS generation
- Both inbound and outbound calls are affected identically

## Requested Fix

The voice-call plugin needs to properly:
1. Generate TTS audio when a call is accepted/initiated
2. Create and return TwiML responses to Twilio
3. Serve audio files via the webhook endpoint
4. Log TTS generation and audio serving steps for debugging

## Contact

Report filed by: Brad L (via Naomi AI assistant)  
Telegram: @bradlindbot  
Phone: +1 (929) 261-5401

## Comments

### @carlj-dev (2026-02-02)

## Additional Report - Same Issue

**Date:** 2026-02-02  
**OpenClaw Version:** 2026.2.1  
**Provider:** Twilio  
**Tunnel:** Cloudflare Tunnel (cloudflared)

### Confirming Same Behavior

Experiencing the identical issue:

1. ✅ Webhook receives call from Twilio
2. ✅ Call accepted, allowlist validated
3. ✅ Call record created
4. ❌ Webhook returns only `<Pause length="30"/>` instead of `<Say>` or streaming TwiML
5. ❌ No TTS audio generated
6. ❌ Call times out silently

### Webhook Response Test
```bash
curl -X POST http://localhost:3334/voice/webhook \
  -d "CallSid=test&From=+1234&Direction=inbound"
# Returns: <Response><Pause length="30"/></Response>
```

### Expected Behavior

Per docs: "otherwise calls fall back to provider native voices" — should return `<Say>` with inboundGreeting when streaming isn't available.

### Environment
- macOS (Darwin 25.2.0 arm64)
- Node v25.5.0
- Cloudflare Tunnel (cloudflared)

Affects both inbound and outbound calls.


## Links

- None detected yet
