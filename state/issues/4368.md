---
number: 4368
title: "DEFAULT_SANDBOX_WORKSPACE_ROOT ignores MOLTBOT_STATE_DIR"
author: tsukhani
created: 2026-01-30T04:29:45Z
updated: 2026-01-30T04:29:45Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/4368
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug Description

`DEFAULT_SANDBOX_WORKSPACE_ROOT` in `dist/agents/sandbox/constants.js` is hardcoded to `~/.clawdbot/sandboxes` and does not respect the `MOLTBOT_STATE_DIR` environment variable, even though other sandbox paths in the same file correctly use `STATE_DIR`.

## Current Behavior

```js
// constants.js
export const DEFAULT_SANDBOX_WORKSPACE_ROOT = path.join(os.homedir(), ".clawdbot", "sandboxes");
```

This causes `~/.clawdbot/sandboxes/` to be recreated even when `MOLTBOT_STATE_DIR=~/.moltbot` is set.

## Expected Behavior

The path should respect `STATE_DIR` like other sandbox paths do:

```js
const resolvedSandboxStateDir = STATE_DIR ?? path.join(os.homedir(), ".clawdbot");
export const SANDBOX_STATE_DIR = path.join(resolvedSandboxStateDir, "sandbox");
```

## Suggested Fix

```js
// Change from:
export const DEFAULT_SANDBOX_WORKSPACE_ROOT = path.join(os.homedir(), ".clawdbot", "sandboxes");

// To:
export const DEFAULT_SANDBOX_WORKSPACE_ROOT = path.join(STATE_DIR ?? path.join(os.homedir(), ".clawdbot"), "sandboxes");
```

This is a one-liner fix that makes sandbox mounts consistent with the rest of the sandbox state directory configuration.

## Environment

- Moltbot version: 2026.1.27-beta.1
- OS: Linux (Ubuntu)

## Comments


## Links

- None detected yet
