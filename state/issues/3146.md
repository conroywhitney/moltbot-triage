---
number: 3146
title: "[Bug]: docker install \\"./docker-setup.sh\\" happen => ERROR [12/14] RUN CLAWDBOT_A2UI_SKIP_MISSING=1 pnpm build"
author: Ericshen2019
created: 2026-01-28T05:07:55Z
updated: 2026-01-28T06:11:59Z
labels: ["bug"]
assignees: []
comments_count: 2
reactions_total: 5
url: https://github.com/moltbot/moltbot/issues/3146
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary
What went wrong?

## Steps to reproduce
1. Git clone repo to my ubuntu server
2. run "./docker-setup.sh

## Expected behavior
What did you expect to happen?

Install success, i can use "docker ps" to see my moltbot run

## Actual behavior
What actually happened?

=> ERROR [12/14] RUN CLAWDBOT_A2UI_SKIP_MISSING=1 pnpm build

## Environment
- Clawdbot version:Clawdbot 2026.1.24
- OS:Ubuntu 24.04
- Install method (pnpm/npx/docker/etc):docker

## Logs or screenshots
Paste relevant logs or add screenshots (redact secrets).

```
name@myubuntu:~/docker/moltbot$ sudo ./docker-setup.sh
==> Building Docker image: moltbot:local
[+] Building 52.9s (16/18)                                                                                                                                                                                                        docker:default
 => [internal] load build definition from Dockerfile                                                                                                                                                                                        0.0s
 => => transferring dockerfile: 1.18kB                                                                                                                                                                                                      0.0s
 => [internal] load metadata for docker.io/library/node:22-bookworm                                                                                                                                                                         0.2s
 => [internal] load .dockerignore                                                                                                                                                                                                           0.0s
 => => transferring context: 483B                                                                                                                                                                                                           0.0s
 => [ 1/14] FROM docker.io/library/node:22-bookworm@sha256:cd7bcd2e7a1e6f72052feb023c7f6b722205d3fcab7bbcbd2d1bfdab10b1e935                                                                                                                 0.1s
 => => resolve docker.io/library/node:22-bookworm@sha256:cd7bcd2e7a1e6f72052feb023c7f6b722205d3fcab7bbcbd2d1bfdab10b1e935                                                                                                                   0.0s
 => [internal] load build context                                                                                                                                                                                                           0.5s
 => => transferring context: 222.76kB                                                                                                                                                                                                       0.5s
 => CACHED [ 2/14] RUN curl -fsSL https://bun.sh/install | bash                                                                                                                                                                             0.0s
 => CACHED [ 3/14] RUN corepack enable                                                                                                                                                                                                      0.0s
 => CACHED [ 4/14] WORKDIR /app                                                                                                                                                                                                             0.0s
 => CACHED [ 5/14] RUN if [ -n "" ]; then       apt-get update &&       DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends  &&       apt-get clean &&       rm -rf /var/lib/apt/lists/* /var/cache/apt/archives/*;   0.0s
 => CACHED [ 6/14] COPY package.json pnpm-lock.yaml pnpm-workspace.yaml .npmrc ./                                                                                                                                                           0.0s
 => CACHED [ 7/14] COPY ui/package.json ./ui/package.json                                                                                                                                                                                   0.0s
 => CACHED [ 8/14] COPY patches ./patches                                                                                                                                                                                                   0.0s
 => CACHED [ 9/14] COPY scripts ./scripts                                                                                                                                                                                                   0.0s
 => CACHED [10/14] RUN pnpm install --frozen-lockfile                                                                                                                                                                                       0.0s
 => [11/14] COPY . .                                                                                                                                                                                                                        1.4s
 => ERROR [12/14] RUN CLAWDBOT_A2UI_SKIP_MISSING=1 pnpm build                                                                                                                                                                              50.6s
------                                                                                                                                                                                                                                           
 > [12/14] RUN CLAWDBOT_A2UI_SKIP_MISSING=1 pnpm build:                                                                                                                                                                                          
1.136                                                                                                                                                                                                                                            
1.136 > moltbot@2026.1.27-beta.1 build /app                                                                                                                                                                                                      
1.136 > pnpm canvas:a2ui:bundle && tsc -p tsconfig.json && node --import tsx scripts/canvas-a2ui-copy.ts && node --import tsx scripts/copy-hook-metadata.ts && node --import tsx scripts/write-build-info.ts                                     
1.136                                                                                                                                                                                                                                            
1.874 
1.874 > moltbot@2026.1.27-beta.1 canvas:a2ui:bundle /app
1.874 > bash scripts/bundle-a2ui.sh
1.874 
1.894 A2UI sources missing; keeping prebuilt bundle.
50.21 src/discord/targets.ts(8,8): error TS2305: Module '"../channels/targets.js"' has no exported member 'DirectoryConfigParams'.
50.22 src/discord/targets.ts(9,8): error TS2305: Module '"../channels/targets.js"' has no exported member 'ChannelDirectoryEntry'.
50.39  ELIFECYCLE  Command failed with exit code 1.
------
Dockerfile:27
--------------------
  25 |     
  26 |     COPY . .
  27 | >>> RUN CLAWDBOT_A2UI_SKIP_MISSING=1 pnpm build
  28 |     # Force pnpm for UI build (Bun may fail on ARM/Synology architectures)
  29 |     ENV CLAWDBOT_PREFER_PNPM=1
--------------------
ERROR: failed to build: failed to solve: process "/bin/sh -c CLAWDBOT_A2UI_SKIP_MISSING=1 pnpm build" did not complete successfully: exit code: 1
```

## Comments

### @secret-deus (2026-01-28)

src/discord/targets.ts(84,54): error TS2559: Type 'DirectoryConfigParams' has no properties in common with type 'MessagingTargetParseOptions'.
this bug is still after commit 61ab348dd3e0170a762f1563bb4d5f0c346670f9

### @yerbymatey (2026-01-28)

The TS2559 type mismatch mentioned by @secret-deus is now tracked in #3167.



## Links

- None detected yet
