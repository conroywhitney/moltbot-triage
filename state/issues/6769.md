---
number: 6769
title: "[Bug]: Discord connector fails on fresh Docker container start - JITI cache corruption"
author: jaiden0
created: 2026-02-02T01:41:46Z
updated: 2026-02-02T01:41:46Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6769
duplicate_of: null
related_issues: [1234]
blocks: []
blocked_by: []
---

## Description

## Summary

Discord channel connector consistently fails with "Failed to resolve Discord application id" error on fresh container creation (docker-compose up), but works correctly after a subsequent container stop/start cycle. Root cause seems to be related to corrupted JITI (Just-In-Time TypeScript compiler) cache in /tmp/jiti/discord-index.*.cjs.


## Steps to reproduce
1. Setup docker-compose.yml:
```
openclaw:
  build: ./openclaw
  container_name: openclaw-agent
  command: bash -c "openclaw gateway --verbose"
  # ... standard config
```

2. Create fresh container:
docker-compose down
docker-compose up -d

3. Check logs:

```
docker-compose logs openclaw
```
**Observed:** Error message appears:
```
[discord] [default] channel exited: Failed to resolve Discord application id
```
## MANUAL Workaround: 
```docker-compose up -d
openclaw config set channels.discord.dm.policy pairing
docker-compose stop
docker-compose start
```
(Container restart with no rebuild)
**Observed:** Discord connects successfully:
```
[Discord] Logged in as bot#1234
[Discord] Ready! Connected to 1 guilds
```
## PROGRAMMATIC Workaround:
Edit docker-compose.yaml and replace command with;
```
command: bash -c "export JITI_CACHE=0 && rm -rf /tmp/jiti && openclaw config set channels.discord.dm.policy pairing && openclaw gateway --verbose"
```

## Expected behavior
Identical result from docker-compose stop/start as down/up.

## Actual behavior
docker-compose stop/start persists something (in JITI?) which down/up does not. 

## Environment

OpenClaw Version: 2026.1.30 (76b5208)
Platform: Docker (Windows 11 with WSL2 backend)
Base Image: node:22 (full, not slim)
Node Version: 22.x
Installation Method: Docker Compose with custom build
OS: Windows 11 Host → WSL2 → Docker Desktop → Ubuntu 24.04 containers

## Notes
I was able to isolate the problem by noticing that /tmp/jiti/discord* existed after "stop". Aside from that I don't really know WHY the workarounds work, only that they do, for me.  Basically you have to do all steps in the manual workaround every time you "up".  If you run the "openclaw config set..." and then stop/start you don't need the stuff about JITI, but when using docker-compose up (programmatic workaround) you do.  

This bug report, and some troubleshooting was done with the assistance of AI (Claude chat).  I am not an expert on any of this, please be gentle.

## Comments


## Links

- None detected yet
