---
number: 3003
title: "Bug: Forced 'anthropic/' prefix causes \\"Unknown model\\" error with local Ollama providers"
author: zizdoun4-afk
created: 2026-01-27T22:11:39Z
updated: 2026-01-29T14:12:07Z
labels: ["bug"]
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/3003
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

### Description
The agent automatically appends the `anthropic/` prefix to models even when configured to use a local Ollama instance. This leads to a connection failure because Ollama does not recognize the prefixed model name.

### Steps to Reproduce
1. Set up Ollama with `qwen2.5-coder:7b`.
2. Configure `clawdbot.json` with `primary: "qwen2.5-coder:7b"`.
3. Run `moltbot gateway`.
4. Observe the logs.

### Observed Logs
`[clawdbot] Model "qwen2.5-coder:7b" specified without provider. Falling back to "anthropic/qwen2.5-coder:7b".`
`[diagnostic] lane task error: error="Error: Unknown model: anthropic/qwen2.5-coder:7b"`

### Expected Behavior
The agent should respect the `baseUrl` and not force a provider prefix if it's already defined or if a local provider is intended.

### Environment
- **Version:** 2026.1.24-3
- **OS:** Windows
- **LLM:** Ollama (Local)

## Comments

### @bt0r (2026-01-29)

@zizdoun4-afk Did you tried these settings : 
```JSON
"agents": {
    "defaults": {
      "model": {
        "primary": "ollama/qwen3"
      },
      "models": {
        "ollama/qwen3": {}
      },
      "workspace": "/root/clawd",
      "compaction": {
        "mode": "safeguard"
      },
      "maxConcurrent": 4,
      "subagents": {
        "maxConcurrent": 8
      }
    }
  },
```
*replace qwen3 by your targetted model*

It works fine on my computer with clawdbot 2026.1.24-3 


## Links

- None detected yet
