---
number: 3003
title: "Bug: Forced 'anthropic/' prefix causes \"Unknown model\" error with local Ollama providers"
author: zizdoun4-afk
created: 2026-01-27T22:11:39Z
updated: 2026-01-30T13:35:43Z
labels: ["bug"]
assignees: []
comments_count: 2
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/3003
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

### Description
The agent automatically appends the `anthropic/` prefix to models even when configured to use a local Ollama instance. This leads to a connection failure because Ollama does not recognize the prefixed model name.

### Steps to Reproduce
1. Set up Ollama with `qwen2.5-coder:7b`.
2. Configure `clawdbot.json` with `primary: "qwen2.5-coder:7b"`.
3. Run `moltbot gateway`.
4. Observe the logs.

### Observed Logs
`[clawdbot] Model "qwen2.5-coder:7b" specified without provider. Falling back to "anthropic/qwen2.5-coder:7b".`
`[diagnostic] lane task error: error="Error: Unknown model: anthropic/qwen2.5-coder:7b"`

### Expected Behavior
The agent should respect the `baseUrl` and not force a provider prefix if it's already defined or if a local provider is intended.

### Environment
- **Version:** 2026.1.24-3
- **OS:** Windows
- **LLM:** Ollama (Local)

## Comments

### @bt0r (2026-01-29)

@zizdoun4-afk Did you tried these settings : 
```JSON
"agents": {
    "defaults": {
      "model": {
        "primary": "ollama/qwen3"
      },
      "models": {
        "ollama/qwen3": {}
      },
      "workspace": "/root/clawd",
      "compaction": {
        "mode": "safeguard"
      },
      "maxConcurrent": 4,
      "subagents": {
        "maxConcurrent": 8
      }
    }
  },
```
*replace qwen3 by your targetted model*

It works fine on my computer with clawdbot 2026.1.24-3 

### @Nrgte (2026-01-30)

I'm having a similar issue with text-generation-webui:

I've this agent configuration, but the LLM never gets triggered:

```json  
"agents": {
    "defaults": {
      "model": {
        "primary": "Oobabooga/Qwen3-30B-A3B-Thinking-2507"
      },
      "models": {
        "Oobabooga/Qwen3-30B-A3B-Thinking-2507": {}
      },
      "workspace": "/root/.openclaw/workspace",
      "compaction": {
        "mode": "safeguard"
      },
      "heartbeat": {
        "model": "Oobabooga/Qwen3-30B-A3B-Thinking-2507",
        "includeReasoning": true
      },
      "maxConcurrent": 4,
      "subagents": {
        "maxConcurrent": 8
      }
    },
    "list": [
      {
        "id": "main"
      },
      {
        "id": "default",
        "name": "default",
        "workspace": "/root/.openclaw/workspace-default",
        "agentDir": "/root/.openclaw/agents/default/agent"
      }
    ]
  },
```

But auth probes return an ok on the command line.


## Links

- None detected yet
