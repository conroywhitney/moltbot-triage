---
number: 7549
title: "Google Antigravity OAuth refresh token not being used - forces re-auth every hour"
author: thejaypee
created: 2026-02-02T23:45:13Z
updated: 2026-02-02T23:45:13Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7549
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug Report

**Component:** Google Antigravity OAuth authentication

**OpenClaw Version:** 2026.2.1

### Symptom
Users authenticated with Google Antigravity OAuth must manually re-authenticate every 15-60 minutes. The AI stops responding until the user runs `openclaw models auth login --provider google-antigravity` again.

### Expected Behavior
The stored refresh token in `auth-profiles.json` should automatically renew the access token silently when it expires.

### Actual Behavior
OpenClaw generates a new OAuth URL and forces full re-authentication instead of using the stored refresh token.

### Evidence
1. Refresh token exists in `~/.openclaw/agents/main/agent/auth-profiles.json`:
   ```json
   "refresh": "1//0fEvQJgxWejktCgYIARAAGA8SNwF-L9Ir..."
   ```

2. Logs show new OAuth flow being triggered instead of silent refresh:
   ```
   https://accounts.google.com/o/oauth2/v2/auth?client_id=...
   ```

3. Access token expiration timestamp is set but refresh never happens automatically

### Impact
Makes OpenClaw **unusable** for Google Antigravity users with Gemini subscriptions (who cannot use API keys and must use OAuth).

### Root Cause Analysis
The refresh logic in `src/agents/auth-profiles/oauth.ts` delegates to `@mariozechner/pi-ai` package's `getOAuthApiKey()` function. The bug appears to be either:
1. OpenClaw not calling the refresh logic when access token expires, OR
2. The `@mariozechner/pi-ai` package not properly handling Google Antigravity refresh tokens

### Environment
- OS: WSL2/Windows (Debian)
- OpenClaw: 2026.2.1
- Auth method: Google Antigravity OAuth (onboarding wizard choice)
- Refresh token: Present in auth-profiles.json

### Reproduction
1. Run `openclaw onboard` and choose Google Antigravity
2. Complete OAuth flow successfully
3. Wait 15-60 minutes
4. Observe: AI stops responding, new OAuth URL appears in logs
5. Must manually re-authenticate to continue

### Requested Fix
Ensure refresh tokens are used automatically before access token expiration, as documented in auth-health.js comment: *"OAuth credentials with a valid refresh token auto-renew on first API call"*

## Comments


## Links

- None detected yet
