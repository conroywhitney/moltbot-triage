---
number: 7299
title: "Signal: message tool lowercases group IDs, breaking base64 encoding"
author: gerigk-agent
created: 2026-02-02T17:13:36Z
updated: 2026-02-02T20:14:21Z
labels: []
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7299
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

### Summary
The `message` tool lowercases Signal group IDs, corrupting base64-encoded identifiers.

### Root Cause
In `dist/channels/plugins/normalize/signal.js`:

```javascript
if (lower.startsWith("group:")) {
    const id = normalized.slice("group:".length).trim();
    return id ? \`group:\${id}\`.toLowerCase() : undefined;  // BUG
}
```

Base64 is **case-sensitive**. Lowercasing changes the decoded bytes entirely:
- Original: `...0RI=` → decodes to `0x500dd112`  
- Lowercased: `...0ri=` → decodes to `0xf6a7d2b8` (completely different!)

signal-cli then decodes the corrupt base64, fails to find the group, and re-encodes for its error message — which is why the error shows `...0rg=` instead of `...0ri=`.

### Fix
Remove `.toLowerCase()` from the return statements:

```javascript
// Before (broken)
return id ? \`group:\${id}\`.toLowerCase() : undefined;

// After (fixed)
return id ? \`group:\${id}\` : undefined;
```

Same fix needed for usernames and other targets in that file.

### Environment
- OpenClaw 2026.2.1
- signal-cli 0.13.23

## Comments

### @lailoo (2026-02-02)

I addressed this issue in PR #7425

If you have some time, I'd really appreciate it if you could take a look.

---

**Fix:** Remove `.toLowerCase()` from group ID normalization - base64 is case-sensitive.


## Links

- None detected yet
