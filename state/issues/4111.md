---
number: 4111
title: "[Bug]:This version of Antigravity is no longer supported. Please update to receive the latest features!"
author: CntrlX
created: 2026-01-29T17:59:50Z
updated: 2026-02-02T18:05:52Z
labels: ["bug"]
assignees: []
comments_count: 51
reactions_total: 23
url: https://github.com/openclaw/openclaw/issues/4111
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

Summary
The bot fails to generate responses and returns a "This version of Antigravity is no longer supported" error. This indicates the local google-antigravity provider or the bot instance is outdated and being rejected by the upstream API.

Steps to reproduce
Start the Molt bot instance.

Send a message or command to the bot to trigger a response (e.g., in a DM or channel).

Wait for the response.

Expected behavior
The bot should process the prompt and reply with generated text/content.

Actual behavior
The bot does not reply with content. Instead, the logs (or the bot's error reply) show the message: This version of Antigravity is no longer supported. Please update to receive the latest features!

Environment
Clawdbot/Moltbot version: (Run moltbot version or clawdbot version and paste here, e.g., v0.9.1)

OS: ARCH Linux

Install method: (e.g., Docker, npm install, git clone)



<img width="1202" height="442" alt="Image" src="https://github.com/user-attachments/assets/cbbf0772-4d7e-4016-83a0-45e44781d306" />

## Comments

### @jingrongx (2026-01-29)

Same issue, is Google restricting it?

### @BroHandTW (2026-01-29)

same issue

### @samuelvoltarius (2026-01-29)

This version of Antigravity is no longer supported. Please update to receive the latest features! same

got it on 2 claws/moltbots

### @lutas2000 (2026-01-29)

same issue

### @xDiogow (2026-01-29)

+1

### @andrelcbr (2026-01-29)

same.

### @jackyma001 (2026-01-29)

+1

### @lebangzhanshi23 (2026-01-29)

+1

### @vilmire (2026-01-29)

+2

### @CntrlX (2026-01-29)

i updated my antigravity and it worked 
so i guess we should update out molts antigravity too


### @nyandrianinamamy (2026-01-29)

+1

### @Mortezanavidi (2026-01-29)

same issue +1

### @lihaochen888 (2026-01-29)

+1

### @ariksman (2026-01-29)

same issue +1. 

Possible root cause, unconfirmed?

The API is rejecting requests based on the `X-Goog-Api-Client` header:
| Header | Moltbot (Rejected) | Official Gemini CLI (Works) |
|--------|-------------------|---------------------|
| `X-Goog-Api-Client` | `google-cloud-sdk vscode_cloudshelleditor/0.1` | `GeminiCLI/1.0` |


### @Mortezanavidi (2026-01-29)

Hi there,
@ariksman did you changed them and got a succesfull response?

### @ariksman (2026-01-29)

no success yet - not sure which part of the code sets these headers.

### @vilmire (2026-01-29)

https://github.com/NoeFabris/opencode-antigravity-auth/issues/310 +30

### @xDiogow (2026-01-29)

https://github.com/lbjlaq/Antigravity-Manager/pull/1316

Apparently we only need to bump version

### @lebangzhanshi23 (2026-01-29)

> [NoeFabris/opencode-antigravity-auth#310](https://github.com/NoeFabris/opencode-antigravity-auth/issues/310) +30

 Antigravity is no longer available for OpenWork either?

### @vilmire (2026-01-29)

https://github.com/badrisnarayanan/antigravity-claude-proxy/issues/213#issuecomment-3819416100 he solved


### @Mortezanavidi (2026-01-29)

[solved in open code](https://github.com/badrisnarayanan/antigravity-claude-proxy/issues/213#issuecomment-3819416100)
they solved it in opencode by upgrading the antigravity version, but clawd is not using an antigravity client, it's using an auth code to access it, so basically somehow in the header it's sending we need to push the client version, but how?

### @Mortezanavidi (2026-01-29)

@ariksman i think the first answer you gave was close to fixing it, can you find the Official gemini antigravity header that it sends?

### @Oceanswave (2026-01-29)

## Workaround Applied - 2026-01-29

**Environment:** Moltbot 2026.1.29 (c9fe062)

Monkey-patched the User-Agent header in the pi-ai provider to work around the version check:

**Change:**
- Before: `antigravity/1.11.5 darwin/arm64`
- After: `antigravity/1.15.8 darwin/arm64`

**Location:**
```
node_modules/.pnpm/@mariozechner+pi-ai@0.49.3_ws@8.19.0_zod@4.3.6/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js
```

This is a temporary workaround â€” the proper fix would be updating the version string in the upstream pi-ai package.

### @ariksman (2026-01-29)

Manual update also worked, but better to follow the official fixes found via the links above

Find and edit the file
nano ~/.local/share/moltbot/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js
Find line ~26 (ANTIGRAVITY_HEADERS):
"User-Agent": "antigravity/1.11.5 darwin/arm64"
Change to:
"User-Agent": "antigravity/1.15.8 linux/arm64"

### @Cluas (2026-01-29)

## Temporary Workaround

The issue is caused by an outdated `User-Agent` version (`antigravity/1.11.5`) in the `@mariozechner/pi-ai` package. Google has started rejecting older Antigravity client versions.

A fix has been submitted upstream: https://github.com/badlogic/pi-mono/pull/1067

### Until the fix is released, you can apply this patch manually:

#### macOS (Homebrew / npm global install)

```bash
# Find and patch the file
PI_AI_PATH="$(npm root -g)/moltbot/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js"
sudo sed -i '' 's/antigravity\/1.11.5/antigravity\/1.15.8/g' "$PI_AI_PATH"

# Verify the change
grep "antigravity" "$PI_AI_PATH" | head -3
```

#### Linux (npm global install)

```bash
# Find and patch the file
PI_AI_PATH="$(npm root -g)/moltbot/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js"
sudo sed -i 's/antigravity\/1.11.5/antigravity\/1.15.8/g' "$PI_AI_PATH"

# Verify the change
grep "antigravity" "$PI_AI_PATH" | head -3
```

#### Docker

If running via Docker, you'll need to either:
1. Rebuild the image after the upstream fix is merged, or
2. Mount a patched version of the file, or
3. Add a `RUN` command in your Dockerfile to apply the sed patch

#### From Source (git clone)

```bash
cd moltbot

# Patch the dependency
sed -i 's/antigravity\/1.11.5/antigravity\/1.15.8/g' node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js

# Rebuild
pnpm build

# Reinstall globally (optional)
sudo npm i -g . --force
```

### Verification

After patching, the grep output should show:
```
"User-Agent": "antigravity/1.15.8 darwin/arm64",
```

Instead of the old version `1.11.5`.

---

Related:
- Upstream PR: https://github.com/badlogic/pi-mono/pull/1067
- Upstream Issue: https://github.com/badlogic/pi-mono/issues/1068

### @markferreiro (2026-01-29)

Thanks @Cluas ! For those who installed the library before the renaming, just follow the instructions but replace `moltbot` with `clawdbot`.

### @royrenwb (2026-01-29)

> Thanks [@Cluas](https://github.com/Cluas) ! For those who installed the library before the renaming, just follow the instructions but replace `moltbot` with `clawdbot`.è°¢è°¢ï¼å¯¹äºŽåœ¨é‡å‘½åä¹‹å‰å®‰è£…äº†è¯¥åº“çš„ç”¨æˆ·ï¼Œåªéœ€æŒ‰ç…§è¯´æ˜Žæ“ä½œï¼Œä½†å°† `moltbot` æ›¿æ¢ä¸º `clawdbot` å³å¯ã€‚

Do you need to restart clawdbot?

### @AttackOnTyler (2026-01-29)

> > Thanks [@Cluas](https://github.com/Cluas) ! For those who installed the library before the renaming, just follow the instructions but replace `moltbot` with `clawdbot`.è°¢è°¢ï¼å¯¹äºŽåœ¨é‡å‘½åä¹‹å‰å®‰è£…äº†è¯¥åº“çš„ç”¨æˆ·ï¼Œåªéœ€æŒ‰ç…§è¯´æ˜Žæ“ä½œï¼Œä½†å°† `moltbot` æ›¿æ¢ä¸º `clawdbot` å³å¯ã€‚
> 
> Do you need to restart clawdbot?

I've restarted the machine and a gateway restart. I reinstalled and reupdated the file and Antigravity is still not supported.

grep "antigravity" "$PI_AI_PATH" | head -3
 * Shared implementation for both google-gemini-cli and google-antigravity providers.
    "User-Agent": "antigravity/1.15.8 darwin/arm64",
            const isAntigravity = model.provider === "google-antigravity";

### @ForSite (2026-01-29)

> > > Thanks [@Cluas](https://github.com/Cluas) ! For those who installed the library before the renaming, just follow the instructions but replace `moltbot` with `clawdbot`.è°¢è°¢ï¼å¯¹äºŽåœ¨é‡å‘½åä¹‹å‰å®‰è£…äº†è¯¥åº“çš„ç”¨æˆ·ï¼Œåªéœ€æŒ‰ç…§è¯´æ˜Žæ“ä½œï¼Œä½†å°† `moltbot` æ›¿æ¢ä¸º `clawdbot` å³å¯ã€‚
> > 
> > 
> > Do you need to restart clawdbot?
> 
> I've restarted the machine and a gateway restart. I reinstalled and reupdated the file and Antigravity is still not supported.
> 
> grep "antigravity" "$PI_AI_PATH" | head -3
> 
> * Shared implementation for both google-gemini-cli and google-antigravity providers.
>   "User-Agent": "antigravity/1.15.8 darwin/arm64",
>   const isAntigravity = model.provider === "google-antigravity";

try 1.15.8 linux/arm64 

"User-Agent": "antigravity/1.15.8 linux/arm64",

### @AaronL2005 (2026-01-29)

Repro on a fresh-ish Racknerd VPS (Docker Compose, source build).

What we tried (no secrets):
- Upgraded Moltbot from 2026.1.26 -> 2026.1.29 (rebuild via pnpm install/build + UI build).
- Re-ran  (OAuth completes successfully).
- Still every  model call returns immediately with: "This version of Antigravity is no longer supported. Please update to receive the latest features!".
- Usage stays 0/0/0 (request rejected before any model generation).

Workaround: switch default model away from google-antigravity (e.g. openai-codex) to keep the bot responsive.

Looks like upstream/Google is rejecting the Antigravity bridge itself rather than an auth/token expiry issue.

### @Jbenazzi (2026-01-29)

Guys, I've changed to antigravity/1.15.8 linux/arm64 and then restarted the gateway and it works.. 

### @shihua-guo (2026-01-29)

find the cli.js:
```
find / -name "google-gemini-cli.js"
```
then show:
```
/root/.local/share/pnpm/global/5/.pnpm/@mariozechner+pi-ai@0.49.3_ws@8.19.0_zod@4.3.6/node_modules/@mariozechner/pi-ai/dist/utils/oauth/google-gemini-cli.js
/root/.local/share/pnpm/global/5/.pnpm/@mariozechner+pi-ai@0.49.3_ws@8.19.0_zod@4.3.6/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js
```

modify the providers/google-gemini-cli.js

```
vi /root/.local/share/pnpm/global/5/.pnpm/@mariozechner+pi-ai@0.49.3_ws@8.19.0_zod@4.3.6/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js
```

"User-Agent": "antigravity/1.11.5 darwin/arm64"
Change to:
"User-Agent": "antigravity/1.15.8 linux/arm64"

### @2207231 (2026-01-29)



// Mine is a Linux server. The first step is this.
```
find / -name â€œgoogle-gemini-cli.js
```
/#
I told Gemini what I was going to do, and then pasted the results of the first step together. This would lead to the second step of substitution and the third step of verification. I suspect that perhaps the specific locations where everyone's servers or computers are located are different, so copying the code might not work.
#/
```
sed -i â€˜s|antigravity/1.11.5 darwin/arm64|antigravity/1.15.8 linux/arm64|gâ€™ /usr/lib/node_modules/clawdbot/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js
```
```
grep â€œantigravity/1.15.8 linux/arm64â€ /usr/lib/node_modules/clawdbot/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js
```


### @CherishMvp (2026-01-30)

> Same issue, is Google restricting it?

i think so 

### @mercy719 (2026-01-30)

<img width="596" height="202" alt="Image" src="https://github.com/user-attachments/assets/c9416c7e-c5d3-48ee-b47b-d759a5f531f4" />
Antigravity fixed it for me

### @jhargis (2026-01-30)

If you're running in a **Docker** container, this worked for me as a short term band aid:

```
  1. Patch the Dockerfile                                                                                                                   
                                                                                                                                            
  Add this block before ENV NODE_ENV=production in the Dockerfile:                                                                          
                                                                                                                                            
  RUN sed -i 's|antigravity/1.11.5 darwin/arm64|antigravity/1.15.8 linux/amd64|g' \                                                         
        /app/node_modules/.pnpm/@mariozechner+pi-ai@*/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js && \             
      sed -i 's|google-cloud-sdk vscode_cloudshelleditor/0.1|gl-node/22.0.0 antigravity/1.15.8|g' \                                         
        /app/node_modules/.pnpm/@mariozechner+pi-ai@*/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js \                
        /app/node_modules/.pnpm/@mariozechner+pi-ai@*/node_modules/@mariozechner/pi-ai/dist/utils/oauth/google-antigravity.js \             
        /app/dist/infra/provider-usage.fetch.antigravity.js \                                                                               
        /app/dist/commands/auth-choice.apply.google-antigravity.js                                                                          
                                                                                                                                            
  2. Rebuild and restart                                                                                                                    
                                                                                                                                            
  docker compose down                                                                                                                       
  docker build -t moltbot:local -f Dockerfile .                                                                                             
  docker compose up -d moltbot-gateway 
```



### @Kizai (2026-01-30)

I have installed the above method to modify and restart the gateway service, but it still returns: 'LLM request rejected: messages.159.content.1.tool_use.input: Field required'.

### @Kizai (2026-01-30)

> I have installed the above method to modify and restart the gateway service, but it still returns: 'LLM request rejected: messages.159.content.1.tool_use.input: Field required'.

To add to the above: On my Mac, restarting the gateway restored the functionality after making changes. However, on Linux, modifications only worked for the Gemini series models; the Claude series models remained unusable.

### @kamusis (2026-01-30)

the summarize skill should has the same issue needs to be fixed.

```
kamus in ðŸŒ racknerd-69302f9 in ~ 
â¯ find . -name "google-gemini-cli.js" | xargs grep "antigravity/1."
./.npm-global/lib/node_modules/@steipete/summarize/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js:    "User-Agent": "antigravity/1.11.5 darwin/arm64",
./.npm-global/lib/node_modules/clawdbot/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js:    "User-Agent": "antigravity/1.15.8 darwin/arm64",

kamus in ðŸŒ racknerd-69302f9 in ~ 
â¯ sudo sed -i 's/antigravity\/1.11.5/antigravity\/1.15.8/g' ./.npm-global/lib/node_modules/@steipete/summarize/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js

kamus in ðŸŒ racknerd-69302f9 in ~
â¯ find . -name "google-gemini-cli.js" | xargs grep "antigravity/1."
./.npm-global/lib/node_modules/@steipete/summarize/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js:    "User-Agent": "antigravity/1.15.8 darwin/arm64",
./.npm-global/lib/node_modules/clawdbot/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js:    "User-Agent": "antigravity/1.15.8 darwin/arm64",

kamus in ðŸŒ racknerd-69302f9 in ~ 
â¯ moltbot gateway restart
```

### @CntrlX (2026-01-30)

@Kizai 
i am still unable to use any of the models 
i am running Arch. Is there a different solve, i did everything here 


### @eztrigger (2026-01-30)

> <img alt="Image" width="596" height="202" src="https://private-user-images.githubusercontent.com/8835504/542536019-c9416c7e-c5d3-48ee-b47b-d759a5f531f4.png?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3Njk3NTA0MTAsIm5iZiI6MTc2OTc1MDExMCwicGF0aCI6Ii84ODM1NTA0LzU0MjUzNjAxOS1jOTQxNmM3ZS1jNWQzLTQ4ZWUtYjQ3Yi1kNzU5YTVmNTMxZjQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI2MDEzMCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNjAxMzBUMDUxNTEwWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YjY5YzQ4MmJhODQ5Y2M2NDA0NjY1OGM2MTE3ZjVjOGMzYTU1NDk1ZDFiYjlhMGJjMzdhNjFjZDM2YTY1MjBiNiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.DApuM0lFfleKO8AkZ6pDbZpIj_JMbKwDKkMJox07m90"> Antigravity fixed it for me

yeah this one works for me on mac

### @AnanthakrishnanBalasubramanian (2026-01-30)

I am also getting the same issue when i run openclaw dashboard "This version of Antigravity is no longer supported. Please update to receive the latest features!" I  am using MacOS, can you please help 

### @Kizai (2026-01-30)

> I am also getting the same issue when i run openclaw dashboard "This version of Antigravity is no longer supported. Please update to receive the latest features!" I am using MacOS, can you please help

The above method should solve the problem. Please confirm your filename; the name has been changed twice already.ï¼šclawdbot -> moltbot -> openclawdï¼š
`sed -i â€˜s|antigravity/1.11.5 darwin/arm64|antigravity/1.15.8 linux/arm64|gâ€™ $(npm root -g)/clawdbot/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js`  

### @uraimo (2026-01-30)

#4445 

### @Elesial (2026-01-30)

<img width="562" height="860" alt="Image" src="https://github.com/user-attachments/assets/450682d8-dd32-4246-92c3-2167032caf65" /> antigravity fixed it for me. and then restart your clawdbot gateway

### @samuelvoltarius (2026-01-30)

Is there already a version that fixes this issue?

### @abanoub-ashraf (2026-01-30)

same issue here

### @pntrivedy (2026-01-31)

> [#4445](https://github.com/openclaw/openclaw/pull/4445)

This fixed it for me.

### @huahuayu (2026-02-01)

**Workaround**: This issue is caused by a hardcoded outdated User-Agent version in the `@mariozechner/pi-ai` dependency.

Until it's fixed upstream, you can manually patch the file:

```bash
# Find and replace the outdated version
sed -i 's/antigravity\/1.15.8/antigravity\/1.15.9/g' $(npm root)/node_modules/@mariozechner/pi-ai/dist/providers/google-gemini-cli.js

# Restart your service after patching
```

I've reported this upstream at https://github.com/badlogic/pi-mono/issues/1129

### @MartinP7r (2026-02-01)

If you're on macOS try installing the macOS app. Running it's startup wizard resolved the issues for me.

https://github.com/openclaw/openclaw/releases/tag/v2026.1.30

### @timm-u (2026-02-02)

Bump and also. I suggest that besides fixing headers to also add robustness check that if such string is detected the model fallback still works (currently it will just become unusable).

"**Expected Behavior**
The provider should correctly identify this rejection to allow for automatic recovery.

**Version Correctness:** The version strings and User-Agent headers in the google-gemini-cli provider should be regularly updated in the source code to match the latest supported Antigravity requirements (currently 1.15.8).
**Robustness (Fallback Logic):** The provider should implement a check during stream processing that detects the string "This version of Antigravity is no longer supported" in the response body. If detected, the provider should throw an Error object. This ensures the agent runner catches the failure and triggers an automatic model fallback instead of presenting the error text to the user as a successful response."


## Links

- None detected yet
