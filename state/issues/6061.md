---
number: 6061
title: "Gateway install ignores bundled node from install-cli.sh, uses Homebrew instead"
author: joyshmitz
created: 2026-02-01T07:14:12Z
updated: 2026-02-01T21:04:41Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/6061
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

`openclaw gateway install` ignores the bundled Node.js installed by `install-cli.sh` at `~/.openclaw/tools/node/bin/node` and instead uses system/Homebrew node (`/opt/homebrew/bin/node`).

This creates a disconnect between the installer and the daemon service configuration.

## Root Cause

`resolvePreferredNodePath()` in `src/daemon/runtime-paths.ts` only scans system node candidates:
- `/opt/homebrew/bin/node` (macOS)
- `/usr/local/bin/node`
- `/usr/bin/node`

It does not check for the bundled node at `~/.openclaw/tools/node/bin/node`.

## Evidence

**install-cli.sh** installs bundled node and creates wrapper:
```bash
ln -sfn "$dir" "${PREFIX}/tools/node"
exec "${PREFIX}/tools/node/bin/node" "${PREFIX}/lib/node_modules/openclaw/dist/entry.js"
```

**macOS app** (`CommandResolver.swift:109`) knows about bundled node:
```swift
let nodeBin = base.appendingPathComponent("tools/node/bin")
if FileManager().fileExists(atPath: nodeBin.path) {
    paths.append(nodeBin.path)
}
```

**CLI daemon installer** does NOT know about bundled node - `resolvePreferredNodePath()` returns system node.

## Steps to Reproduce

1. Install OpenClaw via `install-cli.sh` (creates bundled node)
2. Run `openclaw gateway install`
3. Check LaunchAgent: `grep -A5 ProgramArguments ~/Library/LaunchAgents/ai.openclaw.gateway.plist`

**Expected:** Uses `~/.openclaw/tools/node/bin/node`
**Actual:** Uses `/opt/homebrew/bin/node`

## Impact

- Daemon uses different Node version than CLI wrapper
- System Node upgrades can break the gateway
- Inconsistent behavior between installer, app, and daemon

## Proposed Fix

Add bundled node check to `resolvePreferredNodePath()` before falling back to system node.

## Environment

- OpenClaw: 2026.1.30
- macOS: Darwin 25.2.0
- Install method: install-cli.sh

## Comments


## Links

- None detected yet
