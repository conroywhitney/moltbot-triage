---
number: 4326
title: "Gateway crashes with unhandled undici fetch error on network failures"
author: skywalkercyt
created: 2026-01-30T02:47:12Z
updated: 2026-01-30T03:16:20Z
labels: []
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/4326
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

### Description
Gateway process crashes completely when network requests fail (API calls to model providers). The error is an unhandled `undici` fetch failure that propagates up and kills the entire Node.js process.

### Environment
- **OS:** Windows 10 (running in Command Prompt)
- **Clawdbot version:** 2026.1.24-3
- **Node.js:** v22.18.0
- **Primary model:** minimax/MiniMax-M2.1

### Steps to Reproduce
1. Run `clawdbot gateway start` in Windows Command Prompt
2. Trigger any operation that calls the model API:
   - Cron job execution
   - Sub-agent spawn (`sessions_spawn`)
   - Heartbeat with tasks
3. If network has any transient failure (timeout, DNS hiccup, VPN drop), Gateway crashes

### Expected Behavior
Network errors should be caught and handled gracefully. The Gateway should:
- Log the error
- Retry or return error to the session
- Continue running

### Actual Behavior
Unhandled `undici` fetch error causes the entire Gateway process to exit.

### Error Message
```
TypeError: fetch failed
    ... (undici stack trace)
```

### Workaround
Using pm2 to auto-restart on crash:
```
pm2 start "clawdbot gateway start" --name clawdbot
```

### Additional Context
- Happens more frequently with cron/sub-agent since they run unattended
- Windows environment may have different signal handling than Unix

## Comments

### @C-o-d-e-C-o-w-b-o-y (2026-01-30)

https://github.com/moltbot/moltbot/issues/3815


## Links

- None detected yet
