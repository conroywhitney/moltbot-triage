---
number: 2512
title: "sessions.compact API error: 'sessionKey' vs 'key' parameter mismatch"
author: YodaEatsFishStx
created: 2026-01-27T02:23:51Z
updated: 2026-01-28T06:00:39Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/2512
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary
A call to `sessions.compact` failed with parameter mismatch error, and there appears to be excessive session creation (10 sessions in one day).

## Error
```
2026-01-26T20:25:57.818Z [ws] ⇄ res ✗ sessions.compact 1ms errorCode=INVALID_REQUEST 
errorMessage=invalid sessions.compact params: must have required property 'key'; at root: unexpected property 'sessionKey'
```

## Environment
- Clawdbot version: 2026.1.24-3
- OS: macOS 26.2 (arm64)
- Node: v25.4.0
- Model: claude-opus-4-5
- Channel: Telegram

## Observed Behavior
1. 10 session files created in a single day (abnormal - should be 1-2)
2. Session clusters at 09:xx, 11:xx, 12:xx suggest rapid resets
3. `sessions.compact` API called with `sessionKey` instead of `key`
4. Agent loses context on each session change because MEMORY.md isn't auto-injected

## Configuration
```json
{
  "agents": {
    "defaults": {
      "compaction": {
        "mode": "safeguard"
      }
    }
  }
}
```

## Workaround
Created a custom hook (`inject-memory`) to auto-inject MEMORY.md on `agent:bootstrap` events.

## Questions
1. What is calling `sessions.compact` with the wrong parameter name?
2. Is the excessive session creation related to the API error?
3. Should compaction create new session files or just summarize within the existing one?

## Session File Timeline (Jan 26)
- 09:17, 09:22, 10:37, 11:11, 11:14, 12:06, 12:16, 19:04, 21:16, 21:23

## Comments


## Links

- None detected yet
