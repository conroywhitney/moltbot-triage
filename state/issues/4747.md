---
number: 4747
title: "Compaction silently fails with 'Summary unavailable due to context limits'"
author: CREWorx
created: 2026-01-30T16:04:23Z
updated: 2026-01-30T16:07:58Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/4747
duplicate_of: null
related_issues: [4121,4572]
blocks: []
blocked_by: []
---

## Description

## Summary

Compaction returns an instant success message but silently fails to generate an actual summary. The session file shows:

```json
"summary": "Summary unavailable due to context limits. Older messages were truncated."
```

This defeats the purpose of compaction, which is to preserve context by summarizing.

## Expected Behavior

- Compaction should generate a meaningful summary of the session
- If summarization fails, the UI should indicate failure (not success)
- User-provided `/compact` instructions should be incorporated into the summary

## Actual Behavior

1. User runs `/compact` with detailed instructions
2. UI instantly returns: `⚙️ Compacted (152k → 20k) • Context 20k/200k (10%)`
3. Session file shows no real summary was generated
4. Agent wakes up post-compact with no context from the session

## Evidence

Session file entry after compaction:

```json
{
  "type": "compaction",
  "timestamp": "2026-01-30T15:56:19.518Z",
  "summary": "Summary unavailable due to context limits. Older messages were truncated.\n\n<modified-files>\n~/workspace/MEMORY.md\n~/workspace/memory/2026-01-30.md\n</modified-files>",
  "tokensBefore": 151675,
  "fromHook": true
}
```

Key observations:
- **Instant response** suggests no actual LLM summarization occurred
- **"context limits"** message is ironic — compaction exists to solve context limits
- **User instructions ignored** — the `/compact Focus on: ...` instructions were not used
- Contrast with Claude Code compaction which takes minutes for long sessions

## Environment

- OpenClaw version: 2026.1.29
- Model: claude-opus-4-5
- Session: Telegram topic
- Context before: 152k tokens

## Related

Possibly related to #4121 (compaction bug) and PR #4572 (pending fix).

## Workaround

Currently, users must manually paste key context when messaging the agent post-compact.

## Comments


## Links

- None detected yet
