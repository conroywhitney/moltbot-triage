---
number: 2877
title: "[Bug] Build produces duplicate dist/dist/ directory - patches hit wrong files"
author: henrybottter
created: 2026-01-27T17:06:53Z
updated: 2026-01-28T05:58:09Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/2877
duplicate_of: null
related_issues: [2829]
blocks: []
blocked_by: []
---

## Description

## Description

The build process creates a nested \dist/dist/hooks/bundled/\ directory in addition to the correct \dist/hooks/bundled/\ directory. This causes patches applied to \dist/dist/\ files to have no effect at runtime.

## Impact

The hook loader (\undled-dir.js\ line 22) loads from \dist/hooks/bundled/\, which is the correct runtime path. However, when navigating the package structure, it's easy to accidentally patch the \dist/dist/\ copy instead â€” which is never loaded.

We experienced this firsthand: our Windows path fix for session-memory (#2829) was initially applied to the wrong file, leaving the bug unfixed in production.

## Expected behavior

Build should not produce a nested \dist/dist/\ duplicate. Only \dist/hooks/\ should exist.

## Environment
- Windows 10 (10.0.19045)
- Clawdbot 2026.1.24-3
- Node v24.13.0

## Comments


## Links

- None detected yet
