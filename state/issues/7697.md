---
number: 7697
title: "[Feature Request] Support for GLM-4.6 reasoning_content field (iflow/Alibaba)"
author: EisonMe
created: 2026-02-03T03:56:10Z
updated: 2026-02-03T03:56:10Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7697
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

Note: iflow (apis.iflow.cn) is a free and open LLM API platform backed by Alibaba Group, providing access to powerful models like GLM-4.6.

# [Feature Request] Support for GLM-4.6 reasoning_content field and non-standard reasoning_tokens usage

## Problem Description

The `iflow/glm-4.6` reasoning model (from iflow.cn) currently returns empty output when used as a sub-agent in OpenClaw. Debugging reveals that this is due to a mismatch in the OpenAI-compatible API response format.

## Steps to Reproduce

1. Configure `iflow` provider in `openclaw.json`
2. Spawn a sub-agent using `iflow/glm-4.6`
3. The agent returns "(no output)" despite the API responding successfully

## Technical Analysis

Direct curl to `https://apis.iflow.cn/v1/chat/completions` shows that GLM-4.6 returns reasoning content in a **non-standard `reasoning_content` field**, and token usage in `usage.reasoning_tokens`:

```json
{
  "choices": [{
    "message": {
      "role": "assistant",
      "reasoning_content": "1. Analyzing query...",
      "content": "Final Answer"
    }
  }],
  "usage": {
    "prompt_tokens": 10,
    "completion_tokens": 100,
    "reasoning_tokens": 80
  }
}
```

OpenClaw's current `openai-completions` parser seems to ignore these fields, leading to:
- Empty content in session logs
- Zero token usage reported

## Proposed Solution

### 1. Update `isReasoningTagProvider`
Add `iflow` to the reasoning provider list in `src/utils/provider-utils.ts`

### 2. Update OpenAI Parser
Modify the response handler in `src/agents/pi-embedded-helpers/openai.ts` (and relevant locations) to:
- Map `reasoning_content` to the internal reasoning or thinking state
- Correctly parse `usage.reasoning_tokens`

### 3. Model Mapping
Ensure `iflow/glm-4.6` is recognized as a reasoning model by default

## Workaround

Setting `"reasoning": false` in the model config allows GLM-4.6 to work, but loses the reasoning output entirely.

## Environment Information

- **OpenClaw version:** 2026.2.1
- **OS:** WSL2 Ubuntu on Windows
- **Provider:** iflow (apis.iflow.cn)
- **Model:** glm-4.6

## Additional Context

GLM-4.6 is a capable Chinese reasoning model with competitive pricing. Proper support would benefit users who need multilingual reasoning capabilities.

## Comments


## Links

- None detected yet
