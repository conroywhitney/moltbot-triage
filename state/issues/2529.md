---
number: 2529
title: "[Bug]: No explicit reply target in message metadata for DMs vs groups"
author: pradeepdas
created: 2026-01-27T03:00:36Z
updated: 2026-01-27T03:00:36Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/2529
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary
When a WhatsApp DM arrives, there's no explicit metadata indicating it's a DM vs a group message, nor a `reply_to` target. This can cause the agent to reply to the wrong conversation.

## Steps to reproduce
1. Have WhatsApp connected with both DM and group conversations active
2. Receive a DM from a contact who is also in a group
3. Agent sees the message in main session with format `[WhatsApp +1XXXXXXXXXX ...] content`
4. Agent attempts to respond but has no explicit reply target
5. Agent guesses wrong and sends response to a group instead of the DM

## Expected behavior
Message metadata should include:
- Explicit indicator of DM vs group (e.g. `[WhatsApp DM from +1XXXXXXXXXX]` or `[WhatsApp Group: Name]`)
- A `reply_to` field with the correct target JID/number

## Actual behavior
Message only contains:
- Sender's number
- Message ID
- Channel (WhatsApp)

No explicit DM/group indicator or reply target. The only implicit signal is which session the message routes to (main vs group session), which is easy to miss.

## Environment
- Clawdbot version: 2026.1.24-3
- OS: macOS (Darwin 24.6.0 arm64)
- Install method: npm (homebrew node)

## Logs or screenshots
Example DM format received:
```
[WhatsApp +1XXXXXXXXXX +19m 2026-01-26 16:19 PST] https://example.com/link
[message_id: XXXXXXXXXXXX]
```

No indication this is a DM. Agent mistakenly sent reply to a group chat instead.

## Comments


## Links

- None detected yet
