---
number: 5099
title: "macOS app crashes when opening Voice settings (MicLevelMonitor audio format mismatch)"
author: CrossGen-ai
created: 2026-01-31T02:11:42Z
updated: 2026-01-31T02:24:32Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/5099
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary
The macOS app crashes immediately when clicking the Voice tab in settings. The crash occurs in `MicLevelMonitor.start()` when trying to install an audio tap on the input node.

## Crash Details
```
AVAudioIONodeImpl::SetOutputFormat(unsigned long, AVAudioFormat*)
AUGraphNodeBaseV3::CreateRecordingTap(...)
AVAudioEngineImpl::InstallTapOnNode(...)
-[AVAudioNode installTapOnBus:bufferSize:format:block:]
MicLevelMonitor.start(onLevel:)
VoiceWakeSettings.restartMeter()
```

## Environment
- macOS 15.3
- OpenClaw 2026.1.29 (8345)
- Mac Studio (Mac15,14)
- Audio setup: Multiple USB audio interfaces, Aggregate Device as default input

## Root Cause
The app appears to request a specific audio format for the tap that doesn't match the system's input format. With complex audio setups (aggregate devices, high sample rates like 768kHz from BlackHole), this causes `SetOutputFormat` to throw.

## Suggested Fix
Instead of specifying a format when calling `installTapOnBus`, query the input node's native format:
```swift
let format = inputNode.outputFormat(forBus: 0)
inputNode.installTap(onBus: 0, bufferSize: 1024, format: format) { ... }
```

Or handle the exception gracefully and disable the mic level meter if it fails, rather than crashing the entire app.

## Workaround Attempted
- Changed default input to Blue Yeti (48kHz) - still crashes
- Granted Microphone/Speech Recognition permissions manually - still crashes

## Comments


## Links

- None detected yet
