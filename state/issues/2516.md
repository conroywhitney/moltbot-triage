---
number: 2516
title: "Bug Report: Sub-agent completion messages expose internal instructions to user"
author: robertgoolsby
created: 2026-01-27T02:39:05Z
updated: 2026-01-28T06:00:37Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/2516
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

Bug Report: Sub-agent completion messages expose internal instructions to user

Summary

When sub-agents complete via sessions_spawn, the completion message incorrectly includes detailed task output, internal formatting instructions meant for the main agent, and technical statistics that should be hidden from users.

Expected Behavior

User should only see a natural summary from the main agent, like:

"Great! The Twitter agent found some interesting updates about..."

Actual Behavior

User sees the full internal message including:

Complete detailed task output
Instructions like "Summarize this naturally for the user. Keep it brief..."
Technical stats: tokens, runtime, session IDs, transcript paths
Raw formatting that should be processed by the main agent
Steps to Reproduce

Use sessions_spawn to create any background task
Wait for completion
Observe the message format in webchat
Minimal reproduction:

sessions_spawn(
  task="Just echo 'hello test' and exit successfully",
  label="format-test"
)
Example of Broken Output

A background task "format-test" just completed successfully.

Findings:
**Task Completed Successfully** ✅

I have successfully executed the echo command...

Stats: runtime 9s • tokens 13.8k (in 13 / out 164) • sessionKey agent:main:subagent:xxx...

Summarize this naturally for the user. Keep it brief (1-2 sentences). Flow it into the conversation naturally.
Do not mention technical details like tokens, stats, or that this was a background task.
You can respond with NO_REPLY if no announcement is needed...
Environment

Version: 2026.1.24-3
Platform: macOS (Darwin 25.2.0 arm64)
Channel: webchat
Gateway mode: local
Config: Standard configuration, no unusual settings
Impact

Completely breaks user experience for sub-agents
Exposes internal system details to users
Makes sub-agent features unusable in practice
Additional Notes

Reproduced consistently across multiple different tasks
Configuration appears standard with no obvious issues
Other Clawdbot features work normally
Issue affects webchat channel (other channels untested)
Configuration Excerpt

{
  "agents": {
    "defaults": {
      "maxConcurrent": 4,
      "subagents": {
        "maxConcurrent": 8
      }
    }
  }
}

## Comments


## Links

- None detected yet
