---
number: 1963
title: "Plugin install fails on Windows: spawn npm ENOENT"
author: sceboucher
created: 2026-01-25T21:42:29Z
updated: 2026-01-28T22:09:36Z
labels: ["bug"]
assignees: []
comments_count: 3
reactions_total: 0
url: https://github.com/moltbot/moltbot/issues/1963
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Description
Plugin installation via the web UI fails on Windows with:
\\\
Install failed (unknown exit): spawn npm ENOENT
\\\

## Root Cause
In \dist/plugins/install.js\, the code uses:
\\\javascript
await runCommandWithTimeout([npm, install, --omit=dev, --silent], ...)
\\\

And in \dist/process/exec.js\, \unCommandWithTimeout\ uses \spawn()\ without \shell: true\:
\\\javascript
const child = spawn(argv[0], argv.slice(1), { stdio, cwd, env, ... });
\\\

On Windows, npm is installed as \
pm.cmd\ (a batch file wrapper). Node's \spawn()\ cannot execute \.cmd\ files without \shell: true\.

## Environment
- Windows 11
- Node.js v24.1.0
- Clawdbot 2026.1.24-3
- npm 11.3.0 (installed at C:\Program Files\nodejs\npm.cmd)

## Suggested Fix
Add \shell: true\ on Windows in \unCommandWithTimeout\:
\\\javascript
const child = spawn(argv[0], argv.slice(1), {
  stdio,
  cwd,
  env: resolvedEnv,
  windowsVerbatimArguments,
  shell: process.platform === 'win32',  // <-- Add this
});
\\\

## Workaround
Use CLI instead of web UI:
\\\
clawdbot plugins install @clawdbot/matrix
\\\

## Comments

### @bryanbrown81 (2026-01-27)

This worked for me.  Installing GIT and rerunning PS1 installer iwr -useb https://clawd.bot/install.ps1 | iex

### @rumplin (2026-01-27)

I can confirm, installing GIT fixed the issue for me too.

### @Fegor (2026-01-28)

npm cache clean --force   用这个命令清理缓存后，再次安装成功。


## Links

- None detected yet
