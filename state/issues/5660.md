---
number: 5660
title: "claude-cli backend: webchat messages disappear (same as #2977)"
author: OmarNassar1127
created: 2026-01-31T20:05:25Z
updated: 2026-02-02T00:18:17Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/5660
duplicate_of: null
related_issues: [2977]
blocks: []
blocked_by: []
---

## Description

## Summary

Same issue as #2977 but with `claude-cli` instead of `codex-cli`. When using `claude-cli/opus-4.5` as the primary model provider, messages sent via the dashboard/webchat disappear after being sent. Switching back to `anthropic/claude-opus-4-5` immediately fixes the issue.

## Environment

- **OpenClaw version:** 2026.1.30
- **OS:** macOS (Darwin 25.2.0)
- **Node:** v24.13.0 (via nvm)
- **claude-cli version:** (latest via claude code)

## Configuration

```json
{
  "agents": {
    "defaults": {
      "model": {
        "primary": "claude-cli/opus-4.5"
      }
    }
  }
}
```

## Steps to Reproduce

1. Configure openclaw with `claude-cli/opus-4.5` as primary model
2. Open dashboard webchat
3. Send any message
4. Observe: message appears, response starts, then both disappear
5. WebSocket disconnects with code 1001

## Log Evidence

```
19:46:29 [agent/claude-cli] cli exec: provider=claude-cli model=opus promptChars=66
19:46:37 [ws] webchat disconnected code=1001 reason=n/a
19:46:37 [ws] webchat connected (reconnect)
19:47:21 [agent/claude-cli] cli exec: provider=claude-cli model=opus promptChars=120
19:47:34 [ws] webchat disconnected code=1001 reason=n/a
```

Pattern: `cli exec` logged but no completion, then websocket disconnect ~10-60s later.

## Workaround

Switch to `anthropic/claude-opus-4-5` as primary model.

## Notes

- Telegram channel works perfectly with `claude-cli` - only webchat is affected
- The patches in #2977 comment likely apply here too (CLI agents don't emit `assistant` stream events or persist to transcript)
- This is a regression when trying to use Claude Max subscription via CLI instead of direct API

## Related

- #2977 (same root cause, different CLI backend)

## Comments


## Links

- None detected yet
