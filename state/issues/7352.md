---
number: 7352
title: "Docs: Telegram DM threaded mode behavior contradicts documentation"
author: coolishagent
created: 2026-02-02T18:40:15Z
updated: 2026-02-02T19:03:36Z
labels: []
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7352
duplicate_of: null
related_issues: [1597,1898,6956]
blocks: []
blocked_by: []
---

## Description

## Description

The documentation for Telegram DM threaded mode states:

> Private chats can include message_thread_id in some edge cases. **OpenClaw keeps the DM session key unchanged**, but still uses the thread id for replies/draft streaming when it is present.

Source: `docs/channels/telegram.md` (line 267)

## Actual behavior (correct, per PR #1597)

PR #1597 (merged Jan 25, 2026) intentionally introduced thread-aware session keys for DM topics:

> "Derives a thread-aware session key for DM topics so each thread becomes its own session context."

Each DM thread correctly creates a separate session like `agent:main:main:thread:20574`, which is the designed behavior.

## The issue

1. **Documentation is outdated**: The phrase "keeps the DM session key unchanged" contradicts the actual behavior introduced by PR #1597.

2. **No General topic in DM threaded mode**: Unlike group forums which have a "General" topic, Telegram DM threaded mode forces every new message to create a new thread. There is no "main conversation" entry point. This means:
   - Users cannot maintain a continuous conversation with the bot
   - Every message starts a fresh thread with independent context
   - The original `agent:main:main` session becomes unreachable once threaded mode is enabled

3. **Docs recommend threaded mode for draft streaming, but don't explain the trade-off**: The draft streaming docs state it requires "Private chat topics (forum topic mode for the bot)" but don't mention that enabling this will fragment all DM conversations into isolated threads with no way to maintain a continuous main session.

## Suggested fix

Update `docs/channels/telegram.md` to:
- Remove the outdated "keeps the DM session key unchanged" statement
- Clearly document that DM threaded mode creates independent sessions per thread
- Add a prominent note in the draft streaming section explaining the trade-off: enabling threaded mode for streaming breaks DM session continuity
- Consider whether OpenClaw should route all DM threads to the main session (preserving context) while only using thread IDs for reply routing and draft streaming — this would match the original documented behavior and give users the best of both worlds

## Related issues

- #1898 — DM threaded mode routing (closed)
- #6956 — DM topics reply routing broken in 2026.1.30 (open)
- PR #1597 — Original threaded conversation support

## Environment

- OpenClaw version: 2026.2.1
- Channel: Telegram (private/DM chat)
- Threaded Mode: enabled via BotFather MiniApp
- streamMode: "partial"

## Comments

### @coolishagent (2026-02-02)

## Critical UX issue: Enabling threaded mode permanently abandons the main session context

After enabling DM threaded mode via BotFather, the Telegram UI provides **no way to return to the original main conversation** (`agent:main:main`). 

- There is no "General" topic in DM threaded mode (unlike group forums)
- Every new message **must** create a new thread — there is no option to send a message without creating a thread
- The only way to continue an existing thread is to reply within it
- The original main session (which may have 100k+ tokens of accumulated context) becomes **permanently unreachable** from the Telegram UI

This means enabling threaded mode is effectively a **one-way door** that fragments all future conversations and orphans the main session's context. Users must disable threaded mode in BotFather to regain access to their main session.

**This should be prominently documented as a warning** before users enable threaded mode for draft streaming.


## Links

- None detected yet
