---
number: 5731
title: "sessions_spawn model override not applied (subagents always use main model)"
author: carlbot2026
created: 2026-01-31T22:16:47Z
updated: 2026-02-02T00:18:00Z
labels: ["bug"]
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/5731
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Bug Description

The `model` parameter in `sessions_spawn` and the `agents.defaults.subagents.model` config setting are both ignored. Sub-agents always run on the main agent's model regardless of configuration.

## Environment

- **OpenClaw version:** 2026.1.29
- **OS:** macOS (Darwin 25.2.0 arm64)

## Config

```json
{
  "agents": {
    "defaults": {
      "model": {
        "primary": "anthropic/claude-opus-4-5"
      },
      "subagents": {
        "maxConcurrent": 8,
        "model": "lmstudio/qwen3-30b-a3b-instruct-2507-mlx"
      }
    }
  },
  "models": {
    "providers": {
      "lmstudio": {
        "baseUrl": "http://192.168.0.249:1234/v1",
        "api": "openai-completions",
        "models": [{ "id": "qwen3-30b-a3b-instruct-2507-mlx", ... }]
      }
    }
  }
}
```

## Reproduction

1. Configure `agents.defaults.subagents.model` to a different model than the primary
2. Spawn a sub-agent:
   ```
   sessions_spawn(task: "Identify yourself: What model are you?")
   ```
3. Or explicitly pass model:
   ```
   sessions_spawn(task: "...", model: "lmstudio/qwen3-30b-a3b-instruct-2507-mlx")
   ```

## Expected Behavior

Sub-agent should run on `lmstudio/qwen3-30b-a3b-instruct-2507-mlx`.

## Actual Behavior

- `sessions_spawn` returns `{ modelApplied: true }` (misleading)
- Sub-agent transcript shows it initialized with `anthropic/claude-opus-4-5`:
  ```json
  {"type":"model_change","provider":"anthropic","modelId":"claude-opus-4-5"}
  ```
- Sub-agent self-identifies as Claude Opus 4.5

## Notes

- LM Studio is reachable and model is available (verified via `curl /v1/models`)
- The `modelApplied: true` response is incorrect/misleading
- Tested 3x with both config-based and explicit model overrides â€” same result each time

## Comments


## Links

- None detected yet
