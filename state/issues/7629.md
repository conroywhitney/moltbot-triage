---
number: 7629
title: "memory-lancedb: Add hybrid search (BM25 + vector)"
author: joeykrug
created: 2026-02-03T02:12:30Z
updated: 2026-02-03T02:12:30Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7629
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Feature Request

**Plugin:** `memory-lancedb`

### Current Behavior
The memory-lancedb plugin uses pure vector search via `table.vectorSearch()`. This works well for semantic similarity but misses exact keyword matches (IDs, env vars, code symbols, names).

### Proposed Enhancement
Add hybrid search combining:
- **Vector similarity** (semantic match)
- **BM25 full-text search** (exact keyword relevance)

LanceDB already supports this natively:
- FTS via Tantivy (`create_fts_index()`)
- Hybrid search mode (`search(query, query_type="hybrid")`)
- Built-in rerankers (linear combination, RRF, Cohere, ColBERT)

### Suggested Implementation
1. Create FTS index on the `text` column during table initialization
2. Add config option: `hybrid: { enabled: boolean, vectorWeight?: number, textWeight?: number }`
3. Use `.search()` with hybrid mode instead of `.vectorSearch()` when enabled

### References
- [LanceDB Full-Text Search docs](https://lancedb.github.io/lancedb/fts/)
- [LanceDB Hybrid Search docs](https://lancedb.github.io/lancedb/hybrid_search/hybrid_search/)

### Why This Matters
The built-in `memorySearch` (SQLite + sqlite-vec) already supports hybrid via FTS5. Having parity in the LanceDB plugin would let users choose their preferred backend without sacrificing search quality.

## Comments


## Links

- None detected yet
