---
number: 7348
title: "Unhandled promise rejection: AbortError from undici crashes gateway"
author: mcdcanbeme
created: 2026-02-02T18:35:48Z
updated: 2026-02-02T18:35:48Z
labels: []
assignees: []
comments_count: 0
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7348
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Description

The gateway crashes with an unhandled promise rejection from Node's built-in undici HTTP client:

```
[clawdbot] Unhandled promise rejection: AbortError: This operation was aborted
    at node:internal/deps/undici/undici:16416:13
    at processTicksAndRejections (node:internal/process/task_queues:104:5)
    at runNextTicks (node:internal/process/task_queues:69:3)
    at processTimers (node:internal/timers:538:9)
```

## Environment

- **Clawdbot version**: 2026.1.24-3
- **Node.js version**: v25.4.0
- **OS**: macOS Darwin 24.6.0 (x64)

## Reproduction

Occurs during normal operation, observed during/after sub-agent runs. First occurrence crashed the gateway entirely; second occurrence logged the error but the process survived.

- **First crash**: 2026-02-02T10:08:11Z — gateway process died, required manual restart. Cron jobs did not fire.
- **Second occurrence**: 2026-02-02T18:33:13Z — error logged but gateway survived.

Both times the gateway was running sub-agents (spawned sessions) and had recent web_search / browser tool activity.

## Impact

When the error is fatal, the gateway goes down silently. Cron jobs stop firing. No automatic restart unless a LaunchAgent is configured with KeepAlive.

## Suggested Fix

The AbortError from undici should be caught — likely needs a global `process.on('unhandledRejection')` handler or the specific fetch/HTTP call that's aborting needs proper error handling.

## Comments


## Links

- None detected yet
