---
number: 3435
title: "[Bug]:  Windows cron + exec uses cd ~\\clawd and breaks local scripts (Gmail + audio/Whisper)"
author: eliasmal-cmyk
created: 2026-01-28T16:07:38Z
updated: 2026-01-28T16:51:05Z
labels: ["bug", "question"]
assignees: []
comments_count: 2
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/3435
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

## Summary

On **Windows 11**, `cron + exec` seems to rewrite commands to `cd ~\clawd...` and frequently fails before executing local scripts (Node/Python). This breaks practical use cases like a Gmail watcher and local Whisper audio transcription.

My local scripts work fine when run manually with absolute paths. When scheduled via cron, the gateway logs show `Exec: cd ~\clawd... failed` and sometimes `exec host not allowed`.

---

## Environment

- OS: **Windows 11**
- Moltbot / Clawdbot version: `2026.1.24-3` (and latest 2026.1.x)
- Gateway: running locally (WhatsApp connected)
- Agent workspace: `C:\Users\Usuario\clawd`
- Shell: PowerShell (default for the gateway)

---

## What I‚Äôm trying to do

### 1. Gmail ‚Äúimportant mail‚Äù watcher

Local script (works fine when run manually):

```powershell
cd C:\Users\Usuario\clawd\gmail
node gmail_important.js
This script lists ‚Äúimportant‚Äù emails as JSON.

Cron job (simplified):

{
  "name": "gmail-important-watch",
  "schedule": { "kind": "every", "everyMs": 1200000 },
  "sessionTarget": "isolated",
  "payload": {
    "kind": "agentTurn",
    "message": "Cada vez que se ejecute este job (gmail-important-watch), haz lo siguiente: 1) Ejecuta con exec el comando `cd C:\\\\Users\\\\Usuario\\\\clawd\\\\gmail && node gmail_important.js` ..."
  }
}
Note: the command I pass uses an absolute path.

2. WhatsApp audio ‚Üí local Whisper
Local venv and script:

C:\Users\Usuario\clawd\.venv-whisper
C:\Users\Usuario\clawd\whatsapp_audio_watch.py
Manually this works:

cd C:\Users\Usuario\clawd
.\.venv-whisper\Scripts\python.exe whatsapp_audio_watch.py
Cron job (simplified):

{
  "name": "whatsapp-audio-whisper-v2",
  "schedule": { "kind": "every", "everyMs": 30000 },
  "sessionTarget": "isolated",
  "payload": {
    "kind": "agentTurn",
    "message": "Cada vez que se ejecute este job, haz lo siguiente: 1) Ejecuta con exec el comando `cd C:\\\\Users\\\\Usuario\\\\clawd && .\\\\.venv-whisper\\\\Scripts\\\\python.exe whatsapp_audio_watch.py` ..."
  }
}
Again, I use an absolute path in the message.

What actually happens
Even though the cron payload contains absolute paths, the gateway logs show a different command being executed.

For Gmail:

Cron: ‚ö†Ô∏è üõ†Ô∏è Exec: cd ~\clawd\gmail && node gmail_important.js failed: At line:1 char:33
For Whisper / audio:

Cron: ‚ö†Ô∏è üõ†Ô∏è Exec: cd ~\clawd && .\.venv-whisper\Scripts\python.exe whatsapp_audio_watch.py failed: At line:1 char:27
So somewhere between my cron payload and the actual PowerShell execution, the gateway:

prepends cd ~\clawd (or ~\clawd\gmail), and
discards the absolute path I specified.
On my PowerShell, ~\clawd is not a valid working directory in this context, so the cd fails and the script never runs.

Sometimes I also see:

exec host not allowed (requested gateway; configure tools.exec.host=sandbox to allow)
which suggests there is also a tools.exec.host policy involved.

Symptoms
Local scripts run fine when called manually with absolute paths.
When called via cron:
I often see Exec: cd ~\clawd... failed in System logs.
The script sometimes doesn‚Äôt run at all (no Gmail summary, no audio handling).
On other runs I do get the Gmail summary or an audio-based reply, but the System stream is still noisy.
Why this is problematic
A big use case for Moltbot is ‚Äúrun my own scripts on a schedule‚Äù:

Gmail watcher,
local Whisper audio transcription,
scripts that talk to other tools (e.g. ComfyUI).
On macOS/Linux that seems natural.
On Windows, cron+exec feels unreliable because:

commands are rewritten with cd ~\clawd...,
exec host not allowed sometimes blocks host execution,
and System is spammed with the failing Exec logs.
What would help
From a Windows user‚Äôs perspective, a few things would make cron+exec much more usable:

Don‚Äôt inject cd ~\... when the cron payload already has an absolute path (especially on Windows).
Let the user decide the working directory via the command itself.

Clarify and/or provide a recommended configuration for tools.exec.host on Windows.
e.g. how to safely allow cron to run local Node/Python scripts.

Optionally reduce System spam for repeated cron exec errors.
Keeping full details in logs but summarizing errors in System would make day‚Äëto‚Äëday use less noisy.

Extra info
I‚Äôm happy to:

share my cron definitions (full JSON),
share sanitized clawdbot.json,
run any debug build or extra logging you need.
The key observation is:

On Windows, cron+exec currently injects cd ~\clawd... and breaks otherwise working local scripts, making Moltbot a lot less useful as a local automation scheduler on this platform.

## Comments

### @sebslight (2026-01-28)

Please format this issue correctly using markdown


### @eliasmal-cmyk (2026-01-28)

# Summary

On **Windows 11**, `cron + exec` seems to rewrite commands to `cd ~\clawd...` and frequently fails before executing local scripts (Node/Python). This breaks practical use cases like a Gmail watcher and local Whisper audio transcription.

My local scripts work fine when run manually with absolute paths. When scheduled via cron, the gateway logs show `Exec: cd ~\clawd... failed` and sometimes `exec host not allowed`.

---

## Environment

- OS: **Windows 11**
- Moltbot / Clawdbot version: `2026.1.24-3` (and latest 2026.1.x)
- Gateway: running locally (WhatsApp connected)
- Agent workspace: `C:\Users\Usuario\clawd`
- Shell: PowerShell (default for the gateway)

---

## What I‚Äôm trying to do

### 1. Gmail ‚Äúimportant mail‚Äù watcher

Local script (works fine when run manually):

```powershell
cd C:\Users\Usuario\clawd\gmail
node gmail_important.js
This script lists ‚Äúimportant‚Äù emails as JSON.

Cron job (simplified):

{
  "name": "gmail-important-watch",
  "schedule": { "kind": "every", "everyMs": 1200000 },
  "sessionTarget": "isolated",
  "payload": {
    "kind": "agentTurn",
    "message": "Cada vez que se ejecute este job (gmail-important-watch), haz lo siguiente: 1) Ejecuta con exec el comando `cd C:\\\\Users\\\\Usuario\\\\clawd\\\\gmail && node gmail_important.js` ..."
  }
}
Note: the command I pass uses an absolute path.

2. WhatsApp audio ‚Üí local Whisper
Local venv and script:

C:\Users\Usuario\clawd\.venv-whisper
C:\Users\Usuario\clawd\whatsapp_audio_watch.py
Manually this works:

cd C:\Users\Usuario\clawd
.\.venv-whisper\Scripts\python.exe whatsapp_audio_watch.py
Cron job (simplified):

{
  "name": "whatsapp-audio-whisper-v2",
  "schedule": { "kind": "every", "everyMs": 30000 },
  "sessionTarget": "isolated",
  "payload": {
    "kind": "agentTurn",
    "message": "Cada vez que se ejecute este job, haz lo siguiente: 1) Ejecuta con exec el comando `cd C:\\\\Users\\\\Usuario\\\\clawd && .\\\\.venv-whisper\\\\Scripts\\\\python.exe whatsapp_audio_watch.py` ..."
  }
}
Again, I use an absolute path in the message.

What actually happens
Even though the cron payload contains absolute paths, the gateway logs show a different command being executed.

For Gmail:

Cron: ‚ö†Ô∏è üõ†Ô∏è Exec: cd ~\clawd\gmail && node gmail_important.js failed: At line:1 char:33
For Whisper / audio:

Cron: ‚ö†Ô∏è üõ†Ô∏è Exec: cd ~\clawd && .\.venv-whisper\Scripts\python.exe whatsapp_audio_watch.py failed: At line:1 char:27
So somewhere between my cron payload and the actual PowerShell execution, the gateway:

prepends cd ~\clawd (or ~\clawd\gmail), and
discards the absolute path I specified.
On my PowerShell, ~\clawd is not a valid working directory in this context, so the cd fails and the script never runs.

Sometimes I also see:

exec host not allowed (requested gateway; configure tools.exec.host=sandbox to allow)
which suggests there is also a tools.exec.host policy involved.

Symptoms
Local scripts run fine when called manually with absolute paths.
When called via cron:
I often see Exec: cd ~\clawd... failed in System logs.
The script sometimes doesn‚Äôt run at all (no Gmail summary, no audio handling).
On other runs I do get the Gmail summary or an audio-based reply, but the System stream is still noisy.
Why this is problematic
A big use case for Moltbot is ‚Äúrun my own scripts on a schedule‚Äù:

Gmail watcher,
local Whisper audio transcription,
scripts that talk to other tools (e.g. ComfyUI).
On macOS/Linux that seems natural.
On Windows, cron+exec feels unreliable because:

commands are rewritten with cd ~\clawd...,
exec host not allowed sometimes blocks host execution,
and System is spammed with the failing Exec logs.
What would help
From a Windows user‚Äôs perspective, a few things would make cron+exec much more usable:

Don‚Äôt inject cd ~\... when the cron payload already has an absolute path (especially on Windows).
Let the user decide the working directory via the command itself.

Clarify and/or provide a recommended configuration for tools.exec.host on Windows.
e.g. how to safely allow cron to run local Node/Python scripts.

Optionally reduce System spam for repeated cron exec errors.
Keeping full details in logs but summarizing errors in System would make day‚Äëto‚Äëday use less noisy.

Extra info
I‚Äôm happy to:

share my cron definitions (full JSON),
share sanitized clawdbot.json,
run any debug build or extra logging you need.
The key observation is:

On Windows, cron+exec currently injects cd ~\clawd... and breaks otherwise working local scripts, making Moltbot a lot less useful as a local automation scheduler on this platform.


## Links

- None detected yet
