---
number: 7576
title: "[BUG]: Session-level model overrides ignored when models.providers is configured"
author: joeldeteves
created: 2026-02-03T00:34:08Z
updated: 2026-02-03T03:16:36Z
labels: []
assignees: []
comments_count: 1
reactions_total: 0
url: https://github.com/openclaw/openclaw/issues/7576
duplicate_of: null
related_issues: []
blocks: []
blocked_by: []
---

## Description

Description:
When models.providers is configured (even with mode: "merge"), the inference router ignores session-level model overrides and always routes to agents.defaults.model.primary.

Environment:
• OpenClaw version: 2026.1.30
• Config: models.providers configured via [Fireworks setup script](https://fireworks.ai/blog/kimi-k2p5)
• Primary model: fireworks/accounts/fireworks/models/kimi-k2p5


Steps to Reproduce:
1. Configure models.providers (e.g., via Fireworks setup script):
```
"models": {
  "mode": "merge",
  "providers": {
    "fireworks": {
      "baseUrl": "https://api.fireworks.ai/inference/v1",
      "apiKey": "${FIREWORKS_API_KEY}",
      "api": "openai-completions",
      "models": [...]
    }
  }
}
```
2. Set primary model: agents.defaults.model.primary: "`fireworks/accounts/fireworks/models/kimi-k2p5`"
3. Attempt to switch models e.g. `/model openrouter/auto` or `/model gemini`
4. Run session_status — it should show the requested model (e.g., openrouter/auto)
5. Check actual inference — still routes to Fireworks/Kimi (billing confirms this)
Expected Behavior:
Session override should route inference to the selected model (OpenRouter/GLM).

Actual Behavior:
- Session status always shows `fireworks/accounts/fireworks/models/kimi-k2p5`
- Inference always routes to agents.defaults.model.primary (Fireworks/Kimi), regardless of session override.

Evidence:
• session_status reports requested model correctly
• Display name shows requested model
• But runtime info always shows model=fireworks/accounts/fireworks/models/kimi-k2p5
• Billing consistently shows Fireworks, not OpenRouter

Workaround:
Remove models.providers section entirely, or change agents.defaults.model.primary to desired model.

## Comments

### @joeldeteves (2026-02-03)

Just a FYI, I rebooted, and the problem seems to have gone away, at least for now. Super weird - restarted the gateway dozens of times, it didn't help. Maybe the bug can be reproduced by installing via the fireworks script?


## Links

- None detected yet
